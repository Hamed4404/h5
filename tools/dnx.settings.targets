<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <Configuration Condition="'$(Configuration)' == ''">Release</Configuration>
    </PropertyGroup>

    <PropertyGroup>
        <DNXRootPath>$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildProjectDirectory), dnx.msbuild))\</DNXRootPath>
        <DNXBinPath>$(DNXRootPath)bin\</DNXBinPath>
        <DNXToolsPath>$(DNXRootPath)tools\</DNXToolsPath>
        <CommandsPath>$(DNXToolsPath)commands</CommandsPath>
    </PropertyGroup>

    <PropertyGroup>
        <IntermediateOutputPath Condition="'$(BuildWorkingDirectory)'!=''">$(BuildWorkingDirectory)</IntermediateOutputPath>
        <IntermediateOutputPath Condition="'$(IntermediateOutputPath)'==''">$(DNXRootPath)obj\</IntermediateOutputPath>
        <SignedOutputPath>$(IntermediateOutputPath)Signed\</SignedOutputPath>
        <ArtifactsPath>$(DNXRootPath)artifacts\</ArtifactsPath>
        <OutputPath Condition="'$(Sign)' == 'Sign'">$(SignedOutputPath)</OutputPath>
        <OutputPath Condition="'$(Sign)' != 'Sign'">$(DNXBinPath)$(Configuration)\</OutputPath>
        <PoliCheckPath>$(IntermediateOutputPath)policheck\</PoliCheckPath>
        <PackagesOutputPath>$(ArtifactsPath)Signed\Packages\</PackagesOutputPath>
        <PackageCacheOutputPath>$(ArtifactsPath)Signed\PackageCache\</PackageCacheOutputPath>
        <TimestampFreePackagesOutputPath>$(ArtifactsPath)Signed\Packages-NoTimeStamp\</TimestampFreePackagesOutputPath>
        <SymbolsOutputPath>$(ArtifactsPath)Signed\Symbols\</SymbolsOutputPath>
        <SignedVSIXPath>$(ArtifactsPath)Signed\VSIX\</SignedVSIXPath>
    </PropertyGroup>

    <PropertyGroup>
        <UnsignedPackagesPath>$(IntermediateOutputPath)UnsignedPackages\</UnsignedPackagesPath>
        <UnsignedSymbolPackagesPath>$(IntermediateOutputPath)symbols\UnsignedPackages\</UnsignedSymbolPackagesPath>
        <UnsignedVSIXPath>$(IntermediateOutputPath)UnsignedVSIX\</UnsignedVSIXPath>
        <UnsignedPackageCachePath>$(IntermediateOutputPath)UPC\</UnsignedPackageCachePath>
        <SignedAllMetapackagePath>$(IntermediateOutputPath)SignedAllMetapackage\</SignedAllMetapackagePath>
        <UnsignedVSIXWithSignedBinariesPath>$(IntermediateOutputPath)UnsignedVSIXWithSignedBinaries\</UnsignedVSIXWithSignedBinariesPath>
        <UnsignedBinariesPath>$(DNXBinPath)FilesToSign\</UnsignedBinariesPath>
        <BinScopePackagesPath>$(IntermediateOutputPath)\BinScopePackages\</BinScopePackagesPath>

        <CodeSignScriptsPath>$(SignedOutputPath)Scripts\</CodeSignScriptsPath>
        <CodeSignVerificationPath>$(SignedOutputPath)Verification\</CodeSignVerificationPath>
        <SignedBinariesPath>$(SignedOutputPath)</SignedBinariesPath>
    </PropertyGroup>

    <PropertyGroup>
        <BinaryCodeSignCertificates>400</BinaryCodeSignCertificates>
        <VSIXCodeSignCertificates>100040160</VSIXCodeSignCertificates>
        <ThirdParthCodeSignCertificates>135020001</ThirdParthCodeSignCertificates>
        <CodeSignDisplayName>Microsoft ASP.NET Core</CodeSignDisplayName>
        <CodeSignUrl>http://www.asp.net/</CodeSignUrl>
        <VerifySignatures Condition="'$(VerifySignatures)' == ''">true</VerifySignatures>
        <CodeSignCreateTestJob Condition="'$(CodeSignCreateTestJob)' == ''">false</CodeSignCreateTestJob>
    </PropertyGroup>

    <ItemDefinitionGroup>
        <PackageCacheThirdPartyBinariesToSign>
            <Description>Signing third party binaries</Description>
            <DisplayName>$(CodeSignDisplayName)</DisplayName>
            <Url>$(CodeSignUrl)</Url>
            <Certificates>$(ThirdParthCodeSignCertificates)</Certificates>
        </PackageCacheThirdPartyBinariesToSign>

        <PackageCacheBinariesToSign>
            <Description>Signing AspNetCore binaries</Description>
            <DisplayName>$(CodeSignDisplayName)</DisplayName>
            <Url>$(CodeSignUrl)</Url>
            <Certificates>$(BinaryCodeSignCertificates)</Certificates>
        </PackageCacheBinariesToSign>

        <BinariesToSign>
            <Description>Signing AspNetCore binaries</Description>
            <DisplayName>$(CodeSignDisplayName)</DisplayName>
            <Url>$(CodeSignUrl)</Url>
            <Certificates>$(BinaryCodeSignCertificates)</Certificates>
        </BinariesToSign>
    </ItemDefinitionGroup>
</Project>
