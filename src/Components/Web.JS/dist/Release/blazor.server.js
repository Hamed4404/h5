(()=>{"use strict";var t,e,n,i={};i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(t){window.DotNet=t;const e=[],n=new Map,i=new Map,r="__jsObjectId",s="__byte[]";class o{constructor(t){this.t=t,this.i=new Map}findFunction(t){const e=this.i.get(t);if(e)return e;let n,i=this.t;if(t.split(".").forEach((e=>{if(!(e in i))throw new Error(`Could not find '${t}' ('${e}' was undefined).`);n=i,i=i[e]})),i instanceof Function)return i=i.bind(n),this.i.set(t,i),i;throw new Error(`The value '${t}' is not a function.`)}getWrappedObject(){return this.t}}const c={},a={0:new o(window)};a[0].i.set("import",(t=>("string"==typeof t&&t.startsWith("./")&&(t=document.baseURI+t.substr(2)),import(t))));let h,u=1,l=1,f=null;function d(t){e.push(t)}function w(t){if(t&&"object"==typeof t){a[l]=new o(t);const e={[r]:l};return l++,e}throw new Error(`Cannot create a JSObjectReference from the value '${t}'.`)}function p(t){let e=-1;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Blob)e=t.size;else{if(!(t.buffer instanceof ArrayBuffer))throw new Error("Supplied value is not a typed array or blob.");if(void 0===t.byteLength)throw new Error(`Cannot create a JSStreamReference from the value '${t}' as it doesn't have a byteLength.`);e=t.byteLength}const n={o:e};try{const e=w(t);n.h=e.h}catch(e){throw new Error(`Cannot create a JSStreamReference from the value '${t}'.`)}return n}function m(t){return t?JSON.parse(t,((t,n)=>e.reduce(((e,n)=>n(t,e)),n))):null}function v(t,e,n,i){const r=y();if(r.invokeDotNetFromJS){const s=_(i),o=r.invokeDotNetFromJS(t,e,n,s);return o?m(o):null}throw new Error("The current dispatcher does not support synchronous calls from JS to .NET. Use invokeMethodAsync instead.")}function g(t,e,n,i){if(t&&n)throw new Error(`For instance method calls, assemblyName should be null. Received '${t}'.`);const r=u++,s=new Promise(((t,e)=>{c[r]={resolve:t,reject:e}}));try{const s=_(i);y().beginInvokeDotNetFromJS(r,t,e,n,s)}catch(t){b(r,!1,t)}return s}function y(){if(null!==f)return f;throw new Error("No .NET call dispatcher has been set.")}function b(t,e,n){if(!c.hasOwnProperty(t))throw new Error(`There is no pending async call with ID ${t}.`);const i=c[t];delete c[t],e?i.resolve(n):i.reject(n)}function E(t){return t instanceof Error?`${t.message}\n${t.stack}`:t?t.toString():"null"}function S(t,e){const n=a[e];if(n)return n.findFunction(t);throw new Error(`JS object instance with ID ${e} does not exist (has it been disposed?).`)}function $(t){delete a[t]}t.attachDispatcher=function(t){f=t},t.attachReviver=d,t.invokeMethod=function(t,e,...n){return v(t,e,null,n)},t.invokeMethodAsync=function(t,e,...n){return g(t,e,null,n)},t.createJSObjectReference=w,t.createJSStreamReference=p,t.disposeJSObjectReference=function(t){const e=t&&t.h;"number"==typeof e&&$(e)},function(t){t[t.Default=0]="Default",t[t.JSObjectReference=1]="JSObjectReference",t[t.JSStreamReference=2]="JSStreamReference",t[t.JSVoidResult=3]="JSVoidResult"}(h=t.JSCallResultType||(t.JSCallResultType={})),t.jsCallDispatcher={findJSFunction:S,disposeJSObjectReferenceById:$,invokeJSFromDotNet:(t,e,n,i)=>{const r=I(S(t,i).apply(null,m(e)),n);return null==r?null:_(r)},beginInvokeJSFromDotNet:(t,e,n,i,r)=>{const s=new Promise((t=>{t(S(e,r).apply(null,m(n)))}));t&&s.then((e=>_([t,!0,I(e,i)]))).then((e=>y().endInvokeJSFromDotNet(t,!0,e)),(e=>y().endInvokeJSFromDotNet(t,!1,JSON.stringify([t,!1,E(e)]))))},endInvokeDotNetFromJS:(t,e,n)=>{const i=e?m(n):new Error(n);b(parseInt(t,10),e,i)},receiveByteArray:(t,e)=>{n.set(t,e)},supplyDotNetStream:(t,e)=>{if(i.has(t)){const n=i.get(t);i.delete(t),n.resolve(e)}else{const n=new T;n.resolve(e),i.set(t,n)}}};class C{constructor(t){this.u=t}invokeMethod(t,...e){return v(null,t,this.u,e)}invokeMethodAsync(t,...e){return g(null,t,this.u,e)}dispose(){g(null,"__Dispose",this.u,null).catch((t=>console.error(t)))}serializeAsArg(){return{l:this.u}}}t.DotNetObject=C,d((function(t,e){if(e&&"object"==typeof e){if(e.hasOwnProperty("__dotNetObject"))return new C(e.l);if(e.hasOwnProperty(r)){const t=e.h,n=a[t];if(n)return n.getWrappedObject();throw new Error(`JS object instance with Id '${t}' does not exist. It may have been disposed.`)}if(e.hasOwnProperty(s)){const t=e["p"],i=n.get(t);if(void 0===i)throw new Error(`Byte array index '${t}' does not exist.`);return n.delete(t),i}if(e.hasOwnProperty("__dotNetStream"))return new k(e.m)}return e}));class k{constructor(t){if(i.has(t))this.S=i.get(t).streamPromise,i.delete(t);else{const e=new T;i.set(t,e),this.S=e.streamPromise}}stream(){return this.S}async arrayBuffer(){return new Response(await this.stream()).arrayBuffer()}}class T{constructor(){this.streamPromise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}function I(t,e){switch(e){case h.Default:return t;case h.JSObjectReference:return w(t);case h.JSStreamReference:return p(t);case h.JSVoidResult:return null;default:throw new Error(`Invalid JS call result type '${e}'.`)}}let A=0;function _(t){return A=0,JSON.stringify(t,P)}function P(t,e){if(e instanceof C)return e.serializeAsArg();if(e instanceof Uint8Array){f.sendByteArray(A,e);const t={[s]:A};return A++,t}return e}}(t||(t={})),function(t){t[t.prependFrame=1]="prependFrame",t[t.removeFrame=2]="removeFrame",t[t.setAttribute=3]="setAttribute",t[t.removeAttribute=4]="removeAttribute",t[t.updateText=5]="updateText",t[t.stepIn=6]="stepIn",t[t.stepOut=7]="stepOut",t[t.updateMarkup=8]="updateMarkup",t[t.permutationListEntry=9]="permutationListEntry",t[t.permutationListEnd=10]="permutationListEnd"}(e||(e={})),function(t){t[t.element=1]="element",t[t.text=2]="text",t[t.attribute=3]="attribute",t[t.component=4]="component",t[t.region=5]="region",t[t.elementReferenceCapture=6]="elementReferenceCapture",t[t.markup=8]="markup"}(n||(n={}));class r{constructor(t,e){this.componentId=t,this.fieldValue=e}static fromEvent(t,e){const n=e.target;if(n instanceof Element){const e=function(t){return t instanceof HTMLInputElement?t.type&&"checkbox"===t.type.toLowerCase()?{value:t.checked}:{value:t.value}:t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?{value:t.value}:null}(n);if(e)return new r(t,e.value)}return null}}const s=new Map,o=new Map,c=[];function a(t){return s.get(t)}function h(t){const e=s.get(t);return(null==e?void 0:e.browserEventName)||t}function u(t,e){t.forEach((t=>s.set(t,e)))}function l(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];e.push({identifier:i.identifier,clientX:i.clientX,clientY:i.clientY,screenX:i.screenX,screenY:i.screenY,pageX:i.pageX,pageY:i.pageY})}return e}function f(t){return{detail:t.detail,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,pageX:t.pageX,pageY:t.pageY,button:t.button,buttons:t.buttons,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,type:t.type}}u(["input","change"],{createEventArgs:function(t){const e=t.target;if(function(t){return-1!==d.indexOf(t.getAttribute("type"))}(e)){const t=function(t){const e=t.value,n=t.type;switch(n){case"date":case"month":case"week":return e;case"datetime-local":return 16===e.length?e+":00":e;case"time":return 5===e.length?e+":00":e}throw new Error(`Invalid element type '${n}'.`)}(e);return{value:t}}if(function(t){return t instanceof HTMLSelectElement&&"select-multiple"===t.type}(e)){const t=e;return{value:Array.from(t.options).filter((t=>t.selected)).map((t=>t.value))}}{const t=function(t){return!!t&&"INPUT"===t.tagName&&"checkbox"===t.getAttribute("type")}(e);return{value:t?!!e.checked:e.value}}}}),u(["copy","cut","paste"],{createEventArgs:t=>({type:t.type})}),u(["drag","dragend","dragenter","dragleave","dragover","dragstart","drop"],{createEventArgs:t=>{return{...f(e=t),dataTransfer:e.dataTransfer?{dropEffect:e.dataTransfer.dropEffect,effectAllowed:e.dataTransfer.effectAllowed,files:Array.from(e.dataTransfer.files).map((t=>t.name)),items:Array.from(e.dataTransfer.items).map((t=>({kind:t.kind,type:t.type}))),types:e.dataTransfer.types}:null};var e}}),u(["focus","blur","focusin","focusout"],{createEventArgs:t=>({type:t.type})}),u(["keydown","keyup","keypress"],{createEventArgs:t=>{return{key:(e=t).key,code:e.code,location:e.location,repeat:e.repeat,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,type:e.type};var e}}),u(["contextmenu","click","mouseover","mouseout","mousemove","mousedown","mouseup","mouseleave","mouseenter","dblclick"],{createEventArgs:t=>f(t)}),u(["error"],{createEventArgs:t=>{return{message:(e=t).message,filename:e.filename,lineno:e.lineno,colno:e.colno,type:e.type};var e}}),u(["loadstart","timeout","abort","load","loadend","progress"],{createEventArgs:t=>{return{lengthComputable:(e=t).lengthComputable,loaded:e.loaded,total:e.total,type:e.type};var e}}),u(["touchcancel","touchend","touchmove","touchenter","touchleave","touchstart"],{createEventArgs:t=>{return{detail:(e=t).detail,touches:l(e.touches),targetTouches:l(e.targetTouches),changedTouches:l(e.changedTouches),ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,type:e.type};var e}}),u(["gotpointercapture","lostpointercapture","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup"],{createEventArgs:t=>{return{...f(e=t),pointerId:e.pointerId,width:e.width,height:e.height,pressure:e.pressure,tiltX:e.tiltX,tiltY:e.tiltY,pointerType:e.pointerType,isPrimary:e.isPrimary};var e}}),u(["wheel","mousewheel"],{createEventArgs:t=>{return{...f(e=t),deltaX:e.deltaX,deltaY:e.deltaY,deltaZ:e.deltaZ,deltaMode:e.deltaMode};var e}}),u(["toggle"],{createEventArgs:()=>({})});const d=["date","datetime-local","month","time","week"],w=new Map;let p,m,v=0;const g={async add(t,e,n){if(!n)throw new Error("initialParameters must be an object, even if empty.");const i="__bl-dynamic-root:"+(++v).toString();w.set(i,t);const r=await E().invokeMethodAsync("AddRootComponent",e,i),s=new b(r,m[e]);return await s.setParameters(n),s}};class y{invoke(t){return this.$(t)}setCallback(e){this.C||(this.C=t.createJSObjectReference(this)),this.$=e}getJSObjectReference(){return this.C}dispose(){this.C&&t.disposeJSObjectReference(this.C)}}class b{constructor(t,e){this.k=new Map,this.T=t;for(const t of e)"eventcallback"===t.type&&this.k.set(t.name.toLowerCase(),new y)}setParameters(t){const e={},n=Object.entries(t||{}),i=n.length;for(const[t,i]of n){const n=this.k.get(t.toLowerCase());n&&i?(n.setCallback(i),e[t]=n.getJSObjectReference()):e[t]=i}return E().invokeMethodAsync("SetRootComponentParameters",this.T,i,e)}async dispose(){if(null!==this.T){await E().invokeMethodAsync("RemoveRootComponent",this.T),this.T=null;for(const t of this.k.values())t.dispose()}}}function E(){if(!p)throw new Error("Dynamic root components have not been enabled in this application.");return p}const S=new Map;let $;const C=new Promise((t=>{$=t}));function k(t,e,n){return I(t,e.eventHandlerId,(()=>T(t).invokeMethodAsync("DispatchEventAsync",e,n)))}function T(t){const e=S.get(t);if(!e)throw new Error(`No interop methods are registered for renderer ${t}`);return e}let I=(t,e,n)=>n();const A=M(["abort","blur","canplay","canplaythrough","change","cuechange","durationchange","emptied","ended","error","focus","load","loadeddata","loadedmetadata","loadend","loadstart","mouseenter","mouseleave","pause","play","playing","progress","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","toggle","unload","volumechange","waiting","DOMNodeInsertedIntoDocument","DOMNodeRemovedFromDocument"]),_={submit:!0},P=M(["click","dblclick","mousedown","mousemove","mouseup"]);class x{constructor(t){this.browserRendererId=t,this.afterClickCallbacks=[];const e=++x.nextEventDelegatorId;this.eventsCollectionKey=`_blazorEvents_${e}`,this.eventInfoStore=new D(this.onGlobalEvent.bind(this))}setListener(t,e,n,i){const r=this.getEventHandlerInfosForElement(t,!0),s=r.getHandler(e);if(s)this.eventInfoStore.update(s.eventHandlerId,n);else{const s={element:t,eventName:e,eventHandlerId:n,renderingComponentId:i};this.eventInfoStore.add(s),r.setHandler(e,s)}}getHandler(t){return this.eventInfoStore.get(t)}removeListener(t){const e=this.eventInfoStore.remove(t);if(e){const t=e.element,n=this.getEventHandlerInfosForElement(t,!1);n&&n.removeHandler(e.eventName)}}notifyAfterClick(t){this.afterClickCallbacks.push(t),this.eventInfoStore.addGlobalListener("click")}setStopPropagation(t,e,n){this.getEventHandlerInfosForElement(t,!0).stopPropagation(e,n)}setPreventDefault(t,e,n){this.getEventHandlerInfosForElement(t,!0).preventDefault(e,n)}onGlobalEvent(t){if(!(t.target instanceof Element))return;this.dispatchGlobalEventToAllElements(t.type,t);const e=(n=t.type,o.get(n));var n;e&&e.forEach((e=>this.dispatchGlobalEventToAllElements(e,t))),"click"===t.type&&this.afterClickCallbacks.forEach((e=>e(t)))}dispatchGlobalEventToAllElements(t,e){const n=e.composedPath();let i=n.shift(),s=null,o=!1;const c=Object.prototype.hasOwnProperty.call(A,t);let h=!1;for(;i;){const f=i,d=this.getEventHandlerInfosForElement(f,!1);if(d){const n=d.getHandler(t);if(n&&(u=f,l=e.type,!((u instanceof HTMLButtonElement||u instanceof HTMLInputElement||u instanceof HTMLTextAreaElement||u instanceof HTMLSelectElement)&&Object.prototype.hasOwnProperty.call(P,l)&&u.disabled))){if(!o){const n=a(t);s=(null==n?void 0:n.createEventArgs)?n.createEventArgs(e):{},o=!0}Object.prototype.hasOwnProperty.call(_,e.type)&&e.preventDefault(),k(this.browserRendererId,{eventHandlerId:n.eventHandlerId,eventName:t,eventFieldInfo:r.fromEvent(n.renderingComponentId,e)},s)}d.stopPropagation(t)&&(h=!0),d.preventDefault(t)&&e.preventDefault()}i=c||h?void 0:n.shift()}var u,l}getEventHandlerInfosForElement(t,e){return Object.prototype.hasOwnProperty.call(t,this.eventsCollectionKey)?t[this.eventsCollectionKey]:e?t[this.eventsCollectionKey]=new N:null}}x.nextEventDelegatorId=0;class D{constructor(t){this.globalListener=t,this.infosByEventHandlerId={},this.countByEventName={},c.push(this.handleEventNameAliasAdded.bind(this))}add(t){if(this.infosByEventHandlerId[t.eventHandlerId])throw new Error(`Event ${t.eventHandlerId} is already tracked`);this.infosByEventHandlerId[t.eventHandlerId]=t,this.addGlobalListener(t.eventName)}get(t){return this.infosByEventHandlerId[t]}addGlobalListener(t){if(t=h(t),Object.prototype.hasOwnProperty.call(this.countByEventName,t))this.countByEventName[t]++;else{this.countByEventName[t]=1;const e=Object.prototype.hasOwnProperty.call(A,t);document.addEventListener(t,this.globalListener,e)}}update(t,e){if(Object.prototype.hasOwnProperty.call(this.infosByEventHandlerId,e))throw new Error(`Event ${e} is already tracked`);const n=this.infosByEventHandlerId[t];delete this.infosByEventHandlerId[t],n.eventHandlerId=e,this.infosByEventHandlerId[e]=n}remove(t){const e=this.infosByEventHandlerId[t];if(e){delete this.infosByEventHandlerId[t];const n=h(e.eventName);0==--this.countByEventName[n]&&(delete this.countByEventName[n],document.removeEventListener(n,this.globalListener))}return e}handleEventNameAliasAdded(t,e){if(Object.prototype.hasOwnProperty.call(this.countByEventName,t)){const n=this.countByEventName[t];delete this.countByEventName[t],document.removeEventListener(t,this.globalListener),this.addGlobalListener(e),this.countByEventName[e]+=n-1}}}class N{constructor(){this.handlers={},this.preventDefaultFlags=null,this.stopPropagationFlags=null}getHandler(t){return Object.prototype.hasOwnProperty.call(this.handlers,t)?this.handlers[t]:null}setHandler(t,e){this.handlers[t]=e}removeHandler(t){delete this.handlers[t]}preventDefault(t,e){return void 0!==e&&(this.preventDefaultFlags=this.preventDefaultFlags||{},this.preventDefaultFlags[t]=e),!!this.preventDefaultFlags&&this.preventDefaultFlags[t]}stopPropagation(t,e){return void 0!==e&&(this.stopPropagationFlags=this.stopPropagationFlags||{},this.stopPropagationFlags[t]=e),!!this.stopPropagationFlags&&this.stopPropagationFlags[t]}}function M(t){const e={};return t.forEach((t=>{e[t]=!0})),e}const R=Y("_blazorLogicalChildren"),U=Y("_blazorLogicalParent"),H=Y("_blazorLogicalEnd");function L(t,e){if(t.childNodes.length>0&&!e)throw new Error("New logical elements must start empty, or allowExistingContents must be true");return R in t||(t[R]=[]),t}function O(t,e){const n=document.createComment("!");return j(n,t,e),n}function j(t,e,n){const i=t;if(t instanceof Comment&&W(i)&&W(i).length>0)throw new Error("Not implemented: inserting non-empty logical container");if(F(i))throw new Error("Not implemented: moving existing logical children");const r=W(e);if(n<r.length){const e=r[n];e.parentNode.insertBefore(t,e),r.splice(n,0,i)}else K(t,e),r.push(i);i[U]=e,R in i||(i[R]=[])}function B(t,e){const n=W(t).splice(e,1)[0];if(n instanceof Comment){const t=W(n);if(t)for(;t.length>0;)B(n,0)}const i=n;i.parentNode.removeChild(i)}function F(t){return t[U]||null}function J(t,e){return W(t)[e]}function z(t){const e=V(t);return"http://www.w3.org/2000/svg"===e.namespaceURI&&"foreignObject"!==e.tagName}function W(t){return t[R]}function q(t,e){const n=W(t);e.forEach((t=>{t.moveRangeStart=n[t.fromSiblingIndex],t.moveRangeEnd=G(t.moveRangeStart)})),e.forEach((e=>{const i=document.createComment("marker");e.moveToBeforeMarker=i;const r=n[e.toSiblingIndex+1];r?r.parentNode.insertBefore(i,r):K(i,t)})),e.forEach((t=>{const e=t.moveToBeforeMarker,n=e.parentNode,i=t.moveRangeStart,r=t.moveRangeEnd;let s=i;for(;s;){const t=s.nextSibling;if(n.insertBefore(s,e),s===r)break;s=t}n.removeChild(e)})),e.forEach((t=>{n[t.toSiblingIndex]=t.moveRangeStart}))}function V(t){if(t instanceof Element||t instanceof DocumentFragment)return t;if(t instanceof Comment)return t.parentNode;throw new Error("Not a valid logical element")}function X(t){const e=W(F(t));return e[Array.prototype.indexOf.call(e,t)+1]||null}function K(t,e){if(e instanceof Element||e instanceof DocumentFragment)e.appendChild(t);else{if(!(e instanceof Comment))throw new Error(`Cannot append node because the parent is not a valid logical element. Parent: ${e}`);{const n=X(e);n?n.parentNode.insertBefore(t,n):K(t,F(e))}}}function G(t){if(t instanceof Element||t instanceof DocumentFragment)return t;const e=X(t);if(e)return e.previousSibling;{const e=F(t);return e instanceof Element||e instanceof DocumentFragment?e.lastChild:G(e)}}function Y(t){return"function"==typeof Symbol?Symbol():t}function Z(t){return`_bl_${t}`}t.attachReviver(((t,e)=>e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"__internalId")&&"string"==typeof e.I?function(t){const e=`[${Z(t)}]`;return document.querySelector(e)}(e.I):e));const Q="_blazorDeferredValue",tt=document.createElement("template"),et=document.createElementNS("http://www.w3.org/2000/svg","g"),nt={},it="__internal_",rt="preventDefault_",st="stopPropagation_";class ot{constructor(t){this.rootComponentIds=new Set,this.childComponentLocations={},this.eventDelegator=new x(t),this.eventDelegator.notifyAfterClick((t=>{if(!wt)return;if(0!==t.button||function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey}(t))return;if(t.defaultPrevented)return;const e=function(t){const e=!window._blazorDisableComposedPath&&t.composedPath&&t.composedPath();if(e){for(let t=0;t<e.length;t++){const n=e[t];if(n instanceof Element&&"A"===n.tagName)return n}return null}return $t(t.target,"A")}(t);if(e&&function(t){const e=t.getAttribute("target");return(!e||"_self"===e)&&t.hasAttribute("href")&&!t.hasAttribute("download")}(e)){const n=St(e.getAttribute("href"));Ct(n)&&(t.preventDefault(),yt(n,!0,!1))}}))}attachRootComponentToLogicalElement(t,e,n){this.attachComponentToElement(t,e),this.rootComponentIds.add(t),n||(nt[t]=e)}updateComponent(t,e,n,i){var r;const s=this.childComponentLocations[e];if(!s)throw new Error(`No element is currently associated with component ${e}`);const o=nt[e];if(o){const t=function(t){return t[H]||null}(o);delete nt[e],t?function(t,e){const n=F(t);if(!n)throw new Error("Can't clear between nodes. The start node does not have a logical parent.");const i=W(n),r=i.indexOf(t)+1,s=i.indexOf(e);for(let t=r;t<=s;t++)B(n,r);t.textContent="!"}(o,t):function(t){let e;for(;e=t.firstChild;)t.removeChild(e)}(o)}const c=null===(r=V(s))||void 0===r?void 0:r.getRootNode(),a=c&&c.activeElement;this.applyEdits(t,e,s,0,n,i),a instanceof HTMLElement&&c&&c.activeElement!==a&&a.focus()}disposeComponent(t){this.rootComponentIds.delete(t)&&function(t){const e=W(t);for(;e.length;)B(t,0)}(this.childComponentLocations[t]),delete this.childComponentLocations[t]}disposeEventHandler(t){this.eventDelegator.removeListener(t)}attachComponentToElement(t,e){this.childComponentLocations[t]=e}applyEdits(t,n,i,r,s,o){let c,a=0,h=r;const u=t.arrayBuilderSegmentReader,l=t.editReader,f=t.frameReader,d=u.values(s),w=u.offset(s),p=w+u.count(s);for(let s=w;s<p;s++){const u=t.diffReader.editsEntry(d,s),w=l.editType(u);switch(w){case e.prependFrame:{const e=l.newTreeIndex(u),r=t.referenceFramesEntry(o,e),s=l.siblingIndex(u);this.insertFrame(t,n,i,h+s,o,r,e);break}case e.removeFrame:B(i,h+l.siblingIndex(u));break;case e.setAttribute:{const e=l.newTreeIndex(u),r=t.referenceFramesEntry(o,e),s=J(i,h+l.siblingIndex(u));if(!(s instanceof Element))throw new Error("Cannot set attribute on non-element child");this.applyAttribute(t,n,s,r);break}case e.removeAttribute:{const e=J(i,h+l.siblingIndex(u));if(!(e instanceof HTMLElement))throw new Error("Cannot remove attribute from non-element child");{const n=l.removedAttributeName(u);this.tryApplySpecialProperty(t,e,n,null)||e.removeAttribute(n)}break}case e.updateText:{const e=l.newTreeIndex(u),n=t.referenceFramesEntry(o,e),r=J(i,h+l.siblingIndex(u));if(!(r instanceof Text))throw new Error("Cannot set text content on non-text child");r.textContent=f.textContent(n);break}case e.updateMarkup:{const e=l.newTreeIndex(u),n=t.referenceFramesEntry(o,e),r=l.siblingIndex(u);B(i,h+r),this.insertMarkup(t,i,h+r,n);break}case e.stepIn:i=J(i,h+l.siblingIndex(u)),a++,h=0;break;case e.stepOut:i=F(i),a--,h=0===a?r:0;break;case e.permutationListEntry:c=c||[],c.push({fromSiblingIndex:h+l.siblingIndex(u),toSiblingIndex:h+l.moveToSiblingIndex(u)});break;case e.permutationListEnd:q(i,c),c=void 0;break;default:throw new Error(`Unknown edit type: ${w}`)}}}insertFrame(t,e,i,r,s,o,c){const a=t.frameReader,h=a.frameType(o);switch(h){case n.element:return this.insertElement(t,e,i,r,s,o,c),1;case n.text:return this.insertText(t,i,r,o),1;case n.attribute:throw new Error("Attribute frames should only be present as leading children of element frames.");case n.component:return this.insertComponent(t,i,r,o),1;case n.region:return this.insertFrameRange(t,e,i,r,s,c+1,c+a.subtreeLength(o));case n.elementReferenceCapture:if(i instanceof Element)return u=i,l=a.elementReferenceCaptureId(o),u.setAttribute(Z(l),""),0;throw new Error("Reference capture frames can only be children of element frames.");case n.markup:return this.insertMarkup(t,i,r,o),1;default:throw new Error(`Unknown frame type: ${h}`)}var u,l}insertElement(t,e,i,r,s,o,c){const a=t.frameReader,h=a.elementName(o),u="svg"===h||z(i)?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h),l=L(u);let f=!1;const d=c+a.subtreeLength(o);for(let o=c+1;o<d;o++){const c=t.referenceFramesEntry(s,o);if(a.frameType(c)!==n.attribute){j(u,i,r),f=!0,this.insertFrameRange(t,e,l,0,s,o,d);break}this.applyAttribute(t,e,u,c)}f||j(u,i,r),u instanceof HTMLOptionElement?this.trySetSelectValueFromOptionElement(u):Q in u&&lt(u,u.A)}trySetSelectValueFromOptionElement(t){const e=this.findClosestAncestorSelectElement(t);if(!function(t){return!!t&&Q in t}(e))return!1;if(ht(e))t.selected=-1!==e.A.indexOf(t.value);else{if(e.A!==t.value)return!1;ut(e,t.value),delete e.A}return!0}insertComponent(t,e,n,i){const r=O(e,n),s=t.frameReader.componentId(i);this.attachComponentToElement(s,r)}insertText(t,e,n,i){const r=t.frameReader.textContent(i);j(document.createTextNode(r),e,n)}insertMarkup(t,e,n,i){const r=O(e,n),s=(o=t.frameReader.markupContent(i),z(e)?(et.innerHTML=o||" ",et):(tt.innerHTML=o||" ",tt.content));var o;let c=0;for(;s.firstChild;)j(s.firstChild,r,c++)}applyAttribute(t,e,n,i){const r=t.frameReader,s=r.attributeName(i),o=r.attributeEventHandlerId(i);if(o){const t=at(s);this.eventDelegator.setListener(n,t,o,e)}else this.tryApplySpecialProperty(t,n,s,i)||n.setAttribute(s,r.attributeValue(i))}tryApplySpecialProperty(t,e,n,i){switch(n){case"value":return this.tryApplyValueProperty(t,e,i);case"checked":return this.tryApplyCheckedProperty(t,e,i);default:return!!n.startsWith(it)&&(this.applyInternalAttribute(t,e,n.substring(it.length),i),!0)}}applyInternalAttribute(t,e,n,i){const r=i?t.frameReader.attributeValue(i):null;if(n.startsWith(st)){const t=at(n.substring(st.length));this.eventDelegator.setStopPropagation(e,t,null!==r)}else{if(!n.startsWith(rt))throw new Error(`Unsupported internal attribute '${n}'`);{const t=at(n.substring(rt.length));this.eventDelegator.setPreventDefault(e,t,null!==r)}}}tryApplyValueProperty(t,e,n){const i=t.frameReader;let r=n?i.attributeValue(n):null;switch(r&&"INPUT"===e.tagName&&(r=function(t,e){switch(e.getAttribute("type")){case"time":return 8!==t.length||!t.endsWith("00")&&e.hasAttribute("step")?t:t.substring(0,5);case"datetime-local":return 19!==t.length||!t.endsWith("00")&&e.hasAttribute("step")?t:t.substring(0,16);default:return t}}(r,e)),e.tagName){case"INPUT":case"SELECT":case"TEXTAREA":return r&&e instanceof HTMLSelectElement&&ht(e)&&(r=JSON.parse(r)),lt(e,r),e.A=r,!0;case"OPTION":return r||""===r?e.setAttribute("value",r):e.removeAttribute("value"),this.trySetSelectValueFromOptionElement(e),!0;default:return!1}}tryApplyCheckedProperty(t,e,n){if("INPUT"===e.tagName){const i=n?t.frameReader.attributeValue(n):null;return e.checked=null!==i,!0}return!1}findClosestAncestorSelectElement(t){for(;t;){if(t instanceof HTMLSelectElement)return t;t=t.parentElement}return null}insertFrameRange(t,e,n,i,r,s,o){const c=i;for(let c=s;c<o;c++){const s=t.referenceFramesEntry(r,c);i+=this.insertFrame(t,e,n,i,r,s,c),c+=ct(t,s)}return i-c}}function ct(t,e){const i=t.frameReader;switch(i.frameType(e)){case n.component:case n.element:case n.region:return i.subtreeLength(e)-1;default:return 0}}function at(t){if(t.startsWith("on"))return t.substring(2);throw new Error(`Attribute should be an event name, but doesn't start with 'on'. Value: '${t}'`)}function ht(t){return"select-multiple"===t.type}function ut(t,e){t.value=e||""}function lt(t,e){t instanceof HTMLSelectElement?ht(t)?function(t,e){e||(e=[]);for(let n=0;n<t.options.length;n++)t.options[n].selected=-1!==e.indexOf(t.options[n].value)}(t,e):ut(t,e):t.value=e}const ft={};let dt=!1,wt=!1,pt=!1,mt=null;const vt={listenForNavigationEvents:function(t){mt=t,pt||(pt=!0,window.addEventListener("popstate",(()=>bt(!1))))},enableNavigationInterception:function(){wt=!0},navigateTo:gt,getBaseURI:()=>document.baseURI,getLocationHref:()=>location.href};function gt(t,e,n=!1){const i=St(t),r=e instanceof Object?e:{forceLoad:e,replaceHistoryEntry:n};!r.forceLoad&&Ct(i)?yt(i,!1,r.replaceHistoryEntry):function(t,e){if(location.href===t){const e=t+"?";history.replaceState(null,"",e),location.replace(t)}else e?location.replace(t):location.href=t}(t,r.replaceHistoryEntry)}function yt(t,e,n){dt=!0,n?history.replaceState(null,"",t):history.pushState(null,"",t),bt(e)}async function bt(t){mt&&await mt(location.href,t)}let Et;function St(t){return Et=Et||document.createElement("a"),Et.href=t,Et.href}function $t(t,e){return t?t.tagName===e?t:$t(t.parentElement,e):null}function Ct(t){const e=(n=document.baseURI).substring(0,n.lastIndexOf("/"));var n;const i=t.charAt(e.length);return t.startsWith(e)&&(""===i||"/"===i||"?"===i||"#"===i)}const kt={focus:function(t,e){if(t instanceof HTMLElement)t.focus({preventScroll:e});else{if(!(t instanceof SVGElement))throw new Error("Unable to focus an invalid element.");if(!t.hasAttribute("tabindex"))throw new Error("Unable to focus an SVG element that does not have a tabindex.");t.focus({preventScroll:e})}},focusBySelector:function(t){const e=document.querySelector(t);e&&(e.hasAttribute("tabindex")||(e.tabIndex=-1),e.focus())}},Tt={init:function(t,e,n,i=50){const r=At(e);(r||document.documentElement).style.overflowAnchor="none";const s=document.createRange();u(n.parentElement)&&(e.style.display="table-row",n.style.display="table-row");const o=new IntersectionObserver((function(i){i.forEach((i=>{var r;if(!i.isIntersecting)return;s.setStartAfter(e),s.setEndBefore(n);const o=s.getBoundingClientRect().height,c=null===(r=i.rootBounds)||void 0===r?void 0:r.height;i.target===e?t.invokeMethodAsync("OnSpacerBeforeVisible",i.intersectionRect.top-i.boundingClientRect.top,o,c):i.target===n&&n.offsetHeight>0&&t.invokeMethodAsync("OnSpacerAfterVisible",i.boundingClientRect.bottom-i.intersectionRect.bottom,o,c)}))}),{root:r,rootMargin:`${i}px`});o.observe(e),o.observe(n);const c=h(e),a=h(n);function h(t){const e={attributes:!0},n=new MutationObserver(((n,i)=>{u(t.parentElement)&&(i.disconnect(),t.style.display="table-row",i.observe(t,e)),o.unobserve(t),o.observe(t)}));return n.observe(t,e),n}function u(t){return null!==t&&(t instanceof HTMLTableElement&&""===t.style.display||"table"===t.style.display||t instanceof HTMLTableSectionElement&&""===t.style.display||"table-row-group"===t.style.display)}It[t.u]={intersectionObserver:o,mutationObserverBefore:c,mutationObserverAfter:a}},dispose:function(t){const e=It[t.u];e&&(e.intersectionObserver.disconnect(),e.mutationObserverBefore.disconnect(),e.mutationObserverAfter.disconnect(),t.dispose(),delete It[t.u])}},It={};function At(t){return t?"visible"!==getComputedStyle(t).overflowY?t:At(t.parentElement):null}const _t={getAndRemoveExistingTitle:function(){var t;const e=document.head?document.head.getElementsByTagName("title"):[];if(0===e.length)return null;let n=null;for(let i=e.length-1;i>=0;i--){const r=e[i],s=r.previousSibling;s instanceof Comment&&null!==F(s)||(null===n&&(n=r.textContent),null===(t=r.parentNode)||void 0===t||t.removeChild(r))}return n}},Pt={init:function(t,e){e._=0,e.addEventListener("click",(function(){e.value=""})),e.addEventListener("change",(function(){e.P={};const n=Array.prototype.map.call(e.files,(function(t){const n={id:++e._,lastModified:new Date(t.lastModified).toISOString(),name:t.name,size:t.size,contentType:t.type,readPromise:void 0,arrayBuffer:void 0,blob:t};return e.P[n.id]=n,n}));t.invokeMethodAsync("NotifyChange",n)}))},toImageFile:async function(t,e,n,i,r){const s=xt(t,e),o=await new Promise((function(t){const e=new Image;e.onload=function(){URL.revokeObjectURL(e.src),t(e)},e.onerror=function(){e.onerror=null,URL.revokeObjectURL(e.src)},e.src=URL.createObjectURL(s.blob)})),c=await new Promise((function(t){var e;const s=Math.min(1,i/o.width),c=Math.min(1,r/o.height),a=Math.min(s,c),h=document.createElement("canvas");h.width=Math.round(o.width*a),h.height=Math.round(o.height*a),null===(e=h.getContext("2d"))||void 0===e||e.drawImage(o,0,0,h.width,h.height),h.toBlob(t,n)})),a={id:++t._,lastModified:s.lastModified,name:s.name,size:(null==c?void 0:c.size)||0,contentType:n,blob:c||s.blob};return t.P[a.id]=a,a},readFileData:async function(t,e){return xt(t,e).blob}};function xt(t,e){const n=t.P[e];if(!n)throw new Error(`There is no file with ID ${e}. The file list may have changed. See https://aka.ms/aspnet/blazor-input-file-multiple-selections.`);return n}async function Dt(t,e,n){return t instanceof Blob?await async function(t,e,n){const i=t.slice(e,e+n),r=await i.arrayBuffer();return new Uint8Array(r)}(t,e,n):function(t,e,n){return new Uint8Array(t.buffer,t.byteOffset+e,n)}(t,e,n)}const Nt=new Map,Mt={navigateTo:gt,registerCustomEventType:function(t,e){if(!e)throw new Error("The options parameter is required.");if(s.has(t))throw new Error(`The event '${t}' is already registered.`);if(e.browserEventName){const n=o.get(e.browserEventName);n?n.push(t):o.set(e.browserEventName,[t]),c.forEach((n=>n(t,e.browserEventName)))}s.set(t,e)},rootComponents:g,D:{navigationManager:vt,domWrapper:kt,Virtualize:Tt,PageTitle:_t,InputFile:Pt,getJSDataStreamChunk:Dt,receiveDotNetDataStream:function(e,n,i,r){let s=Nt.get(e);if(!s){const n=new ReadableStream({start(t){Nt.set(e,t),s=t}});t.jsCallDispatcher.supplyDotNetStream(e,n)}r?(s.error(r),Nt.delete(e)):0===i?(s.close(),Nt.delete(e)):s.enqueue(n.length===i?n:n.subarray(0,i))},attachWebRendererInterop:function(e,n,i,r){if(S.has(e))throw new Error(`Interop methods are already registered for renderer ${e}`);S.set(e,n),Object.keys(i).length>0&&function(e,n,i){if(p)throw new Error("Dynamic root components have already been enabled.");p=e,m=n;for(const[e,r]of Object.entries(i)){const i=t.jsCallDispatcher.findJSFunction(e,0);for(const t of r)i(t,n[t])}}(T(e),i,r),$()}}};window.Blazor=Mt;const Rt=[0,2e3,1e4,3e4,null];class Ut{constructor(t){this.N=void 0!==t?[...t,null]:Rt}nextRetryDelayInMilliseconds(t){return this.N[t.previousRetryCount]}}class Ht extends Error{constructor(t,e){const n=new.target.prototype;super(`${t}: Status code '${e}'`),this.statusCode=e,this.__proto__=n}}class Lt extends Error{constructor(t="A timeout occurred."){const e=new.target.prototype;super(t),this.__proto__=e}}class Ot extends Error{constructor(t="An abort occurred."){const e=new.target.prototype;super(t),this.__proto__=e}}class jt extends Error{constructor(t,e){const n=new.target.prototype;super(t),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=n}}class Bt extends Error{constructor(t,e){const n=new.target.prototype;super(t),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=n}}class Ft extends Error{constructor(t,e){const n=new.target.prototype;super(t),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=n}}class Jt extends Error{constructor(t){const e=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}}class zt extends Error{constructor(t,e){const n=new.target.prototype;super(t),this.innerErrors=e,this.__proto__=n}}class Wt{constructor(t,e,n){this.statusCode=t,this.statusText=e,this.content=n}}class qt{get(t,e){return this.send({...e,method:"GET",url:t})}post(t,e){return this.send({...e,method:"POST",url:t})}delete(t,e){return this.send({...e,method:"DELETE",url:t})}getCookieString(t){return""}}var Vt,Xt,Kt,Gt,Yt;!function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(Vt||(Vt={}));class Zt{constructor(){}log(t,e){}}Zt.instance=new Zt;class Qt{static isRequired(t,e){if(null==t)throw new Error(`The '${e}' argument is required.`)}static isNotEmpty(t,e){if(!t||t.match(/^\s*$/))throw new Error(`The '${e}' argument should not be empty.`)}static isIn(t,e,n){if(!(t in e))throw new Error(`Unknown ${n} value: ${t}.`)}}class te{static get isBrowser(){return"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return"object"==typeof self&&"importScripts"in self}static get isReactNative(){return"object"==typeof window&&void 0===window.document}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function ee(t,e){let n="";return ne(t)?(n=`Binary data of length ${t.byteLength}`,e&&(n+=`. Content: '${function(t){const e=new Uint8Array(t);let n="";return e.forEach((t=>{n+=`0x${t<16?"0":""}${t.toString(16)} `})),n.substr(0,n.length-1)}(t)}'`)):"string"==typeof t&&(n=`String data of length ${t.length}`,e&&(n+=`. Content: '${t}'`)),n}function ne(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}async function ie(t,e,n,i,r,s,o){let c={};if(r){const t=await r();t&&(c={Authorization:`Bearer ${t}`})}const[a,h]=oe();c[a]=h,t.log(Vt.Trace,`(${e} transport) sending data. ${ee(s,o.logMessageContent)}.`);const u=ne(s)?"arraybuffer":"text",l=await n.post(i,{content:s,headers:{...c,...o.headers},responseType:u,timeout:o.timeout,withCredentials:o.withCredentials});t.log(Vt.Trace,`(${e} transport) request complete. Response status: ${l.statusCode}.`)}class re{constructor(t,e){this.M=t,this.R=e}dispose(){const t=this.M.observers.indexOf(this.R);t>-1&&this.M.observers.splice(t,1),0===this.M.observers.length&&this.M.cancelCallback&&this.M.cancelCallback().catch((t=>{}))}}class se{constructor(t){this.U=t,this.out=console}log(t,e){if(t>=this.U){const n=`[${(new Date).toISOString()}] ${Vt[t]}: ${e}`;switch(t){case Vt.Critical:case Vt.Error:this.out.error(n);break;case Vt.Warning:this.out.warn(n);break;case Vt.Information:this.out.info(n);break;default:this.out.log(n)}}}}function oe(){let t="X-SignalR-User-Agent";return te.isNode&&(t="User-Agent"),[t,ce("0.0.0-DEV_BUILD",ae(),te.isNode?"NodeJS":"Browser",he())]}function ce(t,e,n,i){let r="Microsoft SignalR/";const s=t.split(".");return r+=`${s[0]}.${s[1]}`,r+=` (${t}; `,r+=e&&""!==e?`${e}; `:"Unknown OS; ",r+=`${n}`,r+=i?`; ${i}`:"; Unknown Runtime Version",r+=")",r}function ae(){if(!te.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function he(){if(te.isNode)return process.versions.node}function ue(t){return t.stack?t.stack:t.message?t.message:`${t}`}class le extends qt{constructor(t){if(super(),this.H=t,"undefined"==typeof fetch){const t=require;this.L=new(t("tough-cookie").CookieJar),this.O=t("node-fetch"),this.O=t("fetch-cookie")(this.O,this.L)}else this.O=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("could not find global")}());if("undefined"==typeof AbortController){const t=require;this.j=t("abort-controller")}else this.j=AbortController}async send(t){if(t.abortSignal&&t.abortSignal.aborted)throw new Ot;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const e=new this.j;let n;t.abortSignal&&(t.abortSignal.onabort=()=>{e.abort(),n=new Ot});let i,r=null;if(t.timeout){const i=t.timeout;r=setTimeout((()=>{e.abort(),this.H.log(Vt.Warning,"Timeout from HTTP request."),n=new Lt}),i)}""===t.content&&(t.content=void 0),t.content&&(t.headers=t.headers||{},ne(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");try{i=await this.O(t.url,{body:t.content,cache:"no-cache",credentials:!0===t.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...t.headers},method:t.method,mode:"cors",redirect:"follow",signal:e.signal})}catch(t){if(n)throw n;throw this.H.log(Vt.Warning,`Error from HTTP request. ${t}.`),t}finally{r&&clearTimeout(r),t.abortSignal&&(t.abortSignal.onabort=null)}if(!i.ok){const t=await fe(i,"text");throw new Ht(t||i.statusText,i.status)}const s=fe(i,t.responseType),o=await s;return new Wt(i.status,i.statusText,o)}getCookieString(t){return""}}function fe(t,e){let n;switch(e){case"arraybuffer":n=t.arrayBuffer();break;case"text":default:n=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`)}return n}class de extends qt{constructor(t){super(),this.H=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new Ot):t.method?t.url?new Promise(((e,n)=>{const i=new XMLHttpRequest;i.open(t.method,t.url,!0),i.withCredentials=void 0===t.withCredentials||t.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===t.content&&(t.content=void 0),t.content&&(ne(t.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const r=t.headers;r&&Object.keys(r).forEach((t=>{i.setRequestHeader(t,r[t])})),t.responseType&&(i.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{i.abort(),n(new Ot)}),t.timeout&&(i.timeout=t.timeout),i.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),i.status>=200&&i.status<300?e(new Wt(i.status,i.statusText,i.response||i.responseText)):n(new Ht(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this.H.log(Vt.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),n(new Ht(i.statusText,i.status))},i.ontimeout=()=>{this.H.log(Vt.Warning,"Timeout from HTTP request."),n(new Lt)},i.send(t.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class we extends qt{constructor(t){if(super(),"undefined"!=typeof fetch)this.B=new le(t);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this.B=new de(t)}}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new Ot):t.method?t.url?this.B.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this.B.getCookieString(t)}}class pe{}pe.Authorization="Authorization",pe.Cookie="Cookie",function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"}(Xt||(Xt={})),function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"}(Kt||(Kt={}));class me{constructor(){this.F=!1,this.onabort=null}abort(){this.F||(this.F=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this.F}}class ve{constructor(t,e,n,i){this.B=t,this.J=e,this.H=n,this.W=new me,this.q=i,this.V=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this.W.aborted}async connect(t,e){if(Qt.isRequired(t,"url"),Qt.isRequired(e,"transferFormat"),Qt.isIn(e,Kt,"transferFormat"),this.X=t,this.H.log(Vt.Trace,"(LongPolling transport) Connecting."),e===Kt.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,i]=oe(),r={[n]:i,...this.q.headers},s={abortSignal:this.W.signal,headers:r,timeout:1e5,withCredentials:this.q.withCredentials};e===Kt.Binary&&(s.responseType="arraybuffer"),await this.K(s);const o=`${t}&_=${Date.now()}`;this.H.log(Vt.Trace,`(LongPolling transport) polling: ${o}.`);const c=await this.B.get(o,s);200!==c.statusCode?(this.H.log(Vt.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this.G=new Ht(c.statusText||"",c.statusCode),this.V=!1):this.V=!0,this.Y=this.Z(this.X,s)}async K(t){if(t.headers||(t.headers={}),this.J){const e=await this.J();e?t.headers[pe.Authorization]=`Bearer ${e}`:t.headers[pe.Authorization]&&delete t.headers[pe.Authorization]}}async Z(t,e){try{for(;this.V;){await this.K(e);try{const n=`${t}&_=${Date.now()}`;this.H.log(Vt.Trace,`(LongPolling transport) polling: ${n}.`);const i=await this.B.get(n,e);204===i.statusCode?(this.H.log(Vt.Information,"(LongPolling transport) Poll terminated by server."),this.V=!1):200!==i.statusCode?(this.H.log(Vt.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),this.G=new Ht(i.statusText||"",i.statusCode),this.V=!1):i.content?(this.H.log(Vt.Trace,`(LongPolling transport) data received. ${ee(i.content,this.q.logMessageContent)}.`),this.onreceive&&this.onreceive(i.content)):this.H.log(Vt.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this.V?t instanceof Lt?this.H.log(Vt.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.G=t,this.V=!1):this.H.log(Vt.Trace,`(LongPolling transport) Poll errored after shutdown: ${t.message}`)}}}finally{this.H.log(Vt.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.tt()}}async send(t){return this.V?ie(this.H,"LongPolling",this.B,this.X,this.J,t,this.q):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this.H.log(Vt.Trace,"(LongPolling transport) Stopping polling."),this.V=!1,this.W.abort();try{await this.Y,this.H.log(Vt.Trace,`(LongPolling transport) sending DELETE request to ${this.X}.`);const t={},[e,n]=oe();t[e]=n;const i={headers:{...t,...this.q.headers},timeout:this.q.timeout,withCredentials:this.q.withCredentials};await this.K(i),await this.B.delete(this.X,i),this.H.log(Vt.Trace,"(LongPolling transport) DELETE request sent.")}finally{this.H.log(Vt.Trace,"(LongPolling transport) Stop finished."),this.tt()}}tt(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this.G&&(t+=" Error: "+this.G),this.H.log(Vt.Trace,t),this.onclose(this.G)}}}class ge{constructor(t,e,n,i){this.B=t,this.J=e,this.H=n,this.q=i,this.onreceive=null,this.onclose=null}async connect(t,e){if(Qt.isRequired(t,"url"),Qt.isRequired(e,"transferFormat"),Qt.isIn(e,Kt,"transferFormat"),this.H.log(Vt.Trace,"(SSE transport) Connecting."),this.X=t,this.J){const e=await this.J();e&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(e)}`)}return new Promise(((n,i)=>{let r,s=!1;if(e===Kt.Text){if(te.isBrowser||te.isWebWorker)r=new this.q.EventSource(t,{withCredentials:this.q.withCredentials});else{const e=this.B.getCookieString(t),n={};n.Cookie=e;const[i,s]=oe();n[i]=s,r=new this.q.EventSource(t,{withCredentials:this.q.withCredentials,headers:{...n,...this.q.headers}})}try{r.onmessage=t=>{if(this.onreceive)try{this.H.log(Vt.Trace,`(SSE transport) data received. ${ee(t.data,this.q.logMessageContent)}.`),this.onreceive(t.data)}catch(t){return void this.et(t)}},r.onerror=t=>{s?this.et():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},r.onopen=()=>{this.H.log(Vt.Information,`SSE connected to ${this.X}`),this.nt=r,s=!0,n()}}catch(t){return void i(t)}}else i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))}async send(t){return this.nt?ie(this.H,"SSE",this.B,this.X,this.J,t,this.q):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this.et(),Promise.resolve()}et(t){this.nt&&(this.nt.close(),this.nt=void 0,this.onclose&&this.onclose(t))}}class ye{constructor(t,e,n,i,r,s){this.H=n,this.J=e,this.it=i,this.rt=r,this.B=t,this.onreceive=null,this.onclose=null,this.st=s}async connect(t,e){let n;return Qt.isRequired(t,"url"),Qt.isRequired(e,"transferFormat"),Qt.isIn(e,Kt,"transferFormat"),this.H.log(Vt.Trace,"(WebSockets transport) Connecting."),this.J&&(n=await this.J()),new Promise(((i,r)=>{let s;t=t.replace(/^http/,"ws");const o=this.B.getCookieString(t);let c=!1;if(te.isReactNative){const e={},[i,r]=oe();e[i]=r,n&&(e[pe.Authorization]=`Bearer ${n}`),o&&(e[pe.Cookie]=o),s=new this.rt(t,void 0,{headers:{...e,...this.st}})}else n&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);s||(s=new this.rt(t)),e===Kt.Binary&&(s.binaryType="arraybuffer"),s.onopen=e=>{this.H.log(Vt.Information,`WebSocket connected to ${t}.`),this.ot=s,c=!0,i()},s.onerror=t=>{let e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"There was an error with the transport",this.H.log(Vt.Information,`(WebSockets transport) ${e}.`)},s.onmessage=t=>{if(this.H.log(Vt.Trace,`(WebSockets transport) data received. ${ee(t.data,this.it)}.`),this.onreceive)try{this.onreceive(t.data)}catch(t){return void this.et(t)}},s.onclose=t=>{if(c)this.et(t);else{let e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",r(new Error(e))}}}))}send(t){return this.ot&&this.ot.readyState===this.rt.OPEN?(this.H.log(Vt.Trace,`(WebSockets transport) sending data. ${ee(t,this.it)}.`),this.ot.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this.ot&&this.et(void 0),Promise.resolve()}et(t){this.ot&&(this.ot.onclose=()=>{},this.ot.onmessage=()=>{},this.ot.onerror=()=>{},this.ot.close(),this.ot=void 0),this.H.log(Vt.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this.ct(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)))}ct(t){return t&&"boolean"==typeof t.wasClean&&"number"==typeof t.code}}class be{constructor(t,e={}){var n;if(this.ht=()=>{},this.features={},this.ut=1,Qt.isRequired(t,"url"),this.H=void 0===(n=e.logger)?new se(Vt.Information):null===n?Zt.instance:void 0!==n.log?n:new se(n),this.baseUrl=this.lt(t),(e=e||{}).logMessageContent=void 0!==e.logMessageContent&&e.logMessageContent,"boolean"!=typeof e.withCredentials&&void 0!==e.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.withCredentials=void 0===e.withCredentials||e.withCredentials,e.timeout=void 0===e.timeout?1e5:e.timeout,"undefined"==typeof WebSocket||e.WebSocket||(e.WebSocket=WebSocket),"undefined"==typeof EventSource||e.EventSource||(e.EventSource=EventSource),this.B=e.httpClient||new we(this.H),this.ft="Disconnected",this.dt=!1,this.q=e,this.onreceive=null,this.onclose=null}async start(t){if(t=t||Kt.Binary,Qt.isIn(t,Kt,"transferFormat"),this.H.log(Vt.Debug,`Starting connection with transfer format '${Kt[t]}'.`),"Disconnected"!==this.ft)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this.ft="Connecting",this.wt=this.vt(t),await this.wt,"Disconnecting"===this.ft){const t="Failed to start the HttpConnection before stop() was called.";return this.H.log(Vt.Error,t),await this.gt,Promise.reject(new Ot(t))}if("Connected"!==this.ft){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this.H.log(Vt.Error,t),Promise.reject(new Ot(t))}this.dt=!0}send(t){return"Connected"!==this.ft?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.yt||(this.yt=new Ee(this.transport)),this.yt.send(t))}async stop(t){return"Disconnected"===this.ft?(this.H.log(Vt.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this.ft?(this.H.log(Vt.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this.gt):(this.ft="Disconnecting",this.gt=new Promise((t=>{this.ht=t})),await this.bt(t),void await this.gt)}async bt(t){this.Et=t;try{await this.wt}catch(t){}if(this.transport){try{await this.transport.stop()}catch(t){this.H.log(Vt.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this.St()}this.transport=void 0}else this.H.log(Vt.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async vt(t){let e=this.baseUrl;this.J=this.q.accessTokenFactory;try{if(this.q.skipNegotiation){if(this.q.transport!==Xt.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this.$t(Xt.WebSockets),await this.Ct(e,t)}else{let n=null,i=0;do{if(n=await this.kt(e),"Disconnecting"===this.ft||"Disconnected"===this.ft)throw new Ot("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(e=n.url),n.accessToken){const t=n.accessToken;this.J=()=>t}i++}while(n.url&&i<100);if(100===i&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this.Tt(e,this.q.transport,n,t)}this.transport instanceof ve&&(this.features.inherentKeepAlive=!0),"Connecting"===this.ft&&(this.H.log(Vt.Debug,"The HttpConnection connected successfully."),this.ft="Connected")}catch(t){return this.H.log(Vt.Error,"Failed to start the connection: "+t),this.ft="Disconnected",this.transport=void 0,this.ht(),Promise.reject(t)}}async kt(t){const e={};if(this.J){const t=await this.J();t&&(e[pe.Authorization]=`Bearer ${t}`)}const[n,i]=oe();e[n]=i;const r=this.It(t);this.H.log(Vt.Debug,`Sending negotiation request: ${r}.`);try{const t=await this.B.post(r,{content:"",headers:{...e,...this.q.headers},timeout:this.q.timeout,withCredentials:this.q.withCredentials});if(200!==t.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${t.statusCode}'`));const n=JSON.parse(t.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n}catch(t){let e="Failed to complete negotiation with the server: "+t;return t instanceof Ht&&404===t.statusCode&&(e+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this.H.log(Vt.Error,e),Promise.reject(new Jt(e))}}At(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+`id=${e}`:t}async Tt(t,e,n,i){let r=this.At(t,n.connectionToken);if(this._t(e))return this.H.log(Vt.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,await this.Ct(r,i),void(this.connectionId=n.connectionId);const s=[],o=n.availableTransports||[];let c=n;for(const n of o){const o=this.Pt(n,e,i);if(o instanceof Error)s.push(`${n.transport} failed:`),s.push(o);else if(this._t(o)){if(this.transport=o,!c){try{c=await this.kt(t)}catch(t){return Promise.reject(t)}r=this.At(t,c.connectionToken)}try{return await this.Ct(r,i),void(this.connectionId=c.connectionId)}catch(t){if(this.H.log(Vt.Error,`Failed to start the transport '${n.transport}': ${t}`),c=void 0,s.push(new Ft(`${n.transport} failed: ${t}`,Xt[n.transport])),"Connecting"!==this.ft){const t="Failed to select transport before stop() was called.";return this.H.log(Vt.Debug,t),Promise.reject(new Ot(t))}}}}return s.length>0?Promise.reject(new zt(`Unable to connect to the server with any of the available transports. ${s.join(" ")}`,s)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}$t(t){switch(t){case Xt.WebSockets:if(!this.q.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new ye(this.B,this.J,this.H,this.q.logMessageContent,this.q.WebSocket,this.q.headers||{});case Xt.ServerSentEvents:if(!this.q.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ge(this.B,this.J,this.H,this.q);case Xt.LongPolling:return new ve(this.B,this.J,this.H,this.q);default:throw new Error(`Unknown transport: ${t}.`)}}Ct(t,e){return this.transport.onreceive=this.onreceive,this.transport.onclose=t=>this.St(t),this.transport.connect(t,e)}Pt(t,e,n){const i=Xt[t.transport];if(null==i)return this.H.log(Vt.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(!function(t,e){return!t||0!=(e&t)}(e,i))return this.H.log(Vt.Debug,`Skipping transport '${Xt[i]}' because it was disabled by the client.`),new Bt(`'${Xt[i]}' is disabled by the client.`,i);if(!(t.transferFormats.map((t=>Kt[t])).indexOf(n)>=0))return this.H.log(Vt.Debug,`Skipping transport '${Xt[i]}' because it does not support the requested transfer format '${Kt[n]}'.`),new Error(`'${Xt[i]}' does not support ${Kt[n]}.`);if(i===Xt.WebSockets&&!this.q.WebSocket||i===Xt.ServerSentEvents&&!this.q.EventSource)return this.H.log(Vt.Debug,`Skipping transport '${Xt[i]}' because it is not supported in your environment.'`),new jt(`'${Xt[i]}' is not supported in your environment.`,i);this.H.log(Vt.Debug,`Selecting transport '${Xt[i]}'.`);try{return this.$t(i)}catch(t){return t}}_t(t){return t&&"object"==typeof t&&"connect"in t}St(t){if(this.H.log(Vt.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this.ft}.`),this.transport=void 0,t=this.Et||t,this.Et=void 0,"Disconnected"!==this.ft){if("Connecting"===this.ft)throw this.H.log(Vt.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this.ft&&this.ht(),t?this.H.log(Vt.Error,`Connection disconnected with error '${t}'.`):this.H.log(Vt.Information,"Connection disconnected."),this.yt&&(this.yt.stop().catch((t=>{this.H.log(Vt.Error,`TransportSendQueue.stop() threw error '${t}'.`)})),this.yt=void 0),this.connectionId=void 0,this.ft="Disconnected",this.dt){this.dt=!1;try{this.onclose&&this.onclose(t)}catch(e){this.H.log(Vt.Error,`HttpConnection.onclose(${t}) threw error '${e}'.`)}}}else this.H.log(Vt.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`)}lt(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!te.isBrowser)throw new Error(`Cannot resolve '${t}'.`);const e=window.document.createElement("a");return e.href=t,this.H.log(Vt.Information,`Normalizing '${t}' to '${e.href}'.`),e.href}It(t){const e=t.indexOf("?");let n=t.substring(0,-1===e?t.length:e);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",n+=-1===e?"":t.substring(e),-1===n.indexOf("negotiateVersion")&&(n+=-1===e?"?":"&",n+="negotiateVersion="+this.ut),n}}class Ee{constructor(t){this.xt=t,this.Dt=[],this.Nt=!0,this.Mt=new Se,this.Rt=new Se,this.Ut=this.Ht()}send(t){return this.Lt(t),this.Rt||(this.Rt=new Se),this.Rt.promise}stop(){return this.Nt=!1,this.Mt.resolve(),this.Ut}Lt(t){if(this.Dt.length&&typeof this.Dt[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this.Dt} but was of type ${typeof t}`);this.Dt.push(t),this.Mt.resolve()}async Ht(){for(;;){if(await this.Mt.promise,!this.Nt){this.Rt&&this.Rt.reject("Connection stopped.");break}this.Mt=new Se;const t=this.Rt;this.Rt=void 0;const e="string"==typeof this.Dt[0]?this.Dt.join(""):Ee.Ot(this.Dt);this.Dt.length=0;try{await this.xt.send(e),t.resolve()}catch(e){t.reject(e)}}}static Ot(t){const e=t.map((t=>t.byteLength)).reduce(((t,e)=>t+e)),n=new Uint8Array(e);let i=0;for(const e of t)n.set(new Uint8Array(e),i),i+=e.byteLength;return n.buffer}}class Se{constructor(){this.promise=new Promise(((t,e)=>[this.jt,this.Bt]=[t,e]))}resolve(){this.jt()}reject(t){this.Bt(t)}}class $e{static write(t){return`${t}${$e.RecordSeparator}`}static parse(t){if(t[t.length-1]!==$e.RecordSeparator)throw new Error("Message is incomplete.");const e=t.split($e.RecordSeparator);return e.pop(),e}}$e.RecordSeparatorCode=30,$e.RecordSeparator=String.fromCharCode($e.RecordSeparatorCode);class Ce{writeHandshakeRequest(t){return $e.write(JSON.stringify(t))}parseHandshakeResponse(t){let e,n;if(ne(t)){const i=new Uint8Array(t),r=i.indexOf($e.RecordSeparatorCode);if(-1===r)throw new Error("Message is incomplete.");const s=r+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(i.slice(0,s))),n=i.byteLength>s?i.slice(s).buffer:null}else{const i=t,r=i.indexOf($e.RecordSeparator);if(-1===r)throw new Error("Message is incomplete.");const s=r+1;e=i.substring(0,s),n=i.length>s?i.substring(s):null}const i=$e.parse(e),r=JSON.parse(i[0]);if(r.type)throw new Error("Expected a handshake response from the server.");return[n,r]}}!function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}(Gt||(Gt={}));class ke{constructor(){this.observers=[]}next(t){for(const e of this.observers)e.next(t)}error(t){for(const e of this.observers)e.error&&e.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new re(this,t)}}!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"}(Yt||(Yt={}));class Te{constructor(t,e,n,i){this.Ft=0,this.Jt=()=>{this.H.log(Vt.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Qt.isRequired(t,"connection"),Qt.isRequired(e,"logger"),Qt.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.H=e,this.zt=n,this.connection=t,this.Wt=i,this.qt=new Ce,this.connection.onreceive=t=>this.Vt(t),this.connection.onclose=t=>this.Xt(t),this.Kt={},this.Gt={},this.Yt=[],this.Zt=[],this.Qt=[],this.te=0,this.ee=!1,this.ft=Yt.Disconnected,this.dt=!1,this.ne=this.zt.writeMessage({type:Gt.Ping})}static create(t,e,n,i){return new Te(t,e,n,i)}get state(){return this.ft}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this.ft!==Yt.Disconnected&&this.ft!==Yt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this.ie=this.re(),this.ie}async re(){if(this.ft!==Yt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this.ft=Yt.Connecting,this.H.log(Vt.Debug,"Starting HubConnection.");try{await this.vt(),te.isBrowser&&window.document.addEventListener("freeze",this.Jt),this.ft=Yt.Connected,this.dt=!0,this.H.log(Vt.Debug,"HubConnection connected successfully.")}catch(t){return this.ft=Yt.Disconnected,this.H.log(Vt.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}}async vt(){this.se=void 0,this.ee=!1;const t=new Promise(((t,e)=>{this.oe=t,this.ce=e}));await this.connection.start(this.zt.transferFormat);try{const e={protocol:this.zt.name,version:this.zt.version};if(this.H.log(Vt.Debug,"Sending handshake request."),await this.ae(this.qt.writeHandshakeRequest(e)),this.H.log(Vt.Information,`Using HubProtocol '${this.zt.name}'.`),this.he(),this.ue(),this.le(),await t,this.se)throw this.se}catch(t){throw this.H.log(Vt.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this.he(),this.fe(),await this.connection.stop(t),t}}async stop(){const t=this.ie;this.gt=this.bt(),await this.gt;try{await t}catch(t){}}bt(t){return this.ft===Yt.Disconnected?(this.H.log(Vt.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve()):this.ft===Yt.Disconnecting?(this.H.log(Vt.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this.gt):(this.ft=Yt.Disconnecting,this.H.log(Vt.Debug,"Stopping HubConnection."),this.de?(this.H.log(Vt.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.de),this.de=void 0,this.we(),Promise.resolve()):(this.he(),this.fe(),this.se=t||new Ot("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))}stream(t,...e){const[n,i]=this.pe(e),r=this.me(t,e,i);let s;const o=new ke;return o.cancelCallback=()=>{const t=this.ve(r.invocationId);return delete this.Kt[r.invocationId],s.then((()=>this.ge(t)))},this.Kt[r.invocationId]=(t,e)=>{e?o.error(e):t&&(t.type===Gt.Completion?t.error?o.error(new Error(t.error)):o.complete():o.next(t.item))},s=this.ge(r).catch((t=>{o.error(t),delete this.Kt[r.invocationId]})),this.ye(n,s),o}ae(t){return this.le(),this.connection.send(t)}ge(t){return this.ae(this.zt.writeMessage(t))}send(t,...e){const[n,i]=this.pe(e),r=this.ge(this.be(t,e,!0,i));return this.ye(n,r),r}invoke(t,...e){const[n,i]=this.pe(e),r=this.be(t,e,!1,i);return new Promise(((t,e)=>{this.Kt[r.invocationId]=(n,i)=>{i?e(i):n&&(n.type===Gt.Completion?n.error?e(new Error(n.error)):t(n.result):e(new Error(`Unexpected message type: ${n.type}`)))};const i=this.ge(r).catch((t=>{e(t),delete this.Kt[r.invocationId]}));this.ye(n,i)}))}on(t,e){t&&e&&(t=t.toLowerCase(),this.Gt[t]||(this.Gt[t]=[]),-1===this.Gt[t].indexOf(e)&&this.Gt[t].push(e))}off(t,e){if(!t)return;t=t.toLowerCase();const n=this.Gt[t];if(n)if(e){const i=n.indexOf(e);-1!==i&&(n.splice(i,1),0===n.length&&delete this.Gt[t])}else delete this.Gt[t]}onclose(t){t&&this.Yt.push(t)}onreconnecting(t){t&&this.Zt.push(t)}onreconnected(t){t&&this.Qt.push(t)}Vt(t){if(this.he(),this.ee||(t=this.Ee(t),this.ee=!0),t){const e=this.zt.parseMessages(t,this.H);for(const t of e)switch(t.type){case Gt.Invocation:this.Se(t);break;case Gt.StreamItem:case Gt.Completion:{const e=this.Kt[t.invocationId];if(e){t.type===Gt.Completion&&delete this.Kt[t.invocationId];try{e(t)}catch(t){this.H.log(Vt.Error,`Stream callback threw error: ${ue(t)}`)}}break}case Gt.Ping:break;case Gt.Close:{this.H.log(Vt.Information,"Close message received from server.");const e=t.error?new Error("Server returned an error on close: "+t.error):void 0;!0===t.allowReconnect?this.connection.stop(e):this.gt=this.bt(e);break}default:this.H.log(Vt.Warning,`Invalid message type: ${t.type}.`)}}this.ue()}Ee(t){let e,n;try{[n,e]=this.qt.parseHandshakeResponse(t)}catch(t){const e="Error parsing handshake response: "+t;this.H.log(Vt.Error,e);const n=new Error(e);throw this.ce(n),n}if(e.error){const t="Server returned handshake error: "+e.error;this.H.log(Vt.Error,t);const n=new Error(t);throw this.ce(n),n}return this.H.log(Vt.Debug,"Server handshake complete."),this.oe(),n}le(){this.connection.features.inherentKeepAlive||(this.Ft=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this.fe())}ue(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this.$e=setTimeout((()=>this.serverTimeout()),this.serverTimeoutInMilliseconds),void 0!==this.Ce))){let t=this.Ft-(new Date).getTime();t<0&&(t=0),this.Ce=setTimeout((async()=>{if(this.ft===Yt.Connected)try{await this.ae(this.ne)}catch{this.fe()}}),t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async Se(t){const e=t.target.toLowerCase(),n=this.Gt[e];if(!n)return this.H.log(Vt.Warning,`No client method with the name '${e}' found.`),void(t.invocationId&&(this.H.log(Vt.Warning,`No result given for '${e}' method and invocation ID '${t.invocationId}'.`),await this.ge(this.ke(t.invocationId,"Client didn't provide a result.",null))));const i=n.slice(),r=!!t.invocationId;let s,o,c;for(const n of i)try{const i=s;s=await n.apply(this,t.arguments),r&&s&&i&&(this.H.log(Vt.Error,`Multiple results provided for '${e}'. Sending error to server.`),c=this.ke(t.invocationId,"Client provided multiple results.",null)),o=void 0}catch(t){o=t,this.H.log(Vt.Error,`A callback for the method '${e}' threw error '${t}'.`)}c?await this.ge(c):r?(o?c=this.ke(t.invocationId,`${o}`,null):void 0!==s?c=this.ke(t.invocationId,null,s):(this.H.log(Vt.Warning,`No result given for '${e}' method and invocation ID '${t.invocationId}'.`),c=this.ke(t.invocationId,"Client didn't provide a result.",null)),await this.ge(c)):s&&this.H.log(Vt.Error,`Result given for '${e}' method but server is not expecting a result.`)}Xt(t){this.H.log(Vt.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this.ft}.`),this.se=this.se||t||new Ot("The underlying connection was closed before the hub handshake could complete."),this.oe&&this.oe(),this.Te(t||new Error("Invocation canceled due to the underlying connection being closed.")),this.he(),this.fe(),this.ft===Yt.Disconnecting?this.we(t):this.ft===Yt.Connected&&this.Wt?this.Ie(t):this.ft===Yt.Connected&&this.we(t)}we(t){if(this.dt){this.ft=Yt.Disconnected,this.dt=!1,te.isBrowser&&window.document.removeEventListener("freeze",this.Jt);try{this.Yt.forEach((e=>e.apply(this,[t])))}catch(e){this.H.log(Vt.Error,`An onclose callback called with error '${t}' threw error '${e}'.`)}}}async Ie(t){const e=Date.now();let n=0,i=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),r=this.Ae(n++,0,i);if(null===r)return this.H.log(Vt.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this.we(t);if(this.ft=Yt.Reconnecting,t?this.H.log(Vt.Information,`Connection reconnecting because of error '${t}'.`):this.H.log(Vt.Information,"Connection reconnecting."),0!==this.Zt.length){try{this.Zt.forEach((e=>e.apply(this,[t])))}catch(e){this.H.log(Vt.Error,`An onreconnecting callback called with error '${t}' threw error '${e}'.`)}if(this.ft!==Yt.Reconnecting)return void this.H.log(Vt.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==r;){if(this.H.log(Vt.Information,`Reconnect attempt number ${n} will start in ${r} ms.`),await new Promise((t=>{this.de=setTimeout(t,r)})),this.de=void 0,this.ft!==Yt.Reconnecting)return void this.H.log(Vt.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this.vt(),this.ft=Yt.Connected,this.H.log(Vt.Information,"HubConnection reconnected successfully."),0!==this.Qt.length)try{this.Qt.forEach((t=>t.apply(this,[this.connection.connectionId])))}catch(t){this.H.log(Vt.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${t}'.`)}return}catch(t){if(this.H.log(Vt.Information,`Reconnect attempt failed because of error '${t}'.`),this.ft!==Yt.Reconnecting)return this.H.log(Vt.Debug,`Connection moved to the '${this.ft}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this.ft===Yt.Disconnecting&&this.we());i=t instanceof Error?t:new Error(t.toString()),r=this.Ae(n++,Date.now()-e,i)}}this.H.log(Vt.Information,`Reconnect retries have been exhausted after ${Date.now()-e} ms and ${n} failed attempts. Connection disconnecting.`),this.we()}Ae(t,e,n){try{return this.Wt.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:n})}catch(n){return this.H.log(Vt.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${e}) threw error '${n}'.`),null}}Te(t){const e=this.Kt;this.Kt={},Object.keys(e).forEach((n=>{const i=e[n];try{i(null,t)}catch(e){this.H.log(Vt.Error,`Stream 'error' callback called with '${t}' threw error: ${ue(e)}`)}}))}fe(){this.Ce&&(clearTimeout(this.Ce),this.Ce=void 0)}he(){this.$e&&clearTimeout(this.$e)}be(t,e,n,i){if(n)return 0!==i.length?{arguments:e,streamIds:i,target:t,type:Gt.Invocation}:{arguments:e,target:t,type:Gt.Invocation};{const n=this.te;return this.te++,0!==i.length?{arguments:e,invocationId:n.toString(),streamIds:i,target:t,type:Gt.Invocation}:{arguments:e,invocationId:n.toString(),target:t,type:Gt.Invocation}}}ye(t,e){if(0!==t.length){e||(e=Promise.resolve());for(const n in t)t[n].subscribe({complete:()=>{e=e.then((()=>this.ge(this.ke(n))))},error:t=>{let i;i=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",e=e.then((()=>this.ge(this.ke(n,i))))},next:t=>{e=e.then((()=>this.ge(this._e(n,t))))}})}}pe(t){const e=[],n=[];for(let i=0;i<t.length;i++){const r=t[i];if(this.Pe(r)){const s=this.te;this.te++,e[s]=r,n.push(s.toString()),t.splice(i,1)}}return[e,n]}Pe(t){return t&&t.subscribe&&"function"==typeof t.subscribe}me(t,e,n){const i=this.te;return this.te++,0!==n.length?{arguments:e,invocationId:i.toString(),streamIds:n,target:t,type:Gt.StreamInvocation}:{arguments:e,invocationId:i.toString(),target:t,type:Gt.StreamInvocation}}ve(t){return{invocationId:t,type:Gt.CancelInvocation}}_e(t,e){return{invocationId:t,item:e,type:Gt.StreamItem}}ke(t,e,n){return e?{error:e,invocationId:t,type:Gt.Completion}:{invocationId:t,result:n,type:Gt.Completion}}}class Ie{constructor(){this.name="json",this.version=1,this.transferFormat=Kt.Text}parseMessages(t,e){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===e&&(e=Zt.instance);const n=$e.parse(t),i=[];for(const t of n){const n=JSON.parse(t);if("number"!=typeof n.type)throw new Error("Invalid payload.");switch(n.type){case Gt.Invocation:this.xe(n);break;case Gt.StreamItem:this.De(n);break;case Gt.Completion:this.Ne(n);break;case Gt.Ping:case Gt.Close:break;default:e.log(Vt.Information,"Unknown message type '"+n.type+"' ignored.");continue}i.push(n)}return i}writeMessage(t){return $e.write(JSON.stringify(t))}xe(t){this.Me(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this.Me(t.invocationId,"Invalid payload for Invocation message.")}De(t){if(this.Me(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")}Ne(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this.Me(t.error,"Invalid payload for Completion message."),this.Me(t.invocationId,"Invalid payload for Completion message.")}Me(t,e){if("string"!=typeof t||""===t)throw new Error(e)}}const Ae={trace:Vt.Trace,debug:Vt.Debug,info:Vt.Information,information:Vt.Information,warn:Vt.Warning,warning:Vt.Warning,error:Vt.Error,critical:Vt.Critical,none:Vt.None};class _e{configureLogging(t){if(Qt.isRequired(t,"logging"),void 0!==t.log)this.logger=t;else if("string"==typeof t){const e=function(t){const e=Ae[t.toLowerCase()];if(void 0!==e)return e;throw new Error(`Unknown log level: ${t}`)}(t);this.logger=new se(e)}else this.logger=new se(t);return this}withUrl(t,e){return Qt.isRequired(t,"url"),Qt.isNotEmpty(t,"url"),this.url=t,this.httpConnectionOptions="object"==typeof e?{...this.httpConnectionOptions,...e}:{...this.httpConnectionOptions,transport:e},this}withHubProtocol(t){return Qt.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new Ut(t):this.reconnectPolicy=t:this.reconnectPolicy=new Ut,this}build(){const t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const e=new be(this.url,t);return Te.create(e,this.logger||Zt.instance,this.protocol||new Ie,this.reconnectPolicy)}}var Pe=4294967295;function xe(t,e,n){var i=Math.floor(n/4294967296),r=n;t.setUint32(e,i),t.setUint32(e+4,r)}function De(t,e){return 4294967296*t.getInt32(e)+t.getUint32(e+4)}var Ne=("undefined"==typeof process||"never"!==process.env.TEXT_ENCODING)&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function Me(t){for(var e=t.length,n=0,i=0;i<e;){var r=t.charCodeAt(i++);if(0!=(4294967168&r))if(0==(4294965248&r))n+=2;else{if(r>=55296&&r<=56319&&i<e){var s=t.charCodeAt(i);56320==(64512&s)&&(++i,r=((1023&r)<<10)+(1023&s)+65536)}n+=0==(4294901760&r)?3:4}else n++}return n}var Re=Ne?new TextEncoder:void 0,Ue=Ne?"undefined"!=typeof process&&"force"!==process.env.TEXT_ENCODING?200:0:Pe,He=(null==Re?void 0:Re.encodeInto)?function(t,e,n){Re.encodeInto(t,e.subarray(n))}:function(t,e,n){e.set(Re.encode(t),n)};function Le(t,e,n){for(var i=e,r=i+n,s=[],o="";i<r;){var c=t[i++];if(0==(128&c))s.push(c);else if(192==(224&c)){var a=63&t[i++];s.push((31&c)<<6|a)}else if(224==(240&c)){a=63&t[i++];var h=63&t[i++];s.push((31&c)<<12|a<<6|h)}else if(240==(248&c)){var u=(7&c)<<18|(a=63&t[i++])<<12|(h=63&t[i++])<<6|63&t[i++];u>65535&&(u-=65536,s.push(u>>>10&1023|55296),u=56320|1023&u),s.push(u)}else s.push(c);s.length>=4096&&(o+=String.fromCharCode.apply(String,s),s.length=0)}return s.length>0&&(o+=String.fromCharCode.apply(String,s)),o}var Oe,je=Ne?new TextDecoder:null,Be=Ne?"undefined"!=typeof process&&"force"!==process.env.TEXT_DECODER?200:0:Pe,Fe=function(t,e){this.type=t,this.data=e},Je=(Oe=function(t,e){return Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Oe(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Oe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ze=function(t){function e(n){var i=t.call(this,n)||this,r=Object.create(e.prototype);return Object.setPrototypeOf(i,r),Object.defineProperty(i,"name",{configurable:!0,enumerable:!1,value:e.name}),i}return Je(e,t),e}(Error),We={type:-1,encode:function(t){var e,n,i,r;return t instanceof Date?function(t){var e,n=t.sec,i=t.nsec;if(n>=0&&i>=0&&n<=17179869183){if(0===i&&n<=4294967295){var r=new Uint8Array(4);return(e=new DataView(r.buffer)).setUint32(0,n),r}var s=n/4294967296,o=4294967295&n;return r=new Uint8Array(8),(e=new DataView(r.buffer)).setUint32(0,i<<2|3&s),e.setUint32(4,o),r}return r=new Uint8Array(12),(e=new DataView(r.buffer)).setUint32(0,i),xe(e,4,n),r}((i=1e6*((e=t.getTime())-1e3*(n=Math.floor(e/1e3))),{sec:n+(r=Math.floor(i/1e9)),nsec:i-1e9*r})):null},decode:function(t){var e=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:var n=e.getUint32(0);return{sec:4294967296*(3&n)+e.getUint32(4),nsec:n>>>2};case 12:return{sec:De(e,4),nsec:e.getUint32(0)};default:throw new ze("Unrecognized data size for timestamp (expected 4, 8, or 12): "+t.length)}}(t);return new Date(1e3*e.sec+e.nsec/1e6)}},qe=function(){function t(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(We)}return t.prototype.register=function(t){var e=t.type,n=t.encode,i=t.decode;if(e>=0)this.encoders[e]=n,this.decoders[e]=i;else{var r=1+e;this.builtInEncoders[r]=n,this.builtInDecoders[r]=i}},t.prototype.tryToEncode=function(t,e){for(var n=0;n<this.builtInEncoders.length;n++)if(null!=(i=this.builtInEncoders[n])&&null!=(r=i(t,e)))return new Fe(-1-n,r);for(n=0;n<this.encoders.length;n++){var i,r;if(null!=(i=this.encoders[n])&&null!=(r=i(t,e)))return new Fe(n,r)}return t instanceof Fe?t:null},t.prototype.decode=function(t,e,n){var i=e<0?this.builtInDecoders[-1-e]:this.decoders[e];return i?i(t,e,n):new Fe(e,t)},t.defaultCodec=new t,t}();function Ve(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}var Xe=function(){function t(t,e,n,i,r,s,o,c){void 0===t&&(t=qe.defaultCodec),void 0===e&&(e=void 0),void 0===n&&(n=100),void 0===i&&(i=2048),void 0===r&&(r=!1),void 0===s&&(s=!1),void 0===o&&(o=!1),void 0===c&&(c=!1),this.extensionCodec=t,this.context=e,this.maxDepth=n,this.initialBufferSize=i,this.sortKeys=r,this.forceFloat32=s,this.ignoreUndefined=o,this.forceIntegerToFloat=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return t.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},t.prototype.reinitializeState=function(){this.pos=0},t.prototype.encode=function(t){return this.reinitializeState(),this.doEncode(t,1),this.getUint8Array()},t.prototype.doEncode=function(t,e){if(e>this.maxDepth)throw new Error("Too deep objects in depth "+e);null==t?this.encodeNil():"boolean"==typeof t?this.encodeBoolean(t):"number"==typeof t?this.encodeNumber(t):"string"==typeof t?this.encodeString(t):this.encodeObject(t,e)},t.prototype.ensureBufferSizeToWrite=function(t){var e=this.pos+t;this.view.byteLength<e&&this.resizeBuffer(2*e)},t.prototype.resizeBuffer=function(t){var e=new ArrayBuffer(t),n=new Uint8Array(e),i=new DataView(e);n.set(this.bytes),this.view=i,this.bytes=n},t.prototype.encodeNil=function(){this.writeU8(192)},t.prototype.encodeBoolean=function(t){!1===t?this.writeU8(194):this.writeU8(195)},t.prototype.encodeNumber=function(t){Number.isSafeInteger(t)&&!this.forceIntegerToFloat?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):(this.writeU8(211),this.writeI64(t)):this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))},t.prototype.writeStringHeader=function(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too long string: "+t+" bytes in UTF-8");this.writeU8(219),this.writeU32(t)}},t.prototype.encodeString=function(t){if(t.length>Ue){var e=Me(t);this.ensureBufferSizeToWrite(5+e),this.writeStringHeader(e),He(t,this.bytes,this.pos),this.pos+=e}else e=Me(t),this.ensureBufferSizeToWrite(5+e),this.writeStringHeader(e),function(t,e,n){for(var i=t.length,r=n,s=0;s<i;){var o=t.charCodeAt(s++);if(0!=(4294967168&o)){if(0==(4294965248&o))e[r++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<i){var c=t.charCodeAt(s);56320==(64512&c)&&(++s,o=((1023&o)<<10)+(1023&c)+65536)}0==(4294901760&o)?(e[r++]=o>>12&15|224,e[r++]=o>>6&63|128):(e[r++]=o>>18&7|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128)}e[r++]=63&o|128}else e[r++]=o}}(t,this.bytes,this.pos),this.pos+=e},t.prototype.encodeObject=function(t,e){var n=this.extensionCodec.tryToEncode(t,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(t))this.encodeArray(t,e);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else{if("object"!=typeof t)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(t));this.encodeMap(t,e)}},t.prototype.encodeBinary=function(t){var e=t.byteLength;if(e<256)this.writeU8(196),this.writeU8(e);else if(e<65536)this.writeU8(197),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large binary: "+e);this.writeU8(198),this.writeU32(e)}var n=Ve(t);this.writeU8a(n)},t.prototype.encodeArray=function(t,e){var n=t.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: "+n);this.writeU8(221),this.writeU32(n)}for(var i=0,r=t;i<r.length;i++){var s=r[i];this.doEncode(s,e+1)}},t.prototype.countWithoutUndefined=function(t,e){for(var n=0,i=0,r=e;i<r.length;i++)void 0!==t[r[i]]&&n++;return n},t.prototype.encodeMap=function(t,e){var n=Object.keys(t);this.sortKeys&&n.sort();var i=this.ignoreUndefined?this.countWithoutUndefined(t,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large map object: "+i);this.writeU8(223),this.writeU32(i)}for(var r=0,s=n;r<s.length;r++){var o=s[r],c=t[o];this.ignoreUndefined&&void 0===c||(this.encodeString(o),this.doEncode(c,e+1))}},t.prototype.encodeExtension=function(t){var e=t.data.length;if(1===e)this.writeU8(212);else if(2===e)this.writeU8(213);else if(4===e)this.writeU8(214);else if(8===e)this.writeU8(215);else if(16===e)this.writeU8(216);else if(e<256)this.writeU8(199),this.writeU8(e);else if(e<65536)this.writeU8(200),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large extension object: "+e);this.writeU8(201),this.writeU32(e)}this.writeI8(t.type),this.writeU8a(t.data)},t.prototype.writeU8=function(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++},t.prototype.writeU8a=function(t){var e=t.length;this.ensureBufferSizeToWrite(e),this.bytes.set(t,this.pos),this.pos+=e},t.prototype.writeI8=function(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++},t.prototype.writeU16=function(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2},t.prototype.writeI16=function(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2},t.prototype.writeU32=function(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4},t.prototype.writeI32=function(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4},t.prototype.writeF32=function(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4},t.prototype.writeF64=function(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8},t.prototype.writeU64=function(t){this.ensureBufferSizeToWrite(8),function(t,e,n){var i=n/4294967296,r=n;t.setUint32(e,i),t.setUint32(e+4,r)}(this.view,this.pos,t),this.pos+=8},t.prototype.writeI64=function(t){this.ensureBufferSizeToWrite(8),xe(this.view,this.pos,t),this.pos+=8},t}();function Ke(t){return(t<0?"-":"")+"0x"+Math.abs(t).toString(16).padStart(2,"0")}var Ge=function(){function t(t,e){void 0===t&&(t=16),void 0===e&&(e=16),this.maxKeyLength=t,this.maxLengthPerKey=e,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return t.prototype.canBeCached=function(t){return t>0&&t<=this.maxKeyLength},t.prototype.find=function(t,e,n){t:for(var i=0,r=this.caches[n-1];i<r.length;i++){for(var s=r[i],o=s.bytes,c=0;c<n;c++)if(o[c]!==t[e+c])continue t;return s.str}return null},t.prototype.store=function(t,e){var n=this.caches[t.length-1],i={bytes:t,str:e};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)},t.prototype.decode=function(t,e,n){var i=this.find(t,e,n);if(null!=i)return this.hit++,i;this.miss++;var r=Le(t,e,n),s=Uint8Array.prototype.slice.call(t,e,e+n);return this.store(s,r),r},t}(),Ye=function(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Ze=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}},Qe=function(t){return this instanceof Qe?(this.v=t,this):new Qe(t)},tn=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||c(t,e)}))})}function c(t,e){try{(n=r[t](e)).value instanceof Qe?Promise.resolve(n.value.v).then(a,h):u(s[0][2],n)}catch(t){u(s[0][3],t)}var n}function a(t){c("next",t)}function h(t){c("throw",t)}function u(t,e){t(e),s.shift(),s.length&&c(s[0][0],s[0][1])}},en=new DataView(new ArrayBuffer(0)),nn=new Uint8Array(en.buffer),rn=function(){try{en.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")}(),sn=new rn("Insufficient data"),on=new Ge,cn=function(){function t(t,e,n,i,r,s,o,c){void 0===t&&(t=qe.defaultCodec),void 0===e&&(e=void 0),void 0===n&&(n=Pe),void 0===i&&(i=Pe),void 0===r&&(r=Pe),void 0===s&&(s=Pe),void 0===o&&(o=Pe),void 0===c&&(c=on),this.extensionCodec=t,this.context=e,this.maxStrLength=n,this.maxBinLength=i,this.maxArrayLength=r,this.maxMapLength=s,this.maxExtLength=o,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=en,this.bytes=nn,this.headByte=-1,this.stack=[]}return t.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},t.prototype.setBuffer=function(t){this.bytes=Ve(t),this.view=function(t){if(t instanceof ArrayBuffer)return new DataView(t);var e=Ve(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}(this.bytes),this.pos=0},t.prototype.appendBuffer=function(t){if(-1!==this.headByte||this.hasRemaining(1)){var e=this.bytes.subarray(this.pos),n=Ve(t),i=new Uint8Array(e.length+n.length);i.set(e),i.set(n,e.length),this.setBuffer(i)}else this.setBuffer(t)},t.prototype.hasRemaining=function(t){return this.view.byteLength-this.pos>=t},t.prototype.createExtraByteError=function(t){var e=this.view,n=this.pos;return new RangeError("Extra "+(e.byteLength-n)+" of "+e.byteLength+" byte(s) found at buffer["+t+"]")},t.prototype.decode=function(t){this.reinitializeState(),this.setBuffer(t);var e=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return e},t.prototype.decodeMulti=function(t){return Ye(this,(function(e){switch(e.label){case 0:this.reinitializeState(),this.setBuffer(t),e.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return e.sent(),[3,1];case 3:return[2]}}))},t.prototype.decodeAsync=function(t){var e,n,i,r,s,o,c;return s=this,void 0,c=function(){var s,o,c,a,h,u,l,f;return Ye(this,(function(d){switch(d.label){case 0:s=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),e=Ze(t),d.label=2;case 2:return[4,e.next()];case 3:if((n=d.sent()).done)return[3,5];if(c=n.value,s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{o=this.doDecodeSync(),s=!0}catch(t){if(!(t instanceof rn))throw t}this.totalPos+=this.pos,d.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return a=d.sent(),i={error:a},[3,12];case 7:return d.trys.push([7,,10,11]),n&&!n.done&&(r=e.return)?[4,r.call(e)]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(i)throw i.error;return[7];case 11:return[7];case 12:if(s){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,o]}throw u=(h=this).headByte,l=h.pos,f=h.totalPos,new RangeError("Insufficient data in parsing "+Ke(u)+" at "+f+" ("+l+" in the current buffer)")}}))},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{r(c.next(t))}catch(t){e(t)}}function i(t){try{r(c.throw(t))}catch(t){e(t)}}function r(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o((function(t){t(r)}))).then(n,i)}r((c=c.apply(s,[])).next())}))},t.prototype.decodeArrayStream=function(t){return this.decodeMultiAsync(t,!0)},t.prototype.decodeStream=function(t){return this.decodeMultiAsync(t,!1)},t.prototype.decodeMultiAsync=function(t,e){return tn(this,arguments,(function(){var n,i,r,s,o,c,a,h,u;return Ye(this,(function(l){switch(l.label){case 0:n=e,i=-1,l.label=1;case 1:l.trys.push([1,13,14,19]),r=Ze(t),l.label=2;case 2:return[4,Qe(r.next())];case 3:if((s=l.sent()).done)return[3,12];if(o=s.value,e&&0===i)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),n&&(i=this.readArraySize(),n=!1,this.complete()),l.label=4;case 4:l.trys.push([4,9,,10]),l.label=5;case 5:return[4,Qe(this.doDecodeSync())];case 6:return[4,l.sent()];case 7:return l.sent(),0==--i?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((c=l.sent())instanceof rn))throw c;return[3,10];case 10:this.totalPos+=this.pos,l.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return a=l.sent(),h={error:a},[3,19];case 14:return l.trys.push([14,,17,18]),s&&!s.done&&(u=r.return)?[4,Qe(u.call(r))]:[3,16];case 15:l.sent(),l.label=16;case 16:return[3,18];case 17:if(h)throw h.error;return[7];case 18:return[7];case 19:return[2]}}))}))},t.prototype.doDecodeSync=function(){t:for(;;){var t=this.readHeadByte(),e=void 0;if(t>=224)e=t-256;else if(t<192)if(t<128)e=t;else if(t<144){if(0!=(i=t-128)){this.pushMapState(i),this.complete();continue t}e={}}else if(t<160){if(0!=(i=t-144)){this.pushArrayState(i),this.complete();continue t}e=[]}else{var n=t-160;e=this.decodeUtf8String(n,0)}else if(192===t)e=null;else if(194===t)e=!1;else if(195===t)e=!0;else if(202===t)e=this.readF32();else if(203===t)e=this.readF64();else if(204===t)e=this.readU8();else if(205===t)e=this.readU16();else if(206===t)e=this.readU32();else if(207===t)e=this.readU64();else if(208===t)e=this.readI8();else if(209===t)e=this.readI16();else if(210===t)e=this.readI32();else if(211===t)e=this.readI64();else if(217===t)n=this.lookU8(),e=this.decodeUtf8String(n,1);else if(218===t)n=this.lookU16(),e=this.decodeUtf8String(n,2);else if(219===t)n=this.lookU32(),e=this.decodeUtf8String(n,4);else if(220===t){if(0!==(i=this.readU16())){this.pushArrayState(i),this.complete();continue t}e=[]}else if(221===t){if(0!==(i=this.readU32())){this.pushArrayState(i),this.complete();continue t}e=[]}else if(222===t){if(0!==(i=this.readU16())){this.pushMapState(i),this.complete();continue t}e={}}else if(223===t){if(0!==(i=this.readU32())){this.pushMapState(i),this.complete();continue t}e={}}else if(196===t){var i=this.lookU8();e=this.decodeBinary(i,1)}else if(197===t)i=this.lookU16(),e=this.decodeBinary(i,2);else if(198===t)i=this.lookU32(),e=this.decodeBinary(i,4);else if(212===t)e=this.decodeExtension(1,0);else if(213===t)e=this.decodeExtension(2,0);else if(214===t)e=this.decodeExtension(4,0);else if(215===t)e=this.decodeExtension(8,0);else if(216===t)e=this.decodeExtension(16,0);else if(199===t)i=this.lookU8(),e=this.decodeExtension(i,1);else if(200===t)i=this.lookU16(),e=this.decodeExtension(i,2);else{if(201!==t)throw new ze("Unrecognized type byte: "+Ke(t));i=this.lookU32(),e=this.decodeExtension(i,4)}this.complete();for(var r=this.stack;r.length>0;){var s=r[r.length-1];if(0===s.type){if(s.array[s.position]=e,s.position++,s.position!==s.size)continue t;r.pop(),e=s.array}else{if(1===s.type){if("string"!=(o=typeof e)&&"number"!==o)throw new ze("The type of key must be string or number but "+typeof e);if("__proto__"===e)throw new ze("The key __proto__ is not allowed");s.key=e,s.type=2;continue t}if(s.map[s.key]=e,s.readCount++,s.readCount!==s.size){s.key=null,s.type=1;continue t}r.pop(),e=s.map}}return e}var o},t.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},t.prototype.complete=function(){this.headByte=-1},t.prototype.readArraySize=function(){var t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:if(t<160)return t-144;throw new ze("Unrecognized array type byte: "+Ke(t))}},t.prototype.pushMapState=function(t){if(t>this.maxMapLength)throw new ze("Max length exceeded: map length ("+t+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:t,key:null,readCount:0,map:{}})},t.prototype.pushArrayState=function(t){if(t>this.maxArrayLength)throw new ze("Max length exceeded: array length ("+t+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:t,array:new Array(t),position:0})},t.prototype.decodeUtf8String=function(t,e){var n;if(t>this.maxStrLength)throw new ze("Max length exceeded: UTF-8 byte length ("+t+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+e+t)throw sn;var i,r=this.pos+e;return i=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(t))?this.keyDecoder.decode(this.bytes,r,t):t>Be?function(t,e,n){var i=t.subarray(e,e+n);return je.decode(i)}(this.bytes,r,t):Le(this.bytes,r,t),this.pos+=e+t,i},t.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},t.prototype.decodeBinary=function(t,e){if(t>this.maxBinLength)throw new ze("Max length exceeded: bin length ("+t+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(t+e))throw sn;var n=this.pos+e,i=this.bytes.subarray(n,n+t);return this.pos+=e+t,i},t.prototype.decodeExtension=function(t,e){if(t>this.maxExtLength)throw new ze("Max length exceeded: ext length ("+t+") > maxExtLength ("+this.maxExtLength+")");var n=this.view.getInt8(this.pos+e),i=this.decodeBinary(t,e+1);return this.extensionCodec.decode(i,n,this.context)},t.prototype.lookU8=function(){return this.view.getUint8(this.pos)},t.prototype.lookU16=function(){return this.view.getUint16(this.pos)},t.prototype.lookU32=function(){return this.view.getUint32(this.pos)},t.prototype.readU8=function(){var t=this.view.getUint8(this.pos);return this.pos++,t},t.prototype.readI8=function(){var t=this.view.getInt8(this.pos);return this.pos++,t},t.prototype.readU16=function(){var t=this.view.getUint16(this.pos);return this.pos+=2,t},t.prototype.readI16=function(){var t=this.view.getInt16(this.pos);return this.pos+=2,t},t.prototype.readU32=function(){var t=this.view.getUint32(this.pos);return this.pos+=4,t},t.prototype.readI32=function(){var t=this.view.getInt32(this.pos);return this.pos+=4,t},t.prototype.readU64=function(){var t,e,n=(t=this.view,e=this.pos,4294967296*t.getUint32(e)+t.getUint32(e+4));return this.pos+=8,n},t.prototype.readI64=function(){var t=De(this.view,this.pos);return this.pos+=8,t},t.prototype.readF32=function(){var t=this.view.getFloat32(this.pos);return this.pos+=4,t},t.prototype.readF64=function(){var t=this.view.getFloat64(this.pos);return this.pos+=8,t},t}();class an{static write(t){let e=t.byteLength||t.length;const n=[];do{let t=127&e;e>>=7,e>0&&(t|=128),n.push(t)}while(e>0);e=t.byteLength||t.length;const i=new Uint8Array(n.length+e);return i.set(n,0),i.set(t,n.length),i.buffer}static parse(t){const e=[],n=new Uint8Array(t),i=[0,7,14,21,28];for(let r=0;r<t.byteLength;){let s,o=0,c=0;do{s=n[r+o],c|=(127&s)<<i[o],o++}while(o<Math.min(5,t.byteLength-r)&&0!=(128&s));if(0!=(128&s)&&o<5)throw new Error("Cannot read message size.");if(5===o&&s>7)throw new Error("Messages bigger than 2GB are not supported.");if(!(n.byteLength>=r+o+c))throw new Error("Incomplete message.");e.push(n.slice?n.slice(r+o,r+o+c):n.subarray(r+o,r+o+c)),r=r+o+c}return e}}const hn=new Uint8Array([145,Gt.Ping]);class un{constructor(t){this.name="messagepack",this.version=1,this.transferFormat=Kt.Binary,this.Re=1,this.Ue=2,this.He=3,t=t||{},this.Le=new Xe(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat),this.Oe=new cn(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength)}parseMessages(t,e){if(!(n=t)||"undefined"==typeof ArrayBuffer||!(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name))throw new Error("Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.");var n;null===e&&(e=Zt.instance);const i=an.parse(t),r=[];for(const t of i){const n=this.je(t,e);n&&r.push(n)}return r}writeMessage(t){switch(t.type){case Gt.Invocation:return this.Be(t);case Gt.StreamInvocation:return this.Fe(t);case Gt.StreamItem:return this.Je(t);case Gt.Completion:return this.ze(t);case Gt.Ping:return an.write(hn);case Gt.CancelInvocation:return this.We(t);default:throw new Error("Invalid message type.")}}je(t,e){if(0===t.length)throw new Error("Invalid payload.");const n=this.Oe.decode(t);if(0===n.length||!(n instanceof Array))throw new Error("Invalid payload.");const i=n[0];switch(i){case Gt.Invocation:return this.qe(this.Ve(n),n);case Gt.StreamItem:return this._e(this.Ve(n),n);case Gt.Completion:return this.ke(this.Ve(n),n);case Gt.Ping:return this.Xe(n);case Gt.Close:return this.Ke(n);default:return e.log(Vt.Information,"Unknown message type '"+i+"' ignored."),null}}Ke(t){if(t.length<2)throw new Error("Invalid payload for Close message.");return{allowReconnect:t.length>=3?t[2]:void 0,error:t[1],type:Gt.Close}}Xe(t){if(t.length<1)throw new Error("Invalid payload for Ping message.");return{type:Gt.Ping}}qe(t,e){if(e.length<5)throw new Error("Invalid payload for Invocation message.");const n=e[2];return n?{arguments:e[4],headers:t,invocationId:n,streamIds:[],target:e[3],type:Gt.Invocation}:{arguments:e[4],headers:t,streamIds:[],target:e[3],type:Gt.Invocation}}_e(t,e){if(e.length<4)throw new Error("Invalid payload for StreamItem message.");return{headers:t,invocationId:e[2],item:e[3],type:Gt.StreamItem}}ke(t,e){if(e.length<4)throw new Error("Invalid payload for Completion message.");const n=e[3];if(n!==this.Ue&&e.length<5)throw new Error("Invalid payload for Completion message.");let i,r;switch(n){case this.Re:i=e[4];break;case this.He:r=e[4]}return{error:i,headers:t,invocationId:e[2],result:r,type:Gt.Completion}}Be(t){let e;return e=t.streamIds?this.Le.encode([Gt.Invocation,t.headers||{},t.invocationId||null,t.target,t.arguments,t.streamIds]):this.Le.encode([Gt.Invocation,t.headers||{},t.invocationId||null,t.target,t.arguments]),an.write(e.slice())}Fe(t){let e;return e=t.streamIds?this.Le.encode([Gt.StreamInvocation,t.headers||{},t.invocationId,t.target,t.arguments,t.streamIds]):this.Le.encode([Gt.StreamInvocation,t.headers||{},t.invocationId,t.target,t.arguments]),an.write(e.slice())}Je(t){const e=this.Le.encode([Gt.StreamItem,t.headers||{},t.invocationId,t.item]);return an.write(e.slice())}ze(t){const e=t.error?this.Re:t.result?this.He:this.Ue;let n;switch(e){case this.Re:n=this.Le.encode([Gt.Completion,t.headers||{},t.invocationId,e,t.error]);break;case this.Ue:n=this.Le.encode([Gt.Completion,t.headers||{},t.invocationId,e]);break;case this.He:n=this.Le.encode([Gt.Completion,t.headers||{},t.invocationId,e,t.result])}return an.write(n.slice())}We(t){const e=this.Le.encode([Gt.CancelInvocation,t.headers||{},t.invocationId]);return an.write(e.slice())}Ve(t){const e=t[1];if("object"!=typeof e)throw new Error("Invalid headers.");return e}}let ln=!1;function fn(){const t=document.querySelector("#blazor-error-ui");t&&(t.style.display="block"),ln||(ln=!0,document.querySelectorAll("#blazor-error-ui .reload").forEach((t=>{t.onclick=function(t){location.reload(),t.preventDefault()}})),document.querySelectorAll("#blazor-error-ui .dismiss").forEach((t=>{t.onclick=function(t){const e=document.querySelector("#blazor-error-ui");e&&(e.style.display="none"),t.preventDefault()}})))}const dn="function"==typeof TextDecoder?new TextDecoder("utf-8"):null,wn=dn?dn.decode.bind(dn):function(t){let e=0;const n=t.length,i=[],r=[];for(;e<n;){const n=t[e++];if(0===n)break;if(0==(128&n))i.push(n);else if(192==(224&n)){const r=63&t[e++];i.push((31&n)<<6|r)}else if(224==(240&n)){const r=63&t[e++],s=63&t[e++];i.push((31&n)<<12|r<<6|s)}else if(240==(248&n)){let r=(7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++];r>65535&&(r-=65536,i.push(r>>>10&1023|55296),r=56320|1023&r),i.push(r)}i.length>1024&&(r.push(String.fromCharCode.apply(null,i)),i.length=0)}return r.push(String.fromCharCode.apply(null,i)),r.join("")},pn=Math.pow(2,32),mn=Math.pow(2,21)-1;function vn(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24}function gn(t,e){return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24>>>0)}function yn(t,e){const n=gn(t,e+4);if(n>mn)throw new Error(`Cannot read uint64 with high order part ${n}, because the result would exceed Number.MAX_SAFE_INTEGER.`);return n*pn+gn(t,e)}class bn{constructor(t){this.batchData=t;const e=new Cn(t);this.arrayRangeReader=new kn(t),this.arrayBuilderSegmentReader=new Tn(t),this.diffReader=new En(t),this.editReader=new Sn(t,e),this.frameReader=new $n(t,e)}updatedComponents(){return vn(this.batchData,this.batchData.length-20)}referenceFrames(){return vn(this.batchData,this.batchData.length-16)}disposedComponentIds(){return vn(this.batchData,this.batchData.length-12)}disposedEventHandlerIds(){return vn(this.batchData,this.batchData.length-8)}updatedComponentsEntry(t,e){const n=t+4*e;return vn(this.batchData,n)}referenceFramesEntry(t,e){return t+20*e}disposedComponentIdsEntry(t,e){const n=t+4*e;return vn(this.batchData,n)}disposedEventHandlerIdsEntry(t,e){const n=t+8*e;return yn(this.batchData,n)}}class En{constructor(t){this.batchDataUint8=t}componentId(t){return vn(this.batchDataUint8,t)}edits(t){return t+4}editsEntry(t,e){return t+16*e}}class Sn{constructor(t,e){this.batchDataUint8=t,this.stringReader=e}editType(t){return vn(this.batchDataUint8,t)}siblingIndex(t){return vn(this.batchDataUint8,t+4)}newTreeIndex(t){return vn(this.batchDataUint8,t+8)}moveToSiblingIndex(t){return vn(this.batchDataUint8,t+8)}removedAttributeName(t){const e=vn(this.batchDataUint8,t+12);return this.stringReader.readString(e)}}class $n{constructor(t,e){this.batchDataUint8=t,this.stringReader=e}frameType(t){return vn(this.batchDataUint8,t)}subtreeLength(t){return vn(this.batchDataUint8,t+4)}elementReferenceCaptureId(t){const e=vn(this.batchDataUint8,t+4);return this.stringReader.readString(e)}componentId(t){return vn(this.batchDataUint8,t+8)}elementName(t){const e=vn(this.batchDataUint8,t+8);return this.stringReader.readString(e)}textContent(t){const e=vn(this.batchDataUint8,t+4);return this.stringReader.readString(e)}markupContent(t){const e=vn(this.batchDataUint8,t+4);return this.stringReader.readString(e)}attributeName(t){const e=vn(this.batchDataUint8,t+4);return this.stringReader.readString(e)}attributeValue(t){const e=vn(this.batchDataUint8,t+8);return this.stringReader.readString(e)}attributeEventHandlerId(t){return yn(this.batchDataUint8,t+12)}}class Cn{constructor(t){this.batchDataUint8=t,this.stringTableStartIndex=vn(t,t.length-4)}readString(t){if(-1===t)return null;{const n=vn(this.batchDataUint8,this.stringTableStartIndex+4*t),i=function(t,e){let n=0,i=0;for(let r=0;r<4;r++){const s=t[e+r];if(n|=(127&s)<<i,s<128)break;i+=7}return n}(this.batchDataUint8,n),r=n+((e=i)<128?1:e<16384?2:e<2097152?3:4),s=new Uint8Array(this.batchDataUint8.buffer,this.batchDataUint8.byteOffset+r,i);return wn(s)}var e}}class kn{constructor(t){this.batchDataUint8=t}count(t){return vn(this.batchDataUint8,t)}values(t){return t+4}}class Tn{constructor(t){this.batchDataUint8=t}offset(t){return 0}count(t){return vn(this.batchDataUint8,t)}values(t){return t+4}}var In;!function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(In||(In={}));class An{constructor(t,e){this.nextBatchId=2,this.browserRendererId=t,this.logger=e}static getOrCreate(t){return An.instance||(An.instance=new An(0,t)),this.instance}async processBatch(t,e,n){if(t<this.nextBatchId)return await this.completeBatch(n,t),void this.logger.log(In.Debug,`Batch ${t} already processed. Waiting for batch ${this.nextBatchId}.`);if(t>this.nextBatchId)return this.fatalError?(this.logger.log(In.Debug,`Received a new batch ${t} but errored out on a previous batch ${this.nextBatchId-1}`),void await n.send("OnRenderCompleted",this.nextBatchId-1,this.fatalError.toString())):void this.logger.log(In.Debug,`Waiting for batch ${this.nextBatchId}. Batch ${t} not processed.`);try{this.nextBatchId++,this.logger.log(In.Debug,`Applying batch ${t}.`),function(t,e){const n=ft[t];if(!n)throw new Error(`There is no browser renderer with ID ${t}.`);const i=e.arrayRangeReader,r=e.updatedComponents(),s=i.values(r),o=i.count(r),c=e.referenceFrames(),a=i.values(c),h=e.diffReader;for(let t=0;t<o;t++){const i=e.updatedComponentsEntry(s,t),r=h.componentId(i),o=h.edits(i);n.updateComponent(e,r,o,a)}const u=e.disposedComponentIds(),l=i.values(u),f=i.count(u);for(let t=0;t<f;t++){const i=e.disposedComponentIdsEntry(l,t);n.disposeComponent(i)}const d=e.disposedEventHandlerIds(),w=i.values(d),p=i.count(d);for(let t=0;t<p;t++){const i=e.disposedEventHandlerIdsEntry(w,t);n.disposeEventHandler(i)}dt&&(dt=!1,window.scrollTo&&window.scrollTo(0,0))}(this.browserRendererId,new bn(e)),await this.completeBatch(n,t)}catch(e){throw this.fatalError=e.toString(),this.logger.log(In.Error,`There was an error applying batch ${t}.`),n.send("OnRenderCompleted",t,e.toString()),e}}getLastBatchid(){return this.nextBatchId-1}async completeBatch(t,e){try{await t.send("OnRenderCompleted",e,null)}catch{this.logger.log(In.Warning,`Failed to deliver completion notification for render '${e}'.`)}}}class _n{log(t,e){}}_n.instance=new _n;class Pn{constructor(t){this.minLevel=t}log(t,e){if(t>=this.minLevel){const n=`[${(new Date).toISOString()}] ${In[t]}: ${e}`;switch(t){case In.Critical:case In.Error:console.error(n);break;case In.Warning:console.warn(n);break;case In.Information:console.info(n);break;default:console.log(n)}}}}class xn{constructor(t,e){this.circuitId=void 0,this.components=t,this.applicationState=e}reconnect(t){if(!this.circuitId)throw new Error("Circuit host not initialized.");return t.state!==Yt.Connected?Promise.resolve(!1):t.invoke("ConnectCircuit",this.circuitId)}initialize(t){if(this.circuitId)throw new Error(`Circuit host '${this.circuitId}' already initialized.`);this.circuitId=t}async startCircuit(t){if(t.state!==Yt.Connected)return!1;const e=await t.invoke("StartCircuit",vt.getBaseURI(),vt.getLocationHref(),JSON.stringify(this.components.map((t=>t.toRecord()))),this.applicationState||"");return!!e&&(this.initialize(e),!0)}resolveElement(t){const e=function(t){const e=w.get(t);if(e)return w.delete(t),e}(t);if(e)return L(e,!0);const n=Number.parseInt(t);if(!Number.isNaN(n))return function(t,e){if(!t.parentNode)throw new Error(`Comment not connected to the DOM ${t.textContent}`);const n=t.parentNode,i=L(n,!0),r=W(i);return Array.from(n.childNodes).forEach((t=>r.push(t))),t[U]=i,e&&(t[H]=e,L(e)),L(t)}(this.components[n].start,this.components[n].end);throw new Error(`Invalid sequence number or identifier '${t}'.`)}}const Dn={configureSignalR:t=>{},logLevel:In.Warning,reconnectionOptions:{maxRetries:8,retryIntervalMilliseconds:2e4,dialogId:"components-reconnect-modal"}};class Nn{constructor(t,e,n,i){this.maxRetries=e,this.document=n,this.logger=i,this.addedToDom=!1,this.modal=this.document.createElement("div"),this.modal.id=t,this.maxRetries=e,this.modal.style.cssText=["position: fixed","top: 0","right: 0","bottom: 0","left: 0","z-index: 1050","display: none","overflow: hidden","background-color: #fff","opacity: 0.8","text-align: center","font-weight: bold","transition: visibility 0s linear 500ms"].join(";"),this.message=this.document.createElement("h5"),this.message.style.cssText="margin-top: 20px",this.button=this.document.createElement("button"),this.button.style.cssText="margin:5px auto 5px",this.button.textContent="Retry";const r=this.document.createElement("a");r.addEventListener("click",(()=>location.reload())),r.textContent="reload",this.reloadParagraph=this.document.createElement("p"),this.reloadParagraph.textContent="Alternatively, ",this.reloadParagraph.appendChild(r),this.modal.appendChild(this.message),this.modal.appendChild(this.button),this.modal.appendChild(this.reloadParagraph),this.loader=this.getLoader(),this.message.after(this.loader),this.button.addEventListener("click",(async()=>{this.show();try{await Mt.reconnect()||this.rejected()}catch(t){this.logger.log(In.Error,t),this.failed()}}))}show(){this.addedToDom||(this.addedToDom=!0,this.document.body.appendChild(this.modal)),this.modal.style.display="block",this.loader.style.display="inline-block",this.button.style.display="none",this.reloadParagraph.style.display="none",this.message.textContent="Attempting to reconnect to the server...",this.modal.style.visibility="hidden",setTimeout((()=>{this.modal.style.visibility="visible"}),0)}update(t){this.message.textContent=`Attempting to reconnect to the server: ${t} of ${this.maxRetries}`}hide(){this.modal.style.display="none"}failed(){this.button.style.display="block",this.reloadParagraph.style.display="none",this.loader.style.display="none";const t=this.document.createTextNode("Reconnection failed. Try "),e=this.document.createElement("a");e.textContent="reloading",e.setAttribute("href",""),e.addEventListener("click",(()=>location.reload()));const n=this.document.createTextNode(" the page if you're unable to reconnect.");this.message.replaceChildren(t,e,n)}rejected(){this.button.style.display="none",this.reloadParagraph.style.display="none",this.loader.style.display="none";const t=this.document.createTextNode("Could not reconnect to the server. "),e=this.document.createElement("a");e.textContent="Reload",e.setAttribute("href",""),e.addEventListener("click",(()=>location.reload()));const n=this.document.createTextNode(" the page to restore functionality.");this.message.replaceChildren(t,e,n)}getLoader(){const t=this.document.createElement("div");return t.style.cssText=["border: 0.3em solid #f3f3f3","border-top: 0.3em solid #3498db","border-radius: 50%","width: 2em","height: 2em","display: inline-block"].join(";"),t.animate([{transform:"rotate(0deg)"},{transform:"rotate(360deg)"}],{duration:2e3,iterations:1/0}),t}}class Mn{constructor(t,e,n){this.dialog=t,this.maxRetries=e,this.document=n,this.document=n;const i=this.document.getElementById(Mn.MaxRetriesId);i&&(i.innerText=this.maxRetries.toString())}show(){this.removeClasses(),this.dialog.classList.add(Mn.ShowClassName)}update(t){const e=this.document.getElementById(Mn.CurrentAttemptId);e&&(e.innerText=t.toString())}hide(){this.removeClasses(),this.dialog.classList.add(Mn.HideClassName)}failed(){this.removeClasses(),this.dialog.classList.add(Mn.FailedClassName)}rejected(){this.removeClasses(),this.dialog.classList.add(Mn.RejectedClassName)}removeClasses(){this.dialog.classList.remove(Mn.ShowClassName,Mn.HideClassName,Mn.FailedClassName,Mn.RejectedClassName)}}Mn.ShowClassName="components-reconnect-show",Mn.HideClassName="components-reconnect-hide",Mn.FailedClassName="components-reconnect-failed",Mn.RejectedClassName="components-reconnect-rejected",Mn.MaxRetriesId="components-reconnect-max-retries",Mn.CurrentAttemptId="components-reconnect-current-attempt";class Rn{constructor(t,e,n){this.Ge=null,this.H=t,this.Ye=e,this.Ze=n||Mt.reconnect}onConnectionDown(t,e){if(!this.Ye){const e=document.getElementById(t.dialogId);this.Ye=e?new Mn(e,t.maxRetries,document):new Nn(t.dialogId,t.maxRetries,document,this.H)}this.Ge||(this.Ge=new Un(t,this.H,this.Ze,this.Ye))}onConnectionUp(){this.Ge&&(this.Ge.dispose(),this.Ge=null)}}class Un{constructor(t,e,n,i){this.logger=e,this.reconnectCallback=n,this.isDisposed=!1,this.reconnectDisplay=i,this.reconnectDisplay.show(),this.attemptPeriodicReconnection(t)}dispose(){this.isDisposed=!0,this.reconnectDisplay.hide()}async attemptPeriodicReconnection(t){for(let e=0;e<t.maxRetries;e++){this.reconnectDisplay.update(e+1);const n=0===e&&t.retryIntervalMilliseconds>Un.MaximumFirstRetryInterval?Un.MaximumFirstRetryInterval:t.retryIntervalMilliseconds;if(await this.delay(n),this.isDisposed)break;try{return await this.reconnectCallback()?void 0:void this.reconnectDisplay.rejected()}catch(t){this.logger.log(In.Error,t)}}this.reconnectDisplay.failed()}delay(t){return new Promise((e=>setTimeout(e,t)))}}Un.MaximumFirstRetryInterval=3e3;const Hn=/^\s*Blazor-Component-State:(?<state>[a-zA-Z0-9+/=]+)$/;function Ln(t){var e;if(t.nodeType===Node.COMMENT_NODE){const n=t.textContent||"",i=Hn.exec(n),r=i&&i.groups&&i.groups.state;return r&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t)),r}if(!t.hasChildNodes())return;const n=t.childNodes;for(let t=0;t<n.length;t++){const e=Ln(n[t]);if(e)return e}}function On(t,e){if(!t.hasChildNodes())return[];const n=[],i=new zn(t.childNodes);for(;i.next()&&i.currentElement;){const t=Bn(i,e);if(t)n.push(t);else{const t=On(i.currentElement,e);for(let e=0;e<t.length;e++){const i=t[e];n.push(i)}}}return n}const jn=new RegExp(/^\s*Blazor:[^{]*(?<descriptor>.*)$/);function Bn(t,e){const n=t.currentElement;if(n&&n.nodeType===Node.COMMENT_NODE&&n.textContent){const i=jn.exec(n.textContent),r=i&&i.groups&&i.groups.descriptor;if(!r)return;try{const i=function(t){const e=JSON.parse(t),{type:n}=e;if("server"!==n&&"webassembly"!==n)throw new Error(`Invalid component type '${n}'.`);return e}(r);switch(e){case"webassembly":return function(t,e,n){const{type:i,assembly:r,typeName:s,parameterDefinitions:o,parameterValues:c,prerenderId:a}=t;if("webassembly"===i){if(!r)throw new Error("assembly must be defined when using a descriptor.");if(!s)throw new Error("typeName must be defined when using a descriptor.");if(a){const t=Fn(a,n);if(!t)throw new Error(`Could not find an end component comment for '${e}'`);return{type:i,assembly:r,typeName:s,parameterDefinitions:o&&atob(o),parameterValues:c&&atob(c),start:e,prerenderId:a,end:t}}return{type:i,assembly:r,typeName:s,parameterDefinitions:o&&atob(o),parameterValues:c&&atob(c),start:e}}}(i,n,t);case"server":return function(t,e,n){const{type:i,descriptor:r,sequence:s,prerenderId:o}=t;if("server"===i){if(!r)throw new Error("descriptor must be defined when using a descriptor.");if(void 0===s)throw new Error("sequence must be defined when using a descriptor.");if(!Number.isInteger(s))throw new Error(`Error parsing the sequence '${s}' for component '${JSON.stringify(t)}'`);if(o){const t=Fn(o,n);if(!t)throw new Error(`Could not find an end component comment for '${e}'`);return{type:i,sequence:s,descriptor:r,start:e,prerenderId:o,end:t}}return{type:i,sequence:s,descriptor:r,start:e}}}(i,n,t)}}catch(t){throw new Error(`Found malformed component comment at ${n.textContent}`)}}}function Fn(t,e){for(;e.next()&&e.currentElement;){const n=e.currentElement;if(n.nodeType!==Node.COMMENT_NODE)continue;if(!n.textContent)continue;const i=jn.exec(n.textContent),r=i&&i[1];if(r)return Jn(r,t),n}}function Jn(t,e){const n=JSON.parse(t);if(1!==Object.keys(n).length)throw new Error(`Invalid end of component comment: '${t}'`);const i=n.prerenderId;if(!i)throw new Error(`End of component comment must have a value for the prerendered property: '${t}'`);if(i!==e)throw new Error(`End of component comment prerendered property must match the start comment prerender id: '${e}', '${i}'`)}class zn{constructor(t){this.childNodes=t,this.currentIndex=-1,this.length=t.length}next(){return this.currentIndex++,this.currentIndex<this.length?(this.currentElement=this.childNodes[this.currentIndex],!0):(this.currentElement=void 0,!1)}}class Wn{constructor(t,e,n,i,r){this.type=t,this.start=e,this.end=n,this.sequence=i,this.descriptor=r}toRecord(){return{type:this.type,sequence:this.sequence,descriptor:this.descriptor}}}class qn{constructor(t,e,n,i,r,s,o){this.id=qn.globalId++,this.type=t,this.assembly=i,this.typeName=r,this.parameterDefinitions=s,this.parameterValues=o,this.start=e,this.end=n}}qn.globalId=1;class Vn{constructor(){this.afterStartedCallbacks=[]}async importInitializersAsync(t,e){await Promise.all(t.map((t=>async function(t,n){const i=function(t){const e=document.baseURI;return e.endsWith("/")?`${e}${t}`:`${e}/${t}`}(n),r=await import(i);if(void 0===r)return;const{beforeStart:s,afterStarted:o}=r;return o&&t.afterStartedCallbacks.push(o),s?s(...e):void 0}(this,t))))}async invokeAfterStartedCallbacks(t){await C,await Promise.all(this.afterStartedCallbacks.map((e=>e(t))))}}let Xn,Kn=!1,Gn=!1;async function Yn(t){if(Gn)throw new Error("Blazor has already started.");Gn=!0;const e=function(t){const e={...Dn,...t};return t&&t.reconnectionOptions&&(e.reconnectionOptions={...Dn.reconnectionOptions,...t.reconnectionOptions}),e}(t),n=await async function(t){const e=await fetch("_blazor/initializers",{method:"GET",credentials:"include",cache:"no-cache"}),n=await e.json(),i=new Vn;return await i.importInitializersAsync(n,[t]),i}(e),i=new Pn(e.logLevel);Mt.reconnect=async t=>{if(Kn)return!1;const n=t||await Zn(e,i,o);return await o.reconnect(n)?(e.reconnectionHandler.onConnectionUp(),!0):(i.log(In.Information,"Reconnection attempt to the circuit was rejected by the server. This may indicate that the associated state is no longer available on the server."),!1)},Mt.defaultReconnectionHandler=new Rn(i),e.reconnectionHandler=e.reconnectionHandler||Mt.defaultReconnectionHandler,i.log(In.Information,"Starting up Blazor server-side application.");const r=function(t,e){return function(t){const e=On(t,"server"),n=[];for(let t=0;t<e.length;t++){const i=e[t],r=new Wn(i.type,i.start,i.end,i.sequence,i.descriptor);n.push(r)}return n.sort(((t,e)=>t.sequence-e.sequence))}(t)}(document),s=Ln(document),o=new xn(r,s||"");Mt.D.navigationManager.listenForNavigationEvents(((t,e)=>Xn.send("OnLocationChanged",t,e))),Mt.D.forceCloseConnection=()=>Xn.stop(),Mt.D.sendJSDataStream=(t,e,n)=>function(t,e,n,i){setTimeout((async()=>{let r=5,s=(new Date).valueOf();try{const o=e instanceof Blob?e.size:e.byteLength;let c=0,a=0;for(;c<o;){const h=Math.min(i,o-c),u=await Dt(e,c,h);if(r--,r>1)await t.send("ReceiveJSDataChunk",n,a,u,null);else{if(!await t.invoke("ReceiveJSDataChunk",n,a,u,null))break;const e=(new Date).valueOf(),i=e-s;s=e,r=Math.max(1,Math.round(500/Math.max(1,i)))}c+=h,a++}}catch(e){await t.send("ReceiveJSDataChunk",n,-1,null,e.toString())}}),0)}(Xn,t,e,n);const c=await Zn(e,i,o);if(!await o.startCircuit(c))return void i.log(In.Error,"Failed to start the circuit.");let a=!1;const h=()=>{if(!a){const t=new FormData,e=o.circuitId;t.append("circuitId",e),a=navigator.sendBeacon("_blazor/disconnect",t)}};Mt.disconnect=h,window.addEventListener("unload",h,{capture:!1,once:!0}),i.log(In.Information,"Blazor server-side application started."),n.invokeAfterStartedCallbacks(Mt)}async function Zn(e,n,i){var r,s;const o=new un;o.name="blazorpack";const c=(new _e).withUrl("_blazor").withHubProtocol(o);e.configureSignalR(c);const a=c.build();a.on("JS.AttachComponent",((t,e)=>function(t,e,n,i){let r=ft[0];r||(r=new ot(0),ft[0]=r),r.attachRootComponentToLogicalElement(n,e,!1)}(0,i.resolveElement(e),t))),a.on("JS.BeginInvokeJS",t.jsCallDispatcher.beginInvokeJSFromDotNet),a.on("JS.EndInvokeDotNet",t.jsCallDispatcher.endInvokeDotNetFromJS),a.on("JS.ReceiveByteArray",t.jsCallDispatcher.receiveByteArray),a.on("JS.BeginTransmitStream",(e=>{const n=new ReadableStream({start(t){a.stream("SendDotNetStreamToJS",e).subscribe({next:e=>t.enqueue(e),complete:()=>t.close(),error:e=>t.error(e)})}});t.jsCallDispatcher.supplyDotNetStream(e,n)}));const h=An.getOrCreate(n);a.on("JS.RenderBatch",((t,e)=>{n.log(In.Debug,`Received render batch with id ${t} and ${e.byteLength} bytes.`),h.processBatch(t,e,a)})),a.onclose((t=>!Kn&&e.reconnectionHandler.onConnectionDown(e.reconnectionOptions,t))),a.on("JS.Error",(t=>{Kn=!0,Qn(a,t,n),fn()}));try{await a.start(),Xn=a}catch(t){if(Qn(a,t,n),"FailedToNegotiateWithServerError"===t.errorType)throw t;fn(),t.innerErrors&&(t.innerErrors.some((t=>"UnsupportedTransportError"===t.errorType&&t.transport===Xt.WebSockets))?n.log(In.Error,"Unable to connect, please ensure you are using an updated browser that supports WebSockets."):t.innerErrors.some((t=>"FailedToStartTransportError"===t.errorType&&t.transport===Xt.WebSockets))?n.log(In.Error,"Unable to connect, please ensure WebSockets are available. A VPN or proxy may be blocking the connection."):t.innerErrors.some((t=>"DisabledTransportError"===t.errorType&&t.transport===Xt.LongPolling))&&n.log(In.Error,"Unable to initiate a SignalR connection to the server. This might be because the server is not configured to support WebSockets. For additional details, visit https://aka.ms/blazor-server-websockets-error."))}return(null===(s=null===(r=a.connection)||void 0===r?void 0:r.features)||void 0===s?void 0:s.inherentKeepAlive)&&n.log(In.Warning,"Failed to connect via WebSockets, using the Long Polling fallback transport. This may be due to a VPN or proxy blocking the connection. To troubleshoot this, visit https://aka.ms/blazor-server-using-fallback-long-polling."),t.attachDispatcher({beginInvokeDotNetFromJS:(t,e,n,i,r)=>{a.send("BeginInvokeDotNetFromJS",t?t.toString():null,e,n,i||0,r)},endInvokeJSFromDotNet:(t,e,n)=>{a.send("EndInvokeJSFromDotNet",t,e,n)},sendByteArray:(t,e)=>{a.send("ReceiveByteArray",t,e)}}),a}function Qn(t,e,n){n.log(In.Error,e),t&&t.stop()}Mt.start=Yn,document&&document.currentScript&&"false"!==document.currentScript.getAttribute("autostart")&&Yn()})();