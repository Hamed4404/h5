{"version":3,"file":"blazor.server.js","sources":["../../../../JSInterop/Microsoft.JSInterop.JS/src/dist/src/Microsoft.JSInterop.js","../../src/Rendering/RenderBatch/RenderBatch.ts","../../src/Rendering/Events/EventFieldInfo.ts","../../src/Rendering/Events/EventTypes.ts","../../src/Rendering/JSRootComponents.ts","../../src/Rendering/WebRendererInteropMethods.ts","../../src/Rendering/Events/EventDelegator.ts","../../src/Rendering/LogicalElements.ts","../../src/Rendering/ElementReferenceCapture.ts","../../src/Rendering/DomSpecialPropertyUtil.ts","../../src/Rendering/BrowserRenderer.ts","../../src/Services/NavigationManager.ts","../../src/Services/NavigationUtils.ts","../../src/Rendering/Renderer.ts","../../src/DomWrapper.ts","../../src/Virtualize.ts","../../src/PageTitle.ts","../../src/InputFile.ts","../../src/NavigationLock.ts","../../src/StreamingInterop.ts","../../src/GlobalExports.ts","../../src/Platform/Logging/Logger.ts","../../src/Platform/Circuits/CircuitStartOptions.ts","../../src/Platform/Logging/Loggers.ts","../../src/Services/ComponentDescriptorDiscovery.ts","../../../../SignalR/clients/ts/signalr/dist/esm/Errors.js","../../../../SignalR/clients/ts/signalr/dist/esm/HttpClient.js","../../../../SignalR/clients/ts/signalr/dist/esm/ILogger.js","../../../../SignalR/clients/ts/signalr/dist/esm/Loggers.js","../../../../SignalR/clients/ts/signalr/dist/esm/Utils.js","../../../../SignalR/clients/ts/signalr/dist/esm/FetchHttpClient.js","../../../../SignalR/clients/ts/signalr/dist/esm/DynamicImports.js","../../../../SignalR/clients/ts/signalr/dist/esm/XhrHttpClient.js","../../../../SignalR/clients/ts/signalr/dist/esm/DefaultHttpClient.js","../../../../SignalR/clients/ts/signalr/dist/esm/TextMessageFormat.js","../../../../SignalR/clients/ts/signalr/dist/esm/HandshakeProtocol.js","../../../../SignalR/clients/ts/signalr/dist/esm/IHubProtocol.js","../../../../SignalR/clients/ts/signalr/dist/esm/HubConnection.js","../../../../SignalR/clients/ts/signalr/dist/esm/Subject.js","../../../../SignalR/clients/ts/signalr/dist/esm/MessageBuffer.js","../../../../SignalR/clients/ts/signalr/dist/esm/DefaultReconnectPolicy.js","../../../../SignalR/clients/ts/signalr/dist/esm/HeaderNames.js","../../../../SignalR/clients/ts/signalr/dist/esm/AccessTokenHttpClient.js","../../../../SignalR/clients/ts/signalr/dist/esm/ITransport.js","../../../../SignalR/clients/ts/signalr/dist/esm/AbortController.js","../../../../SignalR/clients/ts/signalr/dist/esm/LongPollingTransport.js","../../../../SignalR/clients/ts/signalr/dist/esm/ServerSentEventsTransport.js","../../../../SignalR/clients/ts/signalr/dist/esm/WebSocketTransport.js","../../../../SignalR/clients/ts/signalr/dist/esm/HttpConnection.js","../../../../SignalR/clients/ts/signalr/dist/esm/JsonHubProtocol.js","../../../../SignalR/clients/ts/signalr/dist/esm/HubConnectionBuilder.js","../../src/Rendering/WebRendererId.ts","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/utils/int.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/utils/utf8.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/DecodeError.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/ExtData.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/timestamp.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/ExtensionCodec.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/utils/typedArrays.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/Encoder.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/utils/prettyByte.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/CachedKeyDecoder.mjs","../../../../../node_modules/@msgpack/msgpack/dist.es5+esm/Decoder.mjs","../../../../SignalR/clients/ts/signalr-protocol-msgpack/dist/esm/BinaryMessageFormat.js","../../../../SignalR/clients/ts/signalr-protocol-msgpack/dist/esm/MessagePackHubProtocol.js","../../../../SignalR/clients/ts/signalr-protocol-msgpack/dist/esm/Utils.js","../../src/Utf8Decoder.ts","../../src/BinaryDecoder.ts","../../src/Rendering/RenderBatch/OutOfProcessRenderBatch.ts","../../src/Platform/Circuits/RenderQueue.ts","../../src/BootErrors.ts","../../src/Boot.Server.Common.ts","../../src/Platform/Circuits/CircuitManager.ts","../../src/Platform/Circuits/CircuitStreamingInterop.ts","../../src/Platform/Circuits/DefaultReconnectDisplay.ts","../../src/Platform/Circuits/UserSpecifiedDisplay.ts","../../src/Platform/Circuits/DefaultReconnectionHandler.ts","../../src/JSInitializers/JSInitializers.ts","../../src/JSInitializers/JSInitializers.Server.ts","../../src/Services/InitialRootComponentsList.ts","../../src/Services/JSEventRegistry.ts","../../src/Boot.Server.ts","../../src/BootCommon.ts"],"sourcesContent":["// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n// This is a single-file self-contained module to avoid the need for a Webpack build\r\nexport var DotNet;\r\n(function (DotNet) {\r\n    const jsonRevivers = [];\r\n    const jsObjectIdKey = \"__jsObjectId\";\r\n    const dotNetObjectRefKey = \"__dotNetObject\";\r\n    const byteArrayRefKey = \"__byte[]\";\r\n    const dotNetStreamRefKey = \"__dotNetStream\";\r\n    const jsStreamReferenceLengthKey = \"__jsStreamReferenceLength\";\r\n    // If undefined, no dispatcher has been attached yet.\r\n    // If null, this means more than one dispatcher was attached, so no default can be determined.\r\n    // Otherwise, there was only one dispatcher registered. We keep track of this instance to keep legacy APIs working.\r\n    let defaultCallDispatcher;\r\n    // Provides access to the \"current\" call dispatcher without having to flow it through nested function calls.\r\n    let currentCallDispatcher;\r\n    class JSObject {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        constructor(_jsObject) {\r\n            this._jsObject = _jsObject;\r\n            this._cachedFunctions = new Map();\r\n        }\r\n        findFunction(identifier) {\r\n            const cachedFunction = this._cachedFunctions.get(identifier);\r\n            if (cachedFunction) {\r\n                return cachedFunction;\r\n            }\r\n            let result = this._jsObject;\r\n            let lastSegmentValue;\r\n            identifier.split(\".\").forEach(segment => {\r\n                if (segment in result) {\r\n                    lastSegmentValue = result;\r\n                    result = result[segment];\r\n                }\r\n                else {\r\n                    throw new Error(`Could not find '${identifier}' ('${segment}' was undefined).`);\r\n                }\r\n            });\r\n            if (result instanceof Function) {\r\n                result = result.bind(lastSegmentValue);\r\n                this._cachedFunctions.set(identifier, result);\r\n                return result;\r\n            }\r\n            throw new Error(`The value '${identifier}' is not a function.`);\r\n        }\r\n        getWrappedObject() {\r\n            return this._jsObject;\r\n        }\r\n    }\r\n    const windowJSObjectId = 0;\r\n    const cachedJSObjectsById = {\r\n        [windowJSObjectId]: new JSObject(window)\r\n    };\r\n    cachedJSObjectsById[windowJSObjectId]._cachedFunctions.set(\"import\", (url) => {\r\n        // In most cases developers will want to resolve dynamic imports relative to the base HREF.\r\n        // However since we're the one calling the import keyword, they would be resolved relative to\r\n        // this framework bundle URL. Fix this by providing an absolute URL.\r\n        if (typeof url === \"string\" && url.startsWith(\"./\")) {\r\n            url = new URL(url.substr(2), document.baseURI).toString();\r\n        }\r\n        return import(/* webpackIgnore: true */ url);\r\n    });\r\n    let nextJsObjectId = 1; // Start at 1 because zero is reserved for \"window\"\r\n    /**\r\n     * Creates a .NET call dispatcher to use for handling invocations between JavaScript and a .NET runtime.\r\n     *\r\n     * @param dotNetCallDispatcher An object that can dispatch calls from JavaScript to a .NET runtime.\r\n     */\r\n    function attachDispatcher(dotNetCallDispatcher) {\r\n        const result = new CallDispatcher(dotNetCallDispatcher);\r\n        if (defaultCallDispatcher === undefined) {\r\n            // This was the first dispatcher registered, so it becomes the default. This exists purely for\r\n            // backwards compatibility.\r\n            defaultCallDispatcher = result;\r\n        }\r\n        else if (defaultCallDispatcher) {\r\n            // There is already a default dispatcher. Now that there are multiple to choose from, there can\r\n            // be no acceptable default, so we nullify the default dispatcher.\r\n            defaultCallDispatcher = null;\r\n        }\r\n        return result;\r\n    }\r\n    DotNet.attachDispatcher = attachDispatcher;\r\n    /**\r\n     * Adds a JSON reviver callback that will be used when parsing arguments received from .NET.\r\n     * @param reviver The reviver to add.\r\n     */\r\n    function attachReviver(reviver) {\r\n        jsonRevivers.push(reviver);\r\n    }\r\n    DotNet.attachReviver = attachReviver;\r\n    /**\r\n     * Invokes the specified .NET public method synchronously. Not all hosting scenarios support\r\n     * synchronous invocation, so if possible use invokeMethodAsync instead.\r\n     *\r\n     * @deprecated Use DotNetObject to invoke instance methods instead.\r\n     * @param assemblyName The short name (without key/version or .dll extension) of the .NET assembly containing the method.\r\n     * @param methodIdentifier The identifier of the method to invoke. The method must have a [JSInvokable] attribute specifying this identifier.\r\n     * @param args Arguments to pass to the method, each of which must be JSON-serializable.\r\n     * @returns The result of the operation.\r\n     */\r\n    function invokeMethod(assemblyName, methodIdentifier, ...args) {\r\n        const dispatcher = getDefaultCallDispatcher();\r\n        return dispatcher.invokeDotNetStaticMethod(assemblyName, methodIdentifier, ...args);\r\n    }\r\n    DotNet.invokeMethod = invokeMethod;\r\n    /**\r\n     * Invokes the specified .NET public method asynchronously.\r\n     *\r\n     * @deprecated Use DotNetObject to invoke instance methods instead.\r\n     * @param assemblyName The short name (without key/version or .dll extension) of the .NET assembly containing the method.\r\n     * @param methodIdentifier The identifier of the method to invoke. The method must have a [JSInvokable] attribute specifying this identifier.\r\n     * @param args Arguments to pass to the method, each of which must be JSON-serializable.\r\n     * @returns A promise representing the result of the operation.\r\n     */\r\n    function invokeMethodAsync(assemblyName, methodIdentifier, ...args) {\r\n        const dispatcher = getDefaultCallDispatcher();\r\n        return dispatcher.invokeDotNetStaticMethodAsync(assemblyName, methodIdentifier, ...args);\r\n    }\r\n    DotNet.invokeMethodAsync = invokeMethodAsync;\r\n    /**\r\n     * Creates a JavaScript object reference that can be passed to .NET via interop calls.\r\n     *\r\n     * @param jsObject The JavaScript Object used to create the JavaScript object reference.\r\n     * @returns The JavaScript object reference (this will be the same instance as the given object).\r\n     * @throws Error if the given value is not an Object.\r\n     */\r\n    function createJSObjectReference(jsObject) {\r\n        if (jsObject && typeof jsObject === \"object\") {\r\n            cachedJSObjectsById[nextJsObjectId] = new JSObject(jsObject);\r\n            const result = {\r\n                [jsObjectIdKey]: nextJsObjectId\r\n            };\r\n            nextJsObjectId++;\r\n            return result;\r\n        }\r\n        throw new Error(`Cannot create a JSObjectReference from the value '${jsObject}'.`);\r\n    }\r\n    DotNet.createJSObjectReference = createJSObjectReference;\r\n    /**\r\n     * Creates a JavaScript data reference that can be passed to .NET via interop calls.\r\n     *\r\n     * @param streamReference The ArrayBufferView or Blob used to create the JavaScript stream reference.\r\n     * @returns The JavaScript data reference (this will be the same instance as the given object).\r\n     * @throws Error if the given value is not an Object or doesn't have a valid byteLength.\r\n     */\r\n    function createJSStreamReference(streamReference) {\r\n        let length = -1;\r\n        // If we're given a raw Array Buffer, we interpret it as a `Uint8Array` as\r\n        // ArrayBuffers' aren't directly readable.\r\n        if (streamReference instanceof ArrayBuffer) {\r\n            streamReference = new Uint8Array(streamReference);\r\n        }\r\n        if (streamReference instanceof Blob) {\r\n            length = streamReference.size;\r\n        }\r\n        else if (streamReference.buffer instanceof ArrayBuffer) {\r\n            if (streamReference.byteLength === undefined) {\r\n                throw new Error(`Cannot create a JSStreamReference from the value '${streamReference}' as it doesn't have a byteLength.`);\r\n            }\r\n            length = streamReference.byteLength;\r\n        }\r\n        else {\r\n            throw new Error(\"Supplied value is not a typed array or blob.\");\r\n        }\r\n        const result = {\r\n            [jsStreamReferenceLengthKey]: length\r\n        };\r\n        try {\r\n            const jsObjectReference = createJSObjectReference(streamReference);\r\n            result[jsObjectIdKey] = jsObjectReference[jsObjectIdKey];\r\n        }\r\n        catch (error) {\r\n            throw new Error(`Cannot create a JSStreamReference from the value '${streamReference}'.`);\r\n        }\r\n        return result;\r\n    }\r\n    DotNet.createJSStreamReference = createJSStreamReference;\r\n    /**\r\n     * Disposes the given JavaScript object reference.\r\n     *\r\n     * @param jsObjectReference The JavaScript Object reference.\r\n     */\r\n    function disposeJSObjectReference(jsObjectReference) {\r\n        const id = jsObjectReference && jsObjectReference[jsObjectIdKey];\r\n        if (typeof id === \"number\") {\r\n            disposeJSObjectReferenceById(id);\r\n        }\r\n    }\r\n    DotNet.disposeJSObjectReference = disposeJSObjectReference;\r\n    function parseJsonWithRevivers(callDispatcher, json) {\r\n        currentCallDispatcher = callDispatcher;\r\n        const result = json ? JSON.parse(json, (key, initialValue) => {\r\n            // Invoke each reviver in order, passing the output from the previous reviver,\r\n            // so that each one gets a chance to transform the value\r\n            return jsonRevivers.reduce((latestValue, reviver) => reviver(key, latestValue), initialValue);\r\n        }) : null;\r\n        currentCallDispatcher = undefined;\r\n        return result;\r\n    }\r\n    function getDefaultCallDispatcher() {\r\n        if (defaultCallDispatcher === undefined) {\r\n            throw new Error(\"No call dispatcher has been set.\");\r\n        }\r\n        else if (defaultCallDispatcher === null) {\r\n            throw new Error(\"There are multiple .NET runtimes present, so a default dispatcher could not be resolved. Use DotNetObject to invoke .NET instance methods.\");\r\n        }\r\n        else {\r\n            return defaultCallDispatcher;\r\n        }\r\n    }\r\n    /**\r\n     * Represents the type of result expected from a JS interop call.\r\n     */\r\n    // eslint-disable-next-line no-shadow\r\n    let JSCallResultType;\r\n    (function (JSCallResultType) {\r\n        JSCallResultType[JSCallResultType[\"Default\"] = 0] = \"Default\";\r\n        JSCallResultType[JSCallResultType[\"JSObjectReference\"] = 1] = \"JSObjectReference\";\r\n        JSCallResultType[JSCallResultType[\"JSStreamReference\"] = 2] = \"JSStreamReference\";\r\n        JSCallResultType[JSCallResultType[\"JSVoidResult\"] = 3] = \"JSVoidResult\";\r\n    })(JSCallResultType = DotNet.JSCallResultType || (DotNet.JSCallResultType = {}));\r\n    class CallDispatcher {\r\n        // eslint-disable-next-line no-empty-function\r\n        constructor(_dotNetCallDispatcher) {\r\n            this._dotNetCallDispatcher = _dotNetCallDispatcher;\r\n            this._byteArraysToBeRevived = new Map();\r\n            this._pendingDotNetToJSStreams = new Map();\r\n            this._pendingAsyncCalls = {};\r\n            this._nextAsyncCallId = 1; // Start at 1 because zero signals \"no response needed\"\r\n        }\r\n        getDotNetCallDispatcher() {\r\n            return this._dotNetCallDispatcher;\r\n        }\r\n        invokeJSFromDotNet(identifier, argsJson, resultType, targetInstanceId) {\r\n            const args = parseJsonWithRevivers(this, argsJson);\r\n            const jsFunction = findJSFunction(identifier, targetInstanceId);\r\n            const returnValue = jsFunction(...(args || []));\r\n            const result = createJSCallResult(returnValue, resultType);\r\n            return result === null || result === undefined\r\n                ? null\r\n                : stringifyArgs(this, result);\r\n        }\r\n        beginInvokeJSFromDotNet(asyncHandle, identifier, argsJson, resultType, targetInstanceId) {\r\n            // Coerce synchronous functions into async ones, plus treat\r\n            // synchronous exceptions the same as async ones\r\n            const promise = new Promise(resolve => {\r\n                const args = parseJsonWithRevivers(this, argsJson);\r\n                const jsFunction = findJSFunction(identifier, targetInstanceId);\r\n                const synchronousResultOrPromise = jsFunction(...(args || []));\r\n                resolve(synchronousResultOrPromise);\r\n            });\r\n            // We only listen for a result if the caller wants to be notified about it\r\n            if (asyncHandle) {\r\n                // On completion, dispatch result back to .NET\r\n                // Not using \"await\" because it codegens a lot of boilerplate\r\n                promise.\r\n                    then(result => stringifyArgs(this, [\r\n                    asyncHandle,\r\n                    true,\r\n                    createJSCallResult(result, resultType)\r\n                ])).\r\n                    then(result => this._dotNetCallDispatcher.endInvokeJSFromDotNet(asyncHandle, true, result), error => this._dotNetCallDispatcher.endInvokeJSFromDotNet(asyncHandle, false, JSON.stringify([\r\n                    asyncHandle,\r\n                    false,\r\n                    formatError(error)\r\n                ])));\r\n            }\r\n        }\r\n        endInvokeDotNetFromJS(asyncCallId, success, resultJsonOrExceptionMessage) {\r\n            const resultOrError = success\r\n                ? parseJsonWithRevivers(this, resultJsonOrExceptionMessage)\r\n                : new Error(resultJsonOrExceptionMessage);\r\n            this.completePendingCall(parseInt(asyncCallId, 10), success, resultOrError);\r\n        }\r\n        invokeDotNetStaticMethod(assemblyName, methodIdentifier, ...args) {\r\n            return this.invokeDotNetMethod(assemblyName, methodIdentifier, null, args);\r\n        }\r\n        invokeDotNetStaticMethodAsync(assemblyName, methodIdentifier, ...args) {\r\n            return this.invokeDotNetMethodAsync(assemblyName, methodIdentifier, null, args);\r\n        }\r\n        invokeDotNetMethod(assemblyName, methodIdentifier, dotNetObjectId, args) {\r\n            if (this._dotNetCallDispatcher.invokeDotNetFromJS) {\r\n                const argsJson = stringifyArgs(this, args);\r\n                const resultJson = this._dotNetCallDispatcher.invokeDotNetFromJS(assemblyName, methodIdentifier, dotNetObjectId, argsJson);\r\n                return resultJson ? parseJsonWithRevivers(this, resultJson) : null;\r\n            }\r\n            throw new Error(\"The current dispatcher does not support synchronous calls from JS to .NET. Use invokeDotNetMethodAsync instead.\");\r\n        }\r\n        invokeDotNetMethodAsync(assemblyName, methodIdentifier, dotNetObjectId, args) {\r\n            if (assemblyName && dotNetObjectId) {\r\n                throw new Error(`For instance method calls, assemblyName should be null. Received '${assemblyName}'.`);\r\n            }\r\n            const asyncCallId = this._nextAsyncCallId++;\r\n            const resultPromise = new Promise((resolve, reject) => {\r\n                this._pendingAsyncCalls[asyncCallId] = { resolve, reject };\r\n            });\r\n            try {\r\n                const argsJson = stringifyArgs(this, args);\r\n                this._dotNetCallDispatcher.beginInvokeDotNetFromJS(asyncCallId, assemblyName, methodIdentifier, dotNetObjectId, argsJson);\r\n            }\r\n            catch (ex) {\r\n                // Synchronous failure\r\n                this.completePendingCall(asyncCallId, false, ex);\r\n            }\r\n            return resultPromise;\r\n        }\r\n        receiveByteArray(id, data) {\r\n            this._byteArraysToBeRevived.set(id, data);\r\n        }\r\n        processByteArray(id) {\r\n            const result = this._byteArraysToBeRevived.get(id);\r\n            if (!result) {\r\n                return null;\r\n            }\r\n            this._byteArraysToBeRevived.delete(id);\r\n            return result;\r\n        }\r\n        supplyDotNetStream(streamId, stream) {\r\n            if (this._pendingDotNetToJSStreams.has(streamId)) {\r\n                // The receiver is already waiting, so we can resolve the promise now and stop tracking this\r\n                const pendingStream = this._pendingDotNetToJSStreams.get(streamId);\r\n                this._pendingDotNetToJSStreams.delete(streamId);\r\n                pendingStream.resolve(stream);\r\n            }\r\n            else {\r\n                // The receiver hasn't started waiting yet, so track a pre-completed entry it can attach to later\r\n                const pendingStream = new PendingStream();\r\n                pendingStream.resolve(stream);\r\n                this._pendingDotNetToJSStreams.set(streamId, pendingStream);\r\n            }\r\n        }\r\n        getDotNetStreamPromise(streamId) {\r\n            // We might already have started receiving the stream, or maybe it will come later.\r\n            // We have to handle both possible orderings, but we can count on it coming eventually because\r\n            // it's not something the developer gets to control, and it would be an error if it doesn't.\r\n            let result;\r\n            if (this._pendingDotNetToJSStreams.has(streamId)) {\r\n                // We've already started receiving the stream, so no longer need to track it as pending\r\n                result = this._pendingDotNetToJSStreams.get(streamId).streamPromise;\r\n                this._pendingDotNetToJSStreams.delete(streamId);\r\n            }\r\n            else {\r\n                // We haven't started receiving it yet, so add an entry to track it as pending\r\n                const pendingStream = new PendingStream();\r\n                this._pendingDotNetToJSStreams.set(streamId, pendingStream);\r\n                result = pendingStream.streamPromise;\r\n            }\r\n            return result;\r\n        }\r\n        completePendingCall(asyncCallId, success, resultOrError) {\r\n            if (!this._pendingAsyncCalls.hasOwnProperty(asyncCallId)) {\r\n                throw new Error(`There is no pending async call with ID ${asyncCallId}.`);\r\n            }\r\n            const asyncCall = this._pendingAsyncCalls[asyncCallId];\r\n            delete this._pendingAsyncCalls[asyncCallId];\r\n            if (success) {\r\n                asyncCall.resolve(resultOrError);\r\n            }\r\n            else {\r\n                asyncCall.reject(resultOrError);\r\n            }\r\n        }\r\n    }\r\n    function formatError(error) {\r\n        if (error instanceof Error) {\r\n            return `${error.message}\\n${error.stack}`;\r\n        }\r\n        return error ? error.toString() : \"null\";\r\n    }\r\n    function findJSFunction(identifier, targetInstanceId) {\r\n        const targetInstance = cachedJSObjectsById[targetInstanceId];\r\n        if (targetInstance) {\r\n            return targetInstance.findFunction(identifier);\r\n        }\r\n        throw new Error(`JS object instance with ID ${targetInstanceId} does not exist (has it been disposed?).`);\r\n    }\r\n    DotNet.findJSFunction = findJSFunction;\r\n    function disposeJSObjectReferenceById(id) {\r\n        delete cachedJSObjectsById[id];\r\n    }\r\n    DotNet.disposeJSObjectReferenceById = disposeJSObjectReferenceById;\r\n    class DotNetObject {\r\n        // eslint-disable-next-line no-empty-function\r\n        constructor(_id, _callDispatcher) {\r\n            this._id = _id;\r\n            this._callDispatcher = _callDispatcher;\r\n        }\r\n        invokeMethod(methodIdentifier, ...args) {\r\n            return this._callDispatcher.invokeDotNetMethod(null, methodIdentifier, this._id, args);\r\n        }\r\n        invokeMethodAsync(methodIdentifier, ...args) {\r\n            return this._callDispatcher.invokeDotNetMethodAsync(null, methodIdentifier, this._id, args);\r\n        }\r\n        dispose() {\r\n            const promise = this._callDispatcher.invokeDotNetMethodAsync(null, \"__Dispose\", this._id, null);\r\n            promise.catch(error => console.error(error));\r\n        }\r\n        serializeAsArg() {\r\n            return { [dotNetObjectRefKey]: this._id };\r\n        }\r\n    }\r\n    DotNet.DotNetObject = DotNetObject;\r\n    attachReviver(function reviveReference(key, value) {\r\n        if (value && typeof value === \"object\") {\r\n            if (value.hasOwnProperty(dotNetObjectRefKey)) {\r\n                return new DotNetObject(value[dotNetObjectRefKey], currentCallDispatcher);\r\n            }\r\n            else if (value.hasOwnProperty(jsObjectIdKey)) {\r\n                const id = value[jsObjectIdKey];\r\n                const jsObject = cachedJSObjectsById[id];\r\n                if (jsObject) {\r\n                    return jsObject.getWrappedObject();\r\n                }\r\n                throw new Error(`JS object instance with Id '${id}' does not exist. It may have been disposed.`);\r\n            }\r\n            else if (value.hasOwnProperty(byteArrayRefKey)) {\r\n                const index = value[byteArrayRefKey];\r\n                const byteArray = currentCallDispatcher.processByteArray(index);\r\n                if (byteArray === undefined) {\r\n                    throw new Error(`Byte array index '${index}' does not exist.`);\r\n                }\r\n                return byteArray;\r\n            }\r\n            else if (value.hasOwnProperty(dotNetStreamRefKey)) {\r\n                const streamId = value[dotNetStreamRefKey];\r\n                const streamPromise = currentCallDispatcher.getDotNetStreamPromise(streamId);\r\n                return new DotNetStream(streamPromise);\r\n            }\r\n        }\r\n        // Unrecognized - let another reviver handle it\r\n        return value;\r\n    });\r\n    class DotNetStream {\r\n        // eslint-disable-next-line no-empty-function\r\n        constructor(_streamPromise) {\r\n            this._streamPromise = _streamPromise;\r\n        }\r\n        /**\r\n         * Supplies a readable stream of data being sent from .NET.\r\n         */\r\n        stream() {\r\n            return this._streamPromise;\r\n        }\r\n        /**\r\n         * Supplies a array buffer of data being sent from .NET.\r\n         * Note there is a JavaScript limit on the size of the ArrayBuffer equal to approximately 2GB.\r\n         */\r\n        async arrayBuffer() {\r\n            return new Response(await this.stream()).arrayBuffer();\r\n        }\r\n    }\r\n    class PendingStream {\r\n        constructor() {\r\n            this.streamPromise = new Promise((resolve, reject) => {\r\n                this.resolve = resolve;\r\n                this.reject = reject;\r\n            });\r\n        }\r\n    }\r\n    function createJSCallResult(returnValue, resultType) {\r\n        switch (resultType) {\r\n            case JSCallResultType.Default:\r\n                return returnValue;\r\n            case JSCallResultType.JSObjectReference:\r\n                return createJSObjectReference(returnValue);\r\n            case JSCallResultType.JSStreamReference:\r\n                return createJSStreamReference(returnValue);\r\n            case JSCallResultType.JSVoidResult:\r\n                return null;\r\n            default:\r\n                throw new Error(`Invalid JS call result type '${resultType}'.`);\r\n        }\r\n    }\r\n    let nextByteArrayIndex = 0;\r\n    function stringifyArgs(callDispatcher, args) {\r\n        nextByteArrayIndex = 0;\r\n        currentCallDispatcher = callDispatcher;\r\n        const result = JSON.stringify(args, argReplacer);\r\n        currentCallDispatcher = undefined;\r\n        return result;\r\n    }\r\n    function argReplacer(key, value) {\r\n        if (value instanceof DotNetObject) {\r\n            return value.serializeAsArg();\r\n        }\r\n        else if (value instanceof Uint8Array) {\r\n            const dotNetCallDispatcher = currentCallDispatcher.getDotNetCallDispatcher();\r\n            dotNetCallDispatcher.sendByteArray(nextByteArrayIndex, value);\r\n            const jsonValue = { [byteArrayRefKey]: nextByteArrayIndex };\r\n            nextByteArrayIndex++;\r\n            return jsonValue;\r\n        }\r\n        return value;\r\n    }\r\n})(DotNet || (DotNet = {}));\r\n//# sourceMappingURL=Microsoft.JSInterop.js.map",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n/** Error thrown when an HTTP request fails. */\r\nexport class HttpError extends Error {\r\n    /** Constructs a new instance of {@link @microsoft/signalr.HttpError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     * @param {number} statusCode The HTTP status code represented by this error.\r\n     */\r\n    constructor(errorMessage, statusCode) {\r\n        const trueProto = new.target.prototype;\r\n        super(`${errorMessage}: Status code '${statusCode}'`);\r\n        this.statusCode = statusCode;\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        this.__proto__ = trueProto;\r\n    }\r\n}\r\n/** Error thrown when a timeout elapses. */\r\nexport class TimeoutError extends Error {\r\n    /** Constructs a new instance of {@link @microsoft/signalr.TimeoutError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     */\r\n    constructor(errorMessage = \"A timeout occurred.\") {\r\n        const trueProto = new.target.prototype;\r\n        super(errorMessage);\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        this.__proto__ = trueProto;\r\n    }\r\n}\r\n/** Error thrown when an action is aborted. */\r\nexport class AbortError extends Error {\r\n    /** Constructs a new instance of {@link AbortError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     */\r\n    constructor(errorMessage = \"An abort occurred.\") {\r\n        const trueProto = new.target.prototype;\r\n        super(errorMessage);\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        this.__proto__ = trueProto;\r\n    }\r\n}\r\n/** Error thrown when the selected transport is unsupported by the browser. */\r\n/** @private */\r\nexport class UnsupportedTransportError extends Error {\r\n    /** Constructs a new instance of {@link @microsoft/signalr.UnsupportedTransportError}.\r\n     *\r\n     * @param {string} message A descriptive error message.\r\n     * @param {HttpTransportType} transport The {@link @microsoft/signalr.HttpTransportType} this error occurred on.\r\n     */\r\n    constructor(message, transport) {\r\n        const trueProto = new.target.prototype;\r\n        super(message);\r\n        this.transport = transport;\r\n        this.errorType = 'UnsupportedTransportError';\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        this.__proto__ = trueProto;\r\n    }\r\n}\r\n/** Error thrown when the selected transport is disabled by the browser. */\r\n/** @private */\r\nexport class DisabledTransportError extends Error {\r\n    /** Constructs a new instance of {@link @microsoft/signalr.DisabledTransportError}.\r\n     *\r\n     * @param {string} message A descriptive error message.\r\n     * @param {HttpTransportType} transport The {@link @microsoft/signalr.HttpTransportType} this error occurred on.\r\n     */\r\n    constructor(message, transport) {\r\n        const trueProto = new.target.prototype;\r\n        super(message);\r\n        this.transport = transport;\r\n        this.errorType = 'DisabledTransportError';\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        this.__proto__ = trueProto;\r\n    }\r\n}\r\n/** Error thrown when the selected transport cannot be started. */\r\n/** @private */\r\nexport class FailedToStartTransportError extends Error {\r\n    /** Constructs a new instance of {@link @microsoft/signalr.FailedToStartTransportError}.\r\n     *\r\n     * @param {string} message A descriptive error message.\r\n     * @param {HttpTransportType} transport The {@link @microsoft/signalr.HttpTransportType} this error occurred on.\r\n     */\r\n    constructor(message, transport) {\r\n        const trueProto = new.target.prototype;\r\n        super(message);\r\n        this.transport = transport;\r\n        this.errorType = 'FailedToStartTransportError';\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        this.__proto__ = trueProto;\r\n    }\r\n}\r\n/** Error thrown when the negotiation with the server failed to complete. */\r\n/** @private */\r\nexport class FailedToNegotiateWithServerError extends Error {\r\n    /** Constructs a new instance of {@link @microsoft/signalr.FailedToNegotiateWithServerError}.\r\n     *\r\n     * @param {string} message A descriptive error message.\r\n     */\r\n    constructor(message) {\r\n        const trueProto = new.target.prototype;\r\n        super(message);\r\n        this.errorType = 'FailedToNegotiateWithServerError';\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        this.__proto__ = trueProto;\r\n    }\r\n}\r\n/** Error thrown when multiple errors have occurred. */\r\n/** @private */\r\nexport class AggregateErrors extends Error {\r\n    /** Constructs a new instance of {@link @microsoft/signalr.AggregateErrors}.\r\n     *\r\n     * @param {string} message A descriptive error message.\r\n     * @param {Error[]} innerErrors The collection of errors this error is aggregating.\r\n     */\r\n    constructor(message, innerErrors) {\r\n        const trueProto = new.target.prototype;\r\n        super(message);\r\n        this.innerErrors = innerErrors;\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        this.__proto__ = trueProto;\r\n    }\r\n}\r\n//# sourceMappingURL=Errors.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n/** Represents an HTTP response. */\r\nexport class HttpResponse {\r\n    constructor(statusCode, statusText, content) {\r\n        this.statusCode = statusCode;\r\n        this.statusText = statusText;\r\n        this.content = content;\r\n    }\r\n}\r\n/** Abstraction over an HTTP client.\r\n *\r\n * This class provides an abstraction over an HTTP client so that a different implementation can be provided on different platforms.\r\n */\r\nexport class HttpClient {\r\n    get(url, options) {\r\n        return this.send({\r\n            ...options,\r\n            method: \"GET\",\r\n            url,\r\n        });\r\n    }\r\n    post(url, options) {\r\n        return this.send({\r\n            ...options,\r\n            method: \"POST\",\r\n            url,\r\n        });\r\n    }\r\n    delete(url, options) {\r\n        return this.send({\r\n            ...options,\r\n            method: \"DELETE\",\r\n            url,\r\n        });\r\n    }\r\n    /** Gets all cookies that apply to the specified URL.\r\n     *\r\n     * @param url The URL that the cookies are valid for.\r\n     * @returns {string} A string containing all the key-value cookie pairs for the specified URL.\r\n     */\r\n    // @ts-ignore\r\n    getCookieString(url) {\r\n        return \"\";\r\n    }\r\n}\r\n//# sourceMappingURL=HttpClient.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n// These values are designed to match the ASP.NET Log Levels since that's the pattern we're emulating here.\r\n/** Indicates the severity of a log message.\r\n *\r\n * Log Levels are ordered in increasing severity. So `Debug` is more severe than `Trace`, etc.\r\n */\r\nexport var LogLevel;\r\n(function (LogLevel) {\r\n    /** Log level for very low severity diagnostic messages. */\r\n    LogLevel[LogLevel[\"Trace\"] = 0] = \"Trace\";\r\n    /** Log level for low severity diagnostic messages. */\r\n    LogLevel[LogLevel[\"Debug\"] = 1] = \"Debug\";\r\n    /** Log level for informational diagnostic messages. */\r\n    LogLevel[LogLevel[\"Information\"] = 2] = \"Information\";\r\n    /** Log level for diagnostic messages that indicate a non-fatal problem. */\r\n    LogLevel[LogLevel[\"Warning\"] = 3] = \"Warning\";\r\n    /** Log level for diagnostic messages that indicate a failure in the current operation. */\r\n    LogLevel[LogLevel[\"Error\"] = 4] = \"Error\";\r\n    /** Log level for diagnostic messages that indicate a failure that will terminate the entire application. */\r\n    LogLevel[LogLevel[\"Critical\"] = 5] = \"Critical\";\r\n    /** The highest possible log level. Used when configuring logging to indicate that no log messages should be emitted. */\r\n    LogLevel[LogLevel[\"None\"] = 6] = \"None\";\r\n})(LogLevel || (LogLevel = {}));\r\n//# sourceMappingURL=ILogger.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n/** A logger that does nothing when log messages are sent to it. */\r\nexport class NullLogger {\r\n    constructor() { }\r\n    /** @inheritDoc */\r\n    // eslint-disable-next-line\r\n    log(_logLevel, _message) {\r\n    }\r\n}\r\n/** The singleton instance of the {@link @microsoft/signalr.NullLogger}. */\r\nNullLogger.instance = new NullLogger();\r\n//# sourceMappingURL=Loggers.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { NullLogger } from \"./Loggers\";\r\n// Version token that will be replaced by the prepack command\r\n/** The version of the SignalR client. */\r\nexport const VERSION = \"0.0.0-DEV_BUILD\";\r\n/** @private */\r\nexport class Arg {\r\n    static isRequired(val, name) {\r\n        if (val === null || val === undefined) {\r\n            throw new Error(`The '${name}' argument is required.`);\r\n        }\r\n    }\r\n    static isNotEmpty(val, name) {\r\n        if (!val || val.match(/^\\s*$/)) {\r\n            throw new Error(`The '${name}' argument should not be empty.`);\r\n        }\r\n    }\r\n    static isIn(val, values, name) {\r\n        // TypeScript enums have keys for **both** the name and the value of each enum member on the type itself.\r\n        if (!(val in values)) {\r\n            throw new Error(`Unknown ${name} value: ${val}.`);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nexport class Platform {\r\n    // react-native has a window but no document so we should check both\r\n    static get isBrowser() {\r\n        return !Platform.isNode && typeof window === \"object\" && typeof window.document === \"object\";\r\n    }\r\n    // WebWorkers don't have a window object so the isBrowser check would fail\r\n    static get isWebWorker() {\r\n        return !Platform.isNode && typeof self === \"object\" && \"importScripts\" in self;\r\n    }\r\n    // react-native has a window but no document\r\n    static get isReactNative() {\r\n        return !Platform.isNode && typeof window === \"object\" && typeof window.document === \"undefined\";\r\n    }\r\n    // Node apps shouldn't have a window object, but WebWorkers don't either\r\n    // so we need to check for both WebWorker and window\r\n    static get isNode() {\r\n        return typeof process !== \"undefined\" && process.release && process.release.name === \"node\";\r\n    }\r\n}\r\n/** @private */\r\nexport function getDataDetail(data, includeContent) {\r\n    let detail = \"\";\r\n    if (isArrayBuffer(data)) {\r\n        detail = `Binary data of length ${data.byteLength}`;\r\n        if (includeContent) {\r\n            detail += `. Content: '${formatArrayBuffer(data)}'`;\r\n        }\r\n    }\r\n    else if (typeof data === \"string\") {\r\n        detail = `String data of length ${data.length}`;\r\n        if (includeContent) {\r\n            detail += `. Content: '${data}'`;\r\n        }\r\n    }\r\n    return detail;\r\n}\r\n/** @private */\r\nexport function formatArrayBuffer(data) {\r\n    const view = new Uint8Array(data);\r\n    // Uint8Array.map only supports returning another Uint8Array?\r\n    let str = \"\";\r\n    view.forEach((num) => {\r\n        const pad = num < 16 ? \"0\" : \"\";\r\n        str += `0x${pad}${num.toString(16)} `;\r\n    });\r\n    // Trim of trailing space.\r\n    return str.substr(0, str.length - 1);\r\n}\r\n// Also in signalr-protocol-msgpack/Utils.ts\r\n/** @private */\r\nexport function isArrayBuffer(val) {\r\n    return val && typeof ArrayBuffer !== \"undefined\" &&\r\n        (val instanceof ArrayBuffer ||\r\n            // Sometimes we get an ArrayBuffer that doesn't satisfy instanceof\r\n            (val.constructor && val.constructor.name === \"ArrayBuffer\"));\r\n}\r\n/** @private */\r\nexport async function sendMessage(logger, transportName, httpClient, url, content, options) {\r\n    const headers = {};\r\n    const [name, value] = getUserAgentHeader();\r\n    headers[name] = value;\r\n    logger.log(LogLevel.Trace, `(${transportName} transport) sending data. ${getDataDetail(content, options.logMessageContent)}.`);\r\n    const responseType = isArrayBuffer(content) ? \"arraybuffer\" : \"text\";\r\n    const response = await httpClient.post(url, {\r\n        content,\r\n        headers: { ...headers, ...options.headers },\r\n        responseType,\r\n        timeout: options.timeout,\r\n        withCredentials: options.withCredentials,\r\n    });\r\n    logger.log(LogLevel.Trace, `(${transportName} transport) request complete. Response status: ${response.statusCode}.`);\r\n}\r\n/** @private */\r\nexport function createLogger(logger) {\r\n    if (logger === undefined) {\r\n        return new ConsoleLogger(LogLevel.Information);\r\n    }\r\n    if (logger === null) {\r\n        return NullLogger.instance;\r\n    }\r\n    if (logger.log !== undefined) {\r\n        return logger;\r\n    }\r\n    return new ConsoleLogger(logger);\r\n}\r\n/** @private */\r\nexport class SubjectSubscription {\r\n    constructor(subject, observer) {\r\n        this._subject = subject;\r\n        this._observer = observer;\r\n    }\r\n    dispose() {\r\n        const index = this._subject.observers.indexOf(this._observer);\r\n        if (index > -1) {\r\n            this._subject.observers.splice(index, 1);\r\n        }\r\n        if (this._subject.observers.length === 0 && this._subject.cancelCallback) {\r\n            this._subject.cancelCallback().catch((_) => { });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nexport class ConsoleLogger {\r\n    constructor(minimumLogLevel) {\r\n        this._minLevel = minimumLogLevel;\r\n        this.out = console;\r\n    }\r\n    log(logLevel, message) {\r\n        if (logLevel >= this._minLevel) {\r\n            const msg = `[${new Date().toISOString()}] ${LogLevel[logLevel]}: ${message}`;\r\n            switch (logLevel) {\r\n                case LogLevel.Critical:\r\n                case LogLevel.Error:\r\n                    this.out.error(msg);\r\n                    break;\r\n                case LogLevel.Warning:\r\n                    this.out.warn(msg);\r\n                    break;\r\n                case LogLevel.Information:\r\n                    this.out.info(msg);\r\n                    break;\r\n                default:\r\n                    // console.debug only goes to attached debuggers in Node, so we use console.log for Trace and Debug\r\n                    this.out.log(msg);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nexport function getUserAgentHeader() {\r\n    let userAgentHeaderName = \"X-SignalR-User-Agent\";\r\n    if (Platform.isNode) {\r\n        userAgentHeaderName = \"User-Agent\";\r\n    }\r\n    return [userAgentHeaderName, constructUserAgent(VERSION, getOsName(), getRuntime(), getRuntimeVersion())];\r\n}\r\n/** @private */\r\nexport function constructUserAgent(version, os, runtime, runtimeVersion) {\r\n    // Microsoft SignalR/[Version] ([Detailed Version]; [Operating System]; [Runtime]; [Runtime Version])\r\n    let userAgent = \"Microsoft SignalR/\";\r\n    const majorAndMinor = version.split(\".\");\r\n    userAgent += `${majorAndMinor[0]}.${majorAndMinor[1]}`;\r\n    userAgent += ` (${version}; `;\r\n    if (os && os !== \"\") {\r\n        userAgent += `${os}; `;\r\n    }\r\n    else {\r\n        userAgent += \"Unknown OS; \";\r\n    }\r\n    userAgent += `${runtime}`;\r\n    if (runtimeVersion) {\r\n        userAgent += `; ${runtimeVersion}`;\r\n    }\r\n    else {\r\n        userAgent += \"; Unknown Runtime Version\";\r\n    }\r\n    userAgent += \")\";\r\n    return userAgent;\r\n}\r\n// eslint-disable-next-line spaced-comment\r\n/*#__PURE__*/ function getOsName() {\r\n    if (Platform.isNode) {\r\n        switch (process.platform) {\r\n            case \"win32\":\r\n                return \"Windows NT\";\r\n            case \"darwin\":\r\n                return \"macOS\";\r\n            case \"linux\":\r\n                return \"Linux\";\r\n            default:\r\n                return process.platform;\r\n        }\r\n    }\r\n    else {\r\n        return \"\";\r\n    }\r\n}\r\n// eslint-disable-next-line spaced-comment\r\n/*#__PURE__*/ function getRuntimeVersion() {\r\n    if (Platform.isNode) {\r\n        return process.versions.node;\r\n    }\r\n    return undefined;\r\n}\r\nfunction getRuntime() {\r\n    if (Platform.isNode) {\r\n        return \"NodeJS\";\r\n    }\r\n    else {\r\n        return \"Browser\";\r\n    }\r\n}\r\n/** @private */\r\nexport function getErrorString(e) {\r\n    if (e.stack) {\r\n        return e.stack;\r\n    }\r\n    else if (e.message) {\r\n        return e.message;\r\n    }\r\n    return `${e}`;\r\n}\r\n/** @private */\r\nexport function getGlobalThis() {\r\n    // globalThis is semi-new and not available in Node until v12\r\n    if (typeof globalThis !== \"undefined\") {\r\n        return globalThis;\r\n    }\r\n    if (typeof self !== \"undefined\") {\r\n        return self;\r\n    }\r\n    if (typeof window !== \"undefined\") {\r\n        return window;\r\n    }\r\n    if (typeof global !== \"undefined\") {\r\n        return global;\r\n    }\r\n    throw new Error(\"could not find global\");\r\n}\r\n//# sourceMappingURL=Utils.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { Platform, getGlobalThis, isArrayBuffer } from \"./Utils\";\r\nimport { configureAbortController, configureFetch } from \"./DynamicImports\";\r\nexport class FetchHttpClient extends HttpClient {\r\n    constructor(logger) {\r\n        super();\r\n        this._logger = logger;\r\n        // This is how you do \"reference\" arguments\r\n        const fetchObj = { _fetchType: undefined, _jar: undefined };\r\n        if (configureFetch(fetchObj)) {\r\n            this._fetchType = fetchObj._fetchType;\r\n            this._jar = fetchObj._jar;\r\n        }\r\n        else {\r\n            this._fetchType = fetch.bind(getGlobalThis());\r\n        }\r\n        this._abortControllerType = AbortController;\r\n        const abortObj = { _abortControllerType: this._abortControllerType };\r\n        if (configureAbortController(abortObj)) {\r\n            this._abortControllerType = abortObj._abortControllerType;\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    async send(request) {\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            throw new AbortError();\r\n        }\r\n        if (!request.method) {\r\n            throw new Error(\"No method defined.\");\r\n        }\r\n        if (!request.url) {\r\n            throw new Error(\"No url defined.\");\r\n        }\r\n        const abortController = new this._abortControllerType();\r\n        let error;\r\n        // Hook our abortSignal into the abort controller\r\n        if (request.abortSignal) {\r\n            request.abortSignal.onabort = () => {\r\n                abortController.abort();\r\n                error = new AbortError();\r\n            };\r\n        }\r\n        // If a timeout has been passed in, setup a timeout to call abort\r\n        // Type needs to be any to fit window.setTimeout and NodeJS.setTimeout\r\n        let timeoutId = null;\r\n        if (request.timeout) {\r\n            const msTimeout = request.timeout;\r\n            timeoutId = setTimeout(() => {\r\n                abortController.abort();\r\n                this._logger.log(LogLevel.Warning, `Timeout from HTTP request.`);\r\n                error = new TimeoutError();\r\n            }, msTimeout);\r\n        }\r\n        if (request.content === \"\") {\r\n            request.content = undefined;\r\n        }\r\n        if (request.content) {\r\n            // Explicitly setting the Content-Type header for React Native on Android platform.\r\n            request.headers = request.headers || {};\r\n            if (isArrayBuffer(request.content)) {\r\n                request.headers[\"Content-Type\"] = \"application/octet-stream\";\r\n            }\r\n            else {\r\n                request.headers[\"Content-Type\"] = \"text/plain;charset=UTF-8\";\r\n            }\r\n        }\r\n        let response;\r\n        try {\r\n            response = await this._fetchType(request.url, {\r\n                body: request.content,\r\n                cache: \"no-cache\",\r\n                credentials: request.withCredentials === true ? \"include\" : \"same-origin\",\r\n                headers: {\r\n                    \"X-Requested-With\": \"XMLHttpRequest\",\r\n                    ...request.headers,\r\n                },\r\n                method: request.method,\r\n                mode: \"cors\",\r\n                redirect: \"follow\",\r\n                signal: abortController.signal,\r\n            });\r\n        }\r\n        catch (e) {\r\n            if (error) {\r\n                throw error;\r\n            }\r\n            this._logger.log(LogLevel.Warning, `Error from HTTP request. ${e}.`);\r\n            throw e;\r\n        }\r\n        finally {\r\n            if (timeoutId) {\r\n                clearTimeout(timeoutId);\r\n            }\r\n            if (request.abortSignal) {\r\n                request.abortSignal.onabort = null;\r\n            }\r\n        }\r\n        if (!response.ok) {\r\n            const errorMessage = await deserializeContent(response, \"text\");\r\n            throw new HttpError(errorMessage || response.statusText, response.status);\r\n        }\r\n        const content = deserializeContent(response, request.responseType);\r\n        const payload = await content;\r\n        return new HttpResponse(response.status, response.statusText, payload);\r\n    }\r\n    getCookieString(url) {\r\n        let cookies = \"\";\r\n        if (Platform.isNode && this._jar) {\r\n            // @ts-ignore: unused variable\r\n            this._jar.getCookies(url, (e, c) => cookies = c.join(\"; \"));\r\n        }\r\n        return cookies;\r\n    }\r\n}\r\nfunction deserializeContent(response, responseType) {\r\n    let content;\r\n    switch (responseType) {\r\n        case \"arraybuffer\":\r\n            content = response.arrayBuffer();\r\n            break;\r\n        case \"text\":\r\n            content = response.text();\r\n            break;\r\n        case \"blob\":\r\n        case \"document\":\r\n        case \"json\":\r\n            throw new Error(`${responseType} is not supported.`);\r\n        default:\r\n            content = response.text();\r\n            break;\r\n    }\r\n    return content;\r\n}\r\n//# sourceMappingURL=FetchHttpClient.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { Platform } from \"./Utils\";\r\n/** @private */\r\nexport function configureFetch(obj) {\r\n    // Node added a fetch implementation to the global scope starting in v18.\r\n    // We need to add a cookie jar in node to be able to share cookies with WebSocket\r\n    if (typeof fetch === \"undefined\" || Platform.isNode) {\r\n        // Cookies aren't automatically handled in Node so we need to add a CookieJar to preserve cookies across requests\r\n        // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n        obj._jar = new (require(\"tough-cookie\")).CookieJar();\r\n        if (typeof fetch === \"undefined\") {\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            obj._fetchType = require(\"node-fetch\");\r\n        }\r\n        else {\r\n            // Use fetch from Node if available\r\n            obj._fetchType = fetch;\r\n        }\r\n        // node-fetch doesn't have a nice API for getting and setting cookies\r\n        // fetch-cookie will wrap a fetch implementation with a default CookieJar or a provided one\r\n        // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n        obj._fetchType = require(\"fetch-cookie\")(obj._fetchType, obj._jar);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nexport function configureAbortController(obj) {\r\n    if (typeof AbortController === \"undefined\") {\r\n        // Node needs EventListener methods on AbortController which our custom polyfill doesn't provide\r\n        obj._abortControllerType = require(\"abort-controller\");\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nexport function getWS() {\r\n    return require(\"ws\");\r\n}\r\n/** @private */\r\nexport function getEventSource() {\r\n    return require(\"eventsource\");\r\n}\r\n//# sourceMappingURL=DynamicImports.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { isArrayBuffer } from \"./Utils\";\r\nexport class XhrHttpClient extends HttpClient {\r\n    constructor(logger) {\r\n        super();\r\n        this._logger = logger;\r\n    }\r\n    /** @inheritDoc */\r\n    send(request) {\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            return Promise.reject(new AbortError());\r\n        }\r\n        if (!request.method) {\r\n            return Promise.reject(new Error(\"No method defined.\"));\r\n        }\r\n        if (!request.url) {\r\n            return Promise.reject(new Error(\"No url defined.\"));\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            const xhr = new XMLHttpRequest();\r\n            xhr.open(request.method, request.url, true);\r\n            xhr.withCredentials = request.withCredentials === undefined ? true : request.withCredentials;\r\n            xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n            if (request.content === \"\") {\r\n                request.content = undefined;\r\n            }\r\n            if (request.content) {\r\n                // Explicitly setting the Content-Type header for React Native on Android platform.\r\n                if (isArrayBuffer(request.content)) {\r\n                    xhr.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\r\n                }\r\n                else {\r\n                    xhr.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\r\n                }\r\n            }\r\n            const headers = request.headers;\r\n            if (headers) {\r\n                Object.keys(headers)\r\n                    .forEach((header) => {\r\n                    xhr.setRequestHeader(header, headers[header]);\r\n                });\r\n            }\r\n            if (request.responseType) {\r\n                xhr.responseType = request.responseType;\r\n            }\r\n            if (request.abortSignal) {\r\n                request.abortSignal.onabort = () => {\r\n                    xhr.abort();\r\n                    reject(new AbortError());\r\n                };\r\n            }\r\n            if (request.timeout) {\r\n                xhr.timeout = request.timeout;\r\n            }\r\n            xhr.onload = () => {\r\n                if (request.abortSignal) {\r\n                    request.abortSignal.onabort = null;\r\n                }\r\n                if (xhr.status >= 200 && xhr.status < 300) {\r\n                    resolve(new HttpResponse(xhr.status, xhr.statusText, xhr.response || xhr.responseText));\r\n                }\r\n                else {\r\n                    reject(new HttpError(xhr.response || xhr.responseText || xhr.statusText, xhr.status));\r\n                }\r\n            };\r\n            xhr.onerror = () => {\r\n                this._logger.log(LogLevel.Warning, `Error from HTTP request. ${xhr.status}: ${xhr.statusText}.`);\r\n                reject(new HttpError(xhr.statusText, xhr.status));\r\n            };\r\n            xhr.ontimeout = () => {\r\n                this._logger.log(LogLevel.Warning, `Timeout from HTTP request.`);\r\n                reject(new TimeoutError());\r\n            };\r\n            xhr.send(request.content);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=XhrHttpClient.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { AbortError } from \"./Errors\";\r\nimport { FetchHttpClient } from \"./FetchHttpClient\";\r\nimport { HttpClient } from \"./HttpClient\";\r\nimport { Platform } from \"./Utils\";\r\nimport { XhrHttpClient } from \"./XhrHttpClient\";\r\n/** Default implementation of {@link @microsoft/signalr.HttpClient}. */\r\nexport class DefaultHttpClient extends HttpClient {\r\n    /** Creates a new instance of the {@link @microsoft/signalr.DefaultHttpClient}, using the provided {@link @microsoft/signalr.ILogger} to log messages. */\r\n    constructor(logger) {\r\n        super();\r\n        if (typeof fetch !== \"undefined\" || Platform.isNode) {\r\n            this._httpClient = new FetchHttpClient(logger);\r\n        }\r\n        else if (typeof XMLHttpRequest !== \"undefined\") {\r\n            this._httpClient = new XhrHttpClient(logger);\r\n        }\r\n        else {\r\n            throw new Error(\"No usable HttpClient found.\");\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    send(request) {\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            return Promise.reject(new AbortError());\r\n        }\r\n        if (!request.method) {\r\n            return Promise.reject(new Error(\"No method defined.\"));\r\n        }\r\n        if (!request.url) {\r\n            return Promise.reject(new Error(\"No url defined.\"));\r\n        }\r\n        return this._httpClient.send(request);\r\n    }\r\n    getCookieString(url) {\r\n        return this._httpClient.getCookieString(url);\r\n    }\r\n}\r\n//# sourceMappingURL=DefaultHttpClient.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n// Not exported from index\r\n/** @private */\r\nexport class TextMessageFormat {\r\n    static write(output) {\r\n        return `${output}${TextMessageFormat.RecordSeparator}`;\r\n    }\r\n    static parse(input) {\r\n        if (input[input.length - 1] !== TextMessageFormat.RecordSeparator) {\r\n            throw new Error(\"Message is incomplete.\");\r\n        }\r\n        const messages = input.split(TextMessageFormat.RecordSeparator);\r\n        messages.pop();\r\n        return messages;\r\n    }\r\n}\r\nTextMessageFormat.RecordSeparatorCode = 0x1e;\r\nTextMessageFormat.RecordSeparator = String.fromCharCode(TextMessageFormat.RecordSeparatorCode);\r\n//# sourceMappingURL=TextMessageFormat.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { TextMessageFormat } from \"./TextMessageFormat\";\r\nimport { isArrayBuffer } from \"./Utils\";\r\n/** @private */\r\nexport class HandshakeProtocol {\r\n    // Handshake request is always JSON\r\n    writeHandshakeRequest(handshakeRequest) {\r\n        return TextMessageFormat.write(JSON.stringify(handshakeRequest));\r\n    }\r\n    parseHandshakeResponse(data) {\r\n        let messageData;\r\n        let remainingData;\r\n        if (isArrayBuffer(data)) {\r\n            // Format is binary but still need to read JSON text from handshake response\r\n            const binaryData = new Uint8Array(data);\r\n            const separatorIndex = binaryData.indexOf(TextMessageFormat.RecordSeparatorCode);\r\n            if (separatorIndex === -1) {\r\n                throw new Error(\"Message is incomplete.\");\r\n            }\r\n            // content before separator is handshake response\r\n            // optional content after is additional messages\r\n            const responseLength = separatorIndex + 1;\r\n            messageData = String.fromCharCode.apply(null, Array.prototype.slice.call(binaryData.slice(0, responseLength)));\r\n            remainingData = (binaryData.byteLength > responseLength) ? binaryData.slice(responseLength).buffer : null;\r\n        }\r\n        else {\r\n            const textData = data;\r\n            const separatorIndex = textData.indexOf(TextMessageFormat.RecordSeparator);\r\n            if (separatorIndex === -1) {\r\n                throw new Error(\"Message is incomplete.\");\r\n            }\r\n            // content before separator is handshake response\r\n            // optional content after is additional messages\r\n            const responseLength = separatorIndex + 1;\r\n            messageData = textData.substring(0, responseLength);\r\n            remainingData = (textData.length > responseLength) ? textData.substring(responseLength) : null;\r\n        }\r\n        // At this point we should have just the single handshake message\r\n        const messages = TextMessageFormat.parse(messageData);\r\n        const response = JSON.parse(messages[0]);\r\n        if (response.type) {\r\n            throw new Error(\"Expected a handshake response from the server.\");\r\n        }\r\n        const responseMessage = response;\r\n        // multiple messages could have arrived with handshake\r\n        // return additional data to be parsed as usual, or null if all parsed\r\n        return [remainingData, responseMessage];\r\n    }\r\n}\r\n//# sourceMappingURL=HandshakeProtocol.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n/** Defines the type of a Hub Message. */\r\nexport var MessageType;\r\n(function (MessageType) {\r\n    /** Indicates the message is an Invocation message and implements the {@link @microsoft/signalr.InvocationMessage} interface. */\r\n    MessageType[MessageType[\"Invocation\"] = 1] = \"Invocation\";\r\n    /** Indicates the message is a StreamItem message and implements the {@link @microsoft/signalr.StreamItemMessage} interface. */\r\n    MessageType[MessageType[\"StreamItem\"] = 2] = \"StreamItem\";\r\n    /** Indicates the message is a Completion message and implements the {@link @microsoft/signalr.CompletionMessage} interface. */\r\n    MessageType[MessageType[\"Completion\"] = 3] = \"Completion\";\r\n    /** Indicates the message is a Stream Invocation message and implements the {@link @microsoft/signalr.StreamInvocationMessage} interface. */\r\n    MessageType[MessageType[\"StreamInvocation\"] = 4] = \"StreamInvocation\";\r\n    /** Indicates the message is a Cancel Invocation message and implements the {@link @microsoft/signalr.CancelInvocationMessage} interface. */\r\n    MessageType[MessageType[\"CancelInvocation\"] = 5] = \"CancelInvocation\";\r\n    /** Indicates the message is a Ping message and implements the {@link @microsoft/signalr.PingMessage} interface. */\r\n    MessageType[MessageType[\"Ping\"] = 6] = \"Ping\";\r\n    /** Indicates the message is a Close message and implements the {@link @microsoft/signalr.CloseMessage} interface. */\r\n    MessageType[MessageType[\"Close\"] = 7] = \"Close\";\r\n    MessageType[MessageType[\"Ack\"] = 8] = \"Ack\";\r\n    MessageType[MessageType[\"Sequence\"] = 9] = \"Sequence\";\r\n})(MessageType || (MessageType = {}));\r\n//# sourceMappingURL=IHubProtocol.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { HandshakeProtocol } from \"./HandshakeProtocol\";\r\nimport { AbortError } from \"./Errors\";\r\nimport { MessageType } from \"./IHubProtocol\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { Subject } from \"./Subject\";\r\nimport { Arg, getErrorString, Platform } from \"./Utils\";\r\nimport { MessageBuffer } from \"./MessageBuffer\";\r\nconst DEFAULT_TIMEOUT_IN_MS = 30 * 1000;\r\nconst DEFAULT_PING_INTERVAL_IN_MS = 15 * 1000;\r\nconst DEFAULT_STATEFUL_RECONNECT_BUFFER_SIZE = 100000;\r\n/** Describes the current state of the {@link HubConnection} to the server. */\r\nexport var HubConnectionState;\r\n(function (HubConnectionState) {\r\n    /** The hub connection is disconnected. */\r\n    HubConnectionState[\"Disconnected\"] = \"Disconnected\";\r\n    /** The hub connection is connecting. */\r\n    HubConnectionState[\"Connecting\"] = \"Connecting\";\r\n    /** The hub connection is connected. */\r\n    HubConnectionState[\"Connected\"] = \"Connected\";\r\n    /** The hub connection is disconnecting. */\r\n    HubConnectionState[\"Disconnecting\"] = \"Disconnecting\";\r\n    /** The hub connection is reconnecting. */\r\n    HubConnectionState[\"Reconnecting\"] = \"Reconnecting\";\r\n})(HubConnectionState || (HubConnectionState = {}));\r\n/** Represents a connection to a SignalR Hub. */\r\nexport class HubConnection {\r\n    /** @internal */\r\n    // Using a public static factory method means we can have a private constructor and an _internal_\r\n    // create method that can be used by HubConnectionBuilder. An \"internal\" constructor would just\r\n    // be stripped away and the '.d.ts' file would have no constructor, which is interpreted as a\r\n    // public parameter-less constructor.\r\n    static create(connection, logger, protocol, reconnectPolicy, serverTimeoutInMilliseconds, keepAliveIntervalInMilliseconds, statefulReconnectBufferSize) {\r\n        return new HubConnection(connection, logger, protocol, reconnectPolicy, serverTimeoutInMilliseconds, keepAliveIntervalInMilliseconds, statefulReconnectBufferSize);\r\n    }\r\n    constructor(connection, logger, protocol, reconnectPolicy, serverTimeoutInMilliseconds, keepAliveIntervalInMilliseconds, statefulReconnectBufferSize) {\r\n        this._nextKeepAlive = 0;\r\n        this._freezeEventListener = () => {\r\n            this._logger.log(LogLevel.Warning, \"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep\");\r\n        };\r\n        Arg.isRequired(connection, \"connection\");\r\n        Arg.isRequired(logger, \"logger\");\r\n        Arg.isRequired(protocol, \"protocol\");\r\n        this.serverTimeoutInMilliseconds = serverTimeoutInMilliseconds !== null && serverTimeoutInMilliseconds !== void 0 ? serverTimeoutInMilliseconds : DEFAULT_TIMEOUT_IN_MS;\r\n        this.keepAliveIntervalInMilliseconds = keepAliveIntervalInMilliseconds !== null && keepAliveIntervalInMilliseconds !== void 0 ? keepAliveIntervalInMilliseconds : DEFAULT_PING_INTERVAL_IN_MS;\r\n        this._statefulReconnectBufferSize = statefulReconnectBufferSize !== null && statefulReconnectBufferSize !== void 0 ? statefulReconnectBufferSize : DEFAULT_STATEFUL_RECONNECT_BUFFER_SIZE;\r\n        this._logger = logger;\r\n        this._protocol = protocol;\r\n        this.connection = connection;\r\n        this._reconnectPolicy = reconnectPolicy;\r\n        this._handshakeProtocol = new HandshakeProtocol();\r\n        this.connection.onreceive = (data) => this._processIncomingData(data);\r\n        this.connection.onclose = (error) => this._connectionClosed(error);\r\n        this._callbacks = {};\r\n        this._methods = {};\r\n        this._closedCallbacks = [];\r\n        this._reconnectingCallbacks = [];\r\n        this._reconnectedCallbacks = [];\r\n        this._invocationId = 0;\r\n        this._receivedHandshakeResponse = false;\r\n        this._connectionState = HubConnectionState.Disconnected;\r\n        this._connectionStarted = false;\r\n        this._cachedPingMessage = this._protocol.writeMessage({ type: MessageType.Ping });\r\n    }\r\n    /** Indicates the state of the {@link HubConnection} to the server. */\r\n    get state() {\r\n        return this._connectionState;\r\n    }\r\n    /** Represents the connection id of the {@link HubConnection} on the server. The connection id will be null when the connection is either\r\n     *  in the disconnected state or if the negotiation step was skipped.\r\n     */\r\n    get connectionId() {\r\n        return this.connection ? (this.connection.connectionId || null) : null;\r\n    }\r\n    /** Indicates the url of the {@link HubConnection} to the server. */\r\n    get baseUrl() {\r\n        return this.connection.baseUrl || \"\";\r\n    }\r\n    /**\r\n     * Sets a new url for the HubConnection. Note that the url can only be changed when the connection is in either the Disconnected or\r\n     * Reconnecting states.\r\n     * @param {string} url The url to connect to.\r\n     */\r\n    set baseUrl(url) {\r\n        if (this._connectionState !== HubConnectionState.Disconnected && this._connectionState !== HubConnectionState.Reconnecting) {\r\n            throw new Error(\"The HubConnection must be in the Disconnected or Reconnecting state to change the url.\");\r\n        }\r\n        if (!url) {\r\n            throw new Error(\"The HubConnection url must be a valid url.\");\r\n        }\r\n        this.connection.baseUrl = url;\r\n    }\r\n    /** Starts the connection.\r\n     *\r\n     * @returns {Promise<void>} A Promise that resolves when the connection has been successfully established, or rejects with an error.\r\n     */\r\n    start() {\r\n        this._startPromise = this._startWithStateTransitions();\r\n        return this._startPromise;\r\n    }\r\n    async _startWithStateTransitions() {\r\n        if (this._connectionState !== HubConnectionState.Disconnected) {\r\n            return Promise.reject(new Error(\"Cannot start a HubConnection that is not in the 'Disconnected' state.\"));\r\n        }\r\n        this._connectionState = HubConnectionState.Connecting;\r\n        this._logger.log(LogLevel.Debug, \"Starting HubConnection.\");\r\n        try {\r\n            await this._startInternal();\r\n            if (Platform.isBrowser) {\r\n                // Log when the browser freezes the tab so users know why their connection unexpectedly stopped working\r\n                window.document.addEventListener(\"freeze\", this._freezeEventListener);\r\n            }\r\n            this._connectionState = HubConnectionState.Connected;\r\n            this._connectionStarted = true;\r\n            this._logger.log(LogLevel.Debug, \"HubConnection connected successfully.\");\r\n        }\r\n        catch (e) {\r\n            this._connectionState = HubConnectionState.Disconnected;\r\n            this._logger.log(LogLevel.Debug, `HubConnection failed to start successfully because of error '${e}'.`);\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n    async _startInternal() {\r\n        this._stopDuringStartError = undefined;\r\n        this._receivedHandshakeResponse = false;\r\n        // Set up the promise before any connection is (re)started otherwise it could race with received messages\r\n        const handshakePromise = new Promise((resolve, reject) => {\r\n            this._handshakeResolver = resolve;\r\n            this._handshakeRejecter = reject;\r\n        });\r\n        await this.connection.start(this._protocol.transferFormat);\r\n        try {\r\n            let version = this._protocol.version;\r\n            if (!this.connection.features.reconnect) {\r\n                // Stateful Reconnect starts with HubProtocol version 2, newer clients connecting to older servers will fail to connect due to\r\n                // the handshake only supporting version 1, so we will try to send version 1 during the handshake to keep old servers working.\r\n                version = 1;\r\n            }\r\n            const handshakeRequest = {\r\n                protocol: this._protocol.name,\r\n                version,\r\n            };\r\n            this._logger.log(LogLevel.Debug, \"Sending handshake request.\");\r\n            await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(handshakeRequest));\r\n            this._logger.log(LogLevel.Information, `Using HubProtocol '${this._protocol.name}'.`);\r\n            // defensively cleanup timeout in case we receive a message from the server before we finish start\r\n            this._cleanupTimeout();\r\n            this._resetTimeoutPeriod();\r\n            this._resetKeepAliveInterval();\r\n            await handshakePromise;\r\n            // It's important to check the stopDuringStartError instead of just relying on the handshakePromise\r\n            // being rejected on close, because this continuation can run after both the handshake completed successfully\r\n            // and the connection was closed.\r\n            if (this._stopDuringStartError) {\r\n                // It's important to throw instead of returning a rejected promise, because we don't want to allow any state\r\n                // transitions to occur between now and the calling code observing the exceptions. Returning a rejected promise\r\n                // will cause the calling continuation to get scheduled to run later.\r\n                // eslint-disable-next-line @typescript-eslint/no-throw-literal\r\n                throw this._stopDuringStartError;\r\n            }\r\n            const useStatefulReconnect = this.connection.features.reconnect || false;\r\n            if (useStatefulReconnect) {\r\n                this._messageBuffer = new MessageBuffer(this._protocol, this.connection, this._statefulReconnectBufferSize);\r\n                this.connection.features.disconnected = this._messageBuffer._disconnected.bind(this._messageBuffer);\r\n                this.connection.features.resend = () => {\r\n                    if (this._messageBuffer) {\r\n                        return this._messageBuffer._resend();\r\n                    }\r\n                };\r\n            }\r\n            if (!this.connection.features.inherentKeepAlive) {\r\n                await this._sendMessage(this._cachedPingMessage);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this._logger.log(LogLevel.Debug, `Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`);\r\n            this._cleanupTimeout();\r\n            this._cleanupPingTimer();\r\n            // HttpConnection.stop() should not complete until after the onclose callback is invoked.\r\n            // This will transition the HubConnection to the disconnected state before HttpConnection.stop() completes.\r\n            await this.connection.stop(e);\r\n            throw e;\r\n        }\r\n    }\r\n    /** Stops the connection.\r\n     *\r\n     * @returns {Promise<void>} A Promise that resolves when the connection has been successfully terminated, or rejects with an error.\r\n     */\r\n    async stop() {\r\n        // Capture the start promise before the connection might be restarted in an onclose callback.\r\n        const startPromise = this._startPromise;\r\n        this.connection.features.reconnect = false;\r\n        this._stopPromise = this._stopInternal();\r\n        await this._stopPromise;\r\n        try {\r\n            // Awaiting undefined continues immediately\r\n            await startPromise;\r\n        }\r\n        catch (e) {\r\n            // This exception is returned to the user as a rejected Promise from the start method.\r\n        }\r\n    }\r\n    _stopInternal(error) {\r\n        if (this._connectionState === HubConnectionState.Disconnected) {\r\n            this._logger.log(LogLevel.Debug, `Call to HubConnection.stop(${error}) ignored because it is already in the disconnected state.`);\r\n            return Promise.resolve();\r\n        }\r\n        if (this._connectionState === HubConnectionState.Disconnecting) {\r\n            this._logger.log(LogLevel.Debug, `Call to HttpConnection.stop(${error}) ignored because the connection is already in the disconnecting state.`);\r\n            return this._stopPromise;\r\n        }\r\n        const state = this._connectionState;\r\n        this._connectionState = HubConnectionState.Disconnecting;\r\n        this._logger.log(LogLevel.Debug, \"Stopping HubConnection.\");\r\n        if (this._reconnectDelayHandle) {\r\n            // We're in a reconnect delay which means the underlying connection is currently already stopped.\r\n            // Just clear the handle to stop the reconnect loop (which no one is waiting on thankfully) and\r\n            // fire the onclose callbacks.\r\n            this._logger.log(LogLevel.Debug, \"Connection stopped during reconnect delay. Done reconnecting.\");\r\n            clearTimeout(this._reconnectDelayHandle);\r\n            this._reconnectDelayHandle = undefined;\r\n            this._completeClose();\r\n            return Promise.resolve();\r\n        }\r\n        if (state === HubConnectionState.Connected) {\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            this._sendCloseMessage();\r\n        }\r\n        this._cleanupTimeout();\r\n        this._cleanupPingTimer();\r\n        this._stopDuringStartError = error || new AbortError(\"The connection was stopped before the hub handshake could complete.\");\r\n        // HttpConnection.stop() should not complete until after either HttpConnection.start() fails\r\n        // or the onclose callback is invoked. The onclose callback will transition the HubConnection\r\n        // to the disconnected state if need be before HttpConnection.stop() completes.\r\n        return this.connection.stop(error);\r\n    }\r\n    async _sendCloseMessage() {\r\n        try {\r\n            await this._sendWithProtocol(this._createCloseMessage());\r\n        }\r\n        catch {\r\n            // Ignore, this is a best effort attempt to let the server know the client closed gracefully.\r\n        }\r\n    }\r\n    /** Invokes a streaming hub method on the server using the specified name and arguments.\r\n     *\r\n     * @typeparam T The type of the items returned by the server.\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {IStreamResult<T>} An object that yields results from the server as they are received.\r\n     */\r\n    stream(methodName, ...args) {\r\n        const [streams, streamIds] = this._replaceStreamingParams(args);\r\n        const invocationDescriptor = this._createStreamInvocation(methodName, args, streamIds);\r\n        // eslint-disable-next-line prefer-const\r\n        let promiseQueue;\r\n        const subject = new Subject();\r\n        subject.cancelCallback = () => {\r\n            const cancelInvocation = this._createCancelInvocation(invocationDescriptor.invocationId);\r\n            delete this._callbacks[invocationDescriptor.invocationId];\r\n            return promiseQueue.then(() => {\r\n                return this._sendWithProtocol(cancelInvocation);\r\n            });\r\n        };\r\n        this._callbacks[invocationDescriptor.invocationId] = (invocationEvent, error) => {\r\n            if (error) {\r\n                subject.error(error);\r\n                return;\r\n            }\r\n            else if (invocationEvent) {\r\n                // invocationEvent will not be null when an error is not passed to the callback\r\n                if (invocationEvent.type === MessageType.Completion) {\r\n                    if (invocationEvent.error) {\r\n                        subject.error(new Error(invocationEvent.error));\r\n                    }\r\n                    else {\r\n                        subject.complete();\r\n                    }\r\n                }\r\n                else {\r\n                    subject.next((invocationEvent.item));\r\n                }\r\n            }\r\n        };\r\n        promiseQueue = this._sendWithProtocol(invocationDescriptor)\r\n            .catch((e) => {\r\n            subject.error(e);\r\n            delete this._callbacks[invocationDescriptor.invocationId];\r\n        });\r\n        this._launchStreams(streams, promiseQueue);\r\n        return subject;\r\n    }\r\n    _sendMessage(message) {\r\n        this._resetKeepAliveInterval();\r\n        return this.connection.send(message);\r\n    }\r\n    /**\r\n     * Sends a js object to the server.\r\n     * @param message The js object to serialize and send.\r\n     */\r\n    _sendWithProtocol(message) {\r\n        if (this._messageBuffer) {\r\n            return this._messageBuffer._send(message);\r\n        }\r\n        else {\r\n            return this._sendMessage(this._protocol.writeMessage(message));\r\n        }\r\n    }\r\n    /** Invokes a hub method on the server using the specified name and arguments. Does not wait for a response from the receiver.\r\n     *\r\n     * The Promise returned by this method resolves when the client has sent the invocation to the server. The server may still\r\n     * be processing the invocation.\r\n     *\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {Promise<void>} A Promise that resolves when the invocation has been successfully sent, or rejects with an error.\r\n     */\r\n    send(methodName, ...args) {\r\n        const [streams, streamIds] = this._replaceStreamingParams(args);\r\n        const sendPromise = this._sendWithProtocol(this._createInvocation(methodName, args, true, streamIds));\r\n        this._launchStreams(streams, sendPromise);\r\n        return sendPromise;\r\n    }\r\n    /** Invokes a hub method on the server using the specified name and arguments.\r\n     *\r\n     * The Promise returned by this method resolves when the server indicates it has finished invoking the method. When the promise\r\n     * resolves, the server has finished invoking the method. If the server method returns a result, it is produced as the result of\r\n     * resolving the Promise.\r\n     *\r\n     * @typeparam T The expected return type.\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {Promise<T>} A Promise that resolves with the result of the server method (if any), or rejects with an error.\r\n     */\r\n    invoke(methodName, ...args) {\r\n        const [streams, streamIds] = this._replaceStreamingParams(args);\r\n        const invocationDescriptor = this._createInvocation(methodName, args, false, streamIds);\r\n        const p = new Promise((resolve, reject) => {\r\n            // invocationId will always have a value for a non-blocking invocation\r\n            this._callbacks[invocationDescriptor.invocationId] = (invocationEvent, error) => {\r\n                if (error) {\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                else if (invocationEvent) {\r\n                    // invocationEvent will not be null when an error is not passed to the callback\r\n                    if (invocationEvent.type === MessageType.Completion) {\r\n                        if (invocationEvent.error) {\r\n                            reject(new Error(invocationEvent.error));\r\n                        }\r\n                        else {\r\n                            resolve(invocationEvent.result);\r\n                        }\r\n                    }\r\n                    else {\r\n                        reject(new Error(`Unexpected message type: ${invocationEvent.type}`));\r\n                    }\r\n                }\r\n            };\r\n            const promiseQueue = this._sendWithProtocol(invocationDescriptor)\r\n                .catch((e) => {\r\n                reject(e);\r\n                // invocationId will always have a value for a non-blocking invocation\r\n                delete this._callbacks[invocationDescriptor.invocationId];\r\n            });\r\n            this._launchStreams(streams, promiseQueue);\r\n        });\r\n        return p;\r\n    }\r\n    on(methodName, newMethod) {\r\n        if (!methodName || !newMethod) {\r\n            return;\r\n        }\r\n        methodName = methodName.toLowerCase();\r\n        if (!this._methods[methodName]) {\r\n            this._methods[methodName] = [];\r\n        }\r\n        // Preventing adding the same handler multiple times.\r\n        if (this._methods[methodName].indexOf(newMethod) !== -1) {\r\n            return;\r\n        }\r\n        this._methods[methodName].push(newMethod);\r\n    }\r\n    off(methodName, method) {\r\n        if (!methodName) {\r\n            return;\r\n        }\r\n        methodName = methodName.toLowerCase();\r\n        const handlers = this._methods[methodName];\r\n        if (!handlers) {\r\n            return;\r\n        }\r\n        if (method) {\r\n            const removeIdx = handlers.indexOf(method);\r\n            if (removeIdx !== -1) {\r\n                handlers.splice(removeIdx, 1);\r\n                if (handlers.length === 0) {\r\n                    delete this._methods[methodName];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            delete this._methods[methodName];\r\n        }\r\n    }\r\n    /** Registers a handler that will be invoked when the connection is closed.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection is closed. Optionally receives a single argument containing the error that caused the connection to close (if any).\r\n     */\r\n    onclose(callback) {\r\n        if (callback) {\r\n            this._closedCallbacks.push(callback);\r\n        }\r\n    }\r\n    /** Registers a handler that will be invoked when the connection starts reconnecting.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection starts reconnecting. Optionally receives a single argument containing the error that caused the connection to start reconnecting (if any).\r\n     */\r\n    onreconnecting(callback) {\r\n        if (callback) {\r\n            this._reconnectingCallbacks.push(callback);\r\n        }\r\n    }\r\n    /** Registers a handler that will be invoked when the connection successfully reconnects.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection successfully reconnects.\r\n     */\r\n    onreconnected(callback) {\r\n        if (callback) {\r\n            this._reconnectedCallbacks.push(callback);\r\n        }\r\n    }\r\n    _processIncomingData(data) {\r\n        this._cleanupTimeout();\r\n        if (!this._receivedHandshakeResponse) {\r\n            data = this._processHandshakeResponse(data);\r\n            this._receivedHandshakeResponse = true;\r\n        }\r\n        // Data may have all been read when processing handshake response\r\n        if (data) {\r\n            // Parse the messages\r\n            const messages = this._protocol.parseMessages(data, this._logger);\r\n            for (const message of messages) {\r\n                if (this._messageBuffer && !this._messageBuffer._shouldProcessMessage(message)) {\r\n                    // Don't process the message, we are either waiting for a SequenceMessage or received a duplicate message\r\n                    continue;\r\n                }\r\n                switch (message.type) {\r\n                    case MessageType.Invocation:\r\n                        this._invokeClientMethod(message)\r\n                            .catch((e) => {\r\n                            this._logger.log(LogLevel.Error, `Invoke client method threw error: ${getErrorString(e)}`);\r\n                        });\r\n                        break;\r\n                    case MessageType.StreamItem:\r\n                    case MessageType.Completion: {\r\n                        const callback = this._callbacks[message.invocationId];\r\n                        if (callback) {\r\n                            if (message.type === MessageType.Completion) {\r\n                                delete this._callbacks[message.invocationId];\r\n                            }\r\n                            try {\r\n                                callback(message);\r\n                            }\r\n                            catch (e) {\r\n                                this._logger.log(LogLevel.Error, `Stream callback threw error: ${getErrorString(e)}`);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case MessageType.Ping:\r\n                        // Don't care about pings\r\n                        break;\r\n                    case MessageType.Close: {\r\n                        this._logger.log(LogLevel.Information, \"Close message received from server.\");\r\n                        const error = message.error ? new Error(\"Server returned an error on close: \" + message.error) : undefined;\r\n                        if (message.allowReconnect === true) {\r\n                            // It feels wrong not to await connection.stop() here, but processIncomingData is called as part of an onreceive callback which is not async,\r\n                            // this is already the behavior for serverTimeout(), and HttpConnection.Stop() should catch and log all possible exceptions.\r\n                            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n                            this.connection.stop(error);\r\n                        }\r\n                        else {\r\n                            // We cannot await stopInternal() here, but subsequent calls to stop() will await this if stopInternal() is still ongoing.\r\n                            this._stopPromise = this._stopInternal(error);\r\n                        }\r\n                        break;\r\n                    }\r\n                    case MessageType.Ack:\r\n                        if (this._messageBuffer) {\r\n                            this._messageBuffer._ack(message);\r\n                        }\r\n                        break;\r\n                    case MessageType.Sequence:\r\n                        if (this._messageBuffer) {\r\n                            this._messageBuffer._resetSequence(message);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        this._logger.log(LogLevel.Warning, `Invalid message type: ${message.type}.`);\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        this._resetTimeoutPeriod();\r\n    }\r\n    _processHandshakeResponse(data) {\r\n        let responseMessage;\r\n        let remainingData;\r\n        try {\r\n            [remainingData, responseMessage] = this._handshakeProtocol.parseHandshakeResponse(data);\r\n        }\r\n        catch (e) {\r\n            const message = \"Error parsing handshake response: \" + e;\r\n            this._logger.log(LogLevel.Error, message);\r\n            const error = new Error(message);\r\n            this._handshakeRejecter(error);\r\n            throw error;\r\n        }\r\n        if (responseMessage.error) {\r\n            const message = \"Server returned handshake error: \" + responseMessage.error;\r\n            this._logger.log(LogLevel.Error, message);\r\n            const error = new Error(message);\r\n            this._handshakeRejecter(error);\r\n            throw error;\r\n        }\r\n        else {\r\n            this._logger.log(LogLevel.Debug, \"Server handshake complete.\");\r\n        }\r\n        this._handshakeResolver();\r\n        return remainingData;\r\n    }\r\n    _resetKeepAliveInterval() {\r\n        if (this.connection.features.inherentKeepAlive) {\r\n            return;\r\n        }\r\n        // Set the time we want the next keep alive to be sent\r\n        // Timer will be setup on next message receive\r\n        this._nextKeepAlive = new Date().getTime() + this.keepAliveIntervalInMilliseconds;\r\n        this._cleanupPingTimer();\r\n    }\r\n    _resetTimeoutPeriod() {\r\n        if (!this.connection.features || !this.connection.features.inherentKeepAlive) {\r\n            // Set the timeout timer\r\n            this._timeoutHandle = setTimeout(() => this.serverTimeout(), this.serverTimeoutInMilliseconds);\r\n            // Set keepAlive timer if there isn't one\r\n            if (this._pingServerHandle === undefined) {\r\n                let nextPing = this._nextKeepAlive - new Date().getTime();\r\n                if (nextPing < 0) {\r\n                    nextPing = 0;\r\n                }\r\n                // The timer needs to be set from a networking callback to avoid Chrome timer throttling from causing timers to run once a minute\r\n                this._pingServerHandle = setTimeout(async () => {\r\n                    if (this._connectionState === HubConnectionState.Connected) {\r\n                        try {\r\n                            await this._sendMessage(this._cachedPingMessage);\r\n                        }\r\n                        catch {\r\n                            // We don't care about the error. It should be seen elsewhere in the client.\r\n                            // The connection is probably in a bad or closed state now, cleanup the timer so it stops triggering\r\n                            this._cleanupPingTimer();\r\n                        }\r\n                    }\r\n                }, nextPing);\r\n            }\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    serverTimeout() {\r\n        // The server hasn't talked to us in a while. It doesn't like us anymore ... :(\r\n        // Terminate the connection, but we don't need to wait on the promise. This could trigger reconnecting.\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.connection.stop(new Error(\"Server timeout elapsed without receiving a message from the server.\"));\r\n    }\r\n    async _invokeClientMethod(invocationMessage) {\r\n        const methodName = invocationMessage.target.toLowerCase();\r\n        const methods = this._methods[methodName];\r\n        if (!methods) {\r\n            this._logger.log(LogLevel.Warning, `No client method with the name '${methodName}' found.`);\r\n            // No handlers provided by client but the server is expecting a response still, so we send an error\r\n            if (invocationMessage.invocationId) {\r\n                this._logger.log(LogLevel.Warning, `No result given for '${methodName}' method and invocation ID '${invocationMessage.invocationId}'.`);\r\n                await this._sendWithProtocol(this._createCompletionMessage(invocationMessage.invocationId, \"Client didn't provide a result.\", null));\r\n            }\r\n            return;\r\n        }\r\n        // Avoid issues with handlers removing themselves thus modifying the list while iterating through it\r\n        const methodsCopy = methods.slice();\r\n        // Server expects a response\r\n        const expectsResponse = invocationMessage.invocationId ? true : false;\r\n        // We preserve the last result or exception but still call all handlers\r\n        let res;\r\n        let exception;\r\n        let completionMessage;\r\n        for (const m of methodsCopy) {\r\n            try {\r\n                const prevRes = res;\r\n                res = await m.apply(this, invocationMessage.arguments);\r\n                if (expectsResponse && res && prevRes) {\r\n                    this._logger.log(LogLevel.Error, `Multiple results provided for '${methodName}'. Sending error to server.`);\r\n                    completionMessage = this._createCompletionMessage(invocationMessage.invocationId, `Client provided multiple results.`, null);\r\n                }\r\n                // Ignore exception if we got a result after, the exception will be logged\r\n                exception = undefined;\r\n            }\r\n            catch (e) {\r\n                exception = e;\r\n                this._logger.log(LogLevel.Error, `A callback for the method '${methodName}' threw error '${e}'.`);\r\n            }\r\n        }\r\n        if (completionMessage) {\r\n            await this._sendWithProtocol(completionMessage);\r\n        }\r\n        else if (expectsResponse) {\r\n            // If there is an exception that means either no result was given or a handler after a result threw\r\n            if (exception) {\r\n                completionMessage = this._createCompletionMessage(invocationMessage.invocationId, `${exception}`, null);\r\n            }\r\n            else if (res !== undefined) {\r\n                completionMessage = this._createCompletionMessage(invocationMessage.invocationId, null, res);\r\n            }\r\n            else {\r\n                this._logger.log(LogLevel.Warning, `No result given for '${methodName}' method and invocation ID '${invocationMessage.invocationId}'.`);\r\n                // Client didn't provide a result or throw from a handler, server expects a response so we send an error\r\n                completionMessage = this._createCompletionMessage(invocationMessage.invocationId, \"Client didn't provide a result.\", null);\r\n            }\r\n            await this._sendWithProtocol(completionMessage);\r\n        }\r\n        else {\r\n            if (res) {\r\n                this._logger.log(LogLevel.Error, `Result given for '${methodName}' method but server is not expecting a result.`);\r\n            }\r\n        }\r\n    }\r\n    _connectionClosed(error) {\r\n        this._logger.log(LogLevel.Debug, `HubConnection.connectionClosed(${error}) called while in state ${this._connectionState}.`);\r\n        // Triggering this.handshakeRejecter is insufficient because it could already be resolved without the continuation having run yet.\r\n        this._stopDuringStartError = this._stopDuringStartError || error || new AbortError(\"The underlying connection was closed before the hub handshake could complete.\");\r\n        // If the handshake is in progress, start will be waiting for the handshake promise, so we complete it.\r\n        // If it has already completed, this should just noop.\r\n        if (this._handshakeResolver) {\r\n            this._handshakeResolver();\r\n        }\r\n        this._cancelCallbacksWithError(error || new Error(\"Invocation canceled due to the underlying connection being closed.\"));\r\n        this._cleanupTimeout();\r\n        this._cleanupPingTimer();\r\n        if (this._connectionState === HubConnectionState.Disconnecting) {\r\n            this._completeClose(error);\r\n        }\r\n        else if (this._connectionState === HubConnectionState.Connected && this._reconnectPolicy) {\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            this._reconnect(error);\r\n        }\r\n        else if (this._connectionState === HubConnectionState.Connected) {\r\n            this._completeClose(error);\r\n        }\r\n        // If none of the above if conditions were true were called the HubConnection must be in either:\r\n        // 1. The Connecting state in which case the handshakeResolver will complete it and stopDuringStartError will fail it.\r\n        // 2. The Reconnecting state in which case the handshakeResolver will complete it and stopDuringStartError will fail the current reconnect attempt\r\n        //    and potentially continue the reconnect() loop.\r\n        // 3. The Disconnected state in which case we're already done.\r\n    }\r\n    _completeClose(error) {\r\n        if (this._connectionStarted) {\r\n            this._connectionState = HubConnectionState.Disconnected;\r\n            this._connectionStarted = false;\r\n            if (this._messageBuffer) {\r\n                this._messageBuffer._dispose(error !== null && error !== void 0 ? error : new Error(\"Connection closed.\"));\r\n                this._messageBuffer = undefined;\r\n            }\r\n            if (Platform.isBrowser) {\r\n                window.document.removeEventListener(\"freeze\", this._freezeEventListener);\r\n            }\r\n            try {\r\n                this._closedCallbacks.forEach((c) => c.apply(this, [error]));\r\n            }\r\n            catch (e) {\r\n                this._logger.log(LogLevel.Error, `An onclose callback called with error '${error}' threw error '${e}'.`);\r\n            }\r\n        }\r\n    }\r\n    async _reconnect(error) {\r\n        const reconnectStartTime = Date.now();\r\n        let previousReconnectAttempts = 0;\r\n        let retryError = error !== undefined ? error : new Error(\"Attempting to reconnect due to a unknown error.\");\r\n        let nextRetryDelay = this._getNextRetryDelay(previousReconnectAttempts++, 0, retryError);\r\n        if (nextRetryDelay === null) {\r\n            this._logger.log(LogLevel.Debug, \"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt.\");\r\n            this._completeClose(error);\r\n            return;\r\n        }\r\n        this._connectionState = HubConnectionState.Reconnecting;\r\n        if (error) {\r\n            this._logger.log(LogLevel.Information, `Connection reconnecting because of error '${error}'.`);\r\n        }\r\n        else {\r\n            this._logger.log(LogLevel.Information, \"Connection reconnecting.\");\r\n        }\r\n        if (this._reconnectingCallbacks.length !== 0) {\r\n            try {\r\n                this._reconnectingCallbacks.forEach((c) => c.apply(this, [error]));\r\n            }\r\n            catch (e) {\r\n                this._logger.log(LogLevel.Error, `An onreconnecting callback called with error '${error}' threw error '${e}'.`);\r\n            }\r\n            // Exit early if an onreconnecting callback called connection.stop().\r\n            if (this._connectionState !== HubConnectionState.Reconnecting) {\r\n                this._logger.log(LogLevel.Debug, \"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.\");\r\n                return;\r\n            }\r\n        }\r\n        while (nextRetryDelay !== null) {\r\n            this._logger.log(LogLevel.Information, `Reconnect attempt number ${previousReconnectAttempts} will start in ${nextRetryDelay} ms.`);\r\n            await new Promise((resolve) => {\r\n                this._reconnectDelayHandle = setTimeout(resolve, nextRetryDelay);\r\n            });\r\n            this._reconnectDelayHandle = undefined;\r\n            if (this._connectionState !== HubConnectionState.Reconnecting) {\r\n                this._logger.log(LogLevel.Debug, \"Connection left the reconnecting state during reconnect delay. Done reconnecting.\");\r\n                return;\r\n            }\r\n            try {\r\n                await this._startInternal();\r\n                this._connectionState = HubConnectionState.Connected;\r\n                this._logger.log(LogLevel.Information, \"HubConnection reconnected successfully.\");\r\n                if (this._reconnectedCallbacks.length !== 0) {\r\n                    try {\r\n                        this._reconnectedCallbacks.forEach((c) => c.apply(this, [this.connection.connectionId]));\r\n                    }\r\n                    catch (e) {\r\n                        this._logger.log(LogLevel.Error, `An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${e}'.`);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            catch (e) {\r\n                this._logger.log(LogLevel.Information, `Reconnect attempt failed because of error '${e}'.`);\r\n                if (this._connectionState !== HubConnectionState.Reconnecting) {\r\n                    this._logger.log(LogLevel.Debug, `Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`);\r\n                    // The TypeScript compiler thinks that connectionState must be Connected here. The TypeScript compiler is wrong.\r\n                    if (this._connectionState === HubConnectionState.Disconnecting) {\r\n                        this._completeClose();\r\n                    }\r\n                    return;\r\n                }\r\n                retryError = e instanceof Error ? e : new Error(e.toString());\r\n                nextRetryDelay = this._getNextRetryDelay(previousReconnectAttempts++, Date.now() - reconnectStartTime, retryError);\r\n            }\r\n        }\r\n        this._logger.log(LogLevel.Information, `Reconnect retries have been exhausted after ${Date.now() - reconnectStartTime} ms and ${previousReconnectAttempts} failed attempts. Connection disconnecting.`);\r\n        this._completeClose();\r\n    }\r\n    _getNextRetryDelay(previousRetryCount, elapsedMilliseconds, retryReason) {\r\n        try {\r\n            return this._reconnectPolicy.nextRetryDelayInMilliseconds({\r\n                elapsedMilliseconds,\r\n                previousRetryCount,\r\n                retryReason,\r\n            });\r\n        }\r\n        catch (e) {\r\n            this._logger.log(LogLevel.Error, `IRetryPolicy.nextRetryDelayInMilliseconds(${previousRetryCount}, ${elapsedMilliseconds}) threw error '${e}'.`);\r\n            return null;\r\n        }\r\n    }\r\n    _cancelCallbacksWithError(error) {\r\n        const callbacks = this._callbacks;\r\n        this._callbacks = {};\r\n        Object.keys(callbacks)\r\n            .forEach((key) => {\r\n            const callback = callbacks[key];\r\n            try {\r\n                callback(null, error);\r\n            }\r\n            catch (e) {\r\n                this._logger.log(LogLevel.Error, `Stream 'error' callback called with '${error}' threw error: ${getErrorString(e)}`);\r\n            }\r\n        });\r\n    }\r\n    _cleanupPingTimer() {\r\n        if (this._pingServerHandle) {\r\n            clearTimeout(this._pingServerHandle);\r\n            this._pingServerHandle = undefined;\r\n        }\r\n    }\r\n    _cleanupTimeout() {\r\n        if (this._timeoutHandle) {\r\n            clearTimeout(this._timeoutHandle);\r\n        }\r\n    }\r\n    _createInvocation(methodName, args, nonblocking, streamIds) {\r\n        if (nonblocking) {\r\n            if (streamIds.length !== 0) {\r\n                return {\r\n                    target: methodName,\r\n                    arguments: args,\r\n                    streamIds,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    target: methodName,\r\n                    arguments: args,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            const invocationId = this._invocationId;\r\n            this._invocationId++;\r\n            if (streamIds.length !== 0) {\r\n                return {\r\n                    target: methodName,\r\n                    arguments: args,\r\n                    invocationId: invocationId.toString(),\r\n                    streamIds,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    target: methodName,\r\n                    arguments: args,\r\n                    invocationId: invocationId.toString(),\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n        }\r\n    }\r\n    _launchStreams(streams, promiseQueue) {\r\n        if (streams.length === 0) {\r\n            return;\r\n        }\r\n        // Synchronize stream data so they arrive in-order on the server\r\n        if (!promiseQueue) {\r\n            promiseQueue = Promise.resolve();\r\n        }\r\n        // We want to iterate over the keys, since the keys are the stream ids\r\n        // eslint-disable-next-line guard-for-in\r\n        for (const streamId in streams) {\r\n            streams[streamId].subscribe({\r\n                complete: () => {\r\n                    promiseQueue = promiseQueue.then(() => this._sendWithProtocol(this._createCompletionMessage(streamId)));\r\n                },\r\n                error: (err) => {\r\n                    let message;\r\n                    if (err instanceof Error) {\r\n                        message = err.message;\r\n                    }\r\n                    else if (err && err.toString) {\r\n                        message = err.toString();\r\n                    }\r\n                    else {\r\n                        message = \"Unknown error\";\r\n                    }\r\n                    promiseQueue = promiseQueue.then(() => this._sendWithProtocol(this._createCompletionMessage(streamId, message)));\r\n                },\r\n                next: (item) => {\r\n                    promiseQueue = promiseQueue.then(() => this._sendWithProtocol(this._createStreamItemMessage(streamId, item)));\r\n                },\r\n            });\r\n        }\r\n    }\r\n    _replaceStreamingParams(args) {\r\n        const streams = [];\r\n        const streamIds = [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            const argument = args[i];\r\n            if (this._isObservable(argument)) {\r\n                const streamId = this._invocationId;\r\n                this._invocationId++;\r\n                // Store the stream for later use\r\n                streams[streamId] = argument;\r\n                streamIds.push(streamId.toString());\r\n                // remove stream from args\r\n                args.splice(i, 1);\r\n            }\r\n        }\r\n        return [streams, streamIds];\r\n    }\r\n    _isObservable(arg) {\r\n        // This allows other stream implementations to just work (like rxjs)\r\n        return arg && arg.subscribe && typeof arg.subscribe === \"function\";\r\n    }\r\n    _createStreamInvocation(methodName, args, streamIds) {\r\n        const invocationId = this._invocationId;\r\n        this._invocationId++;\r\n        if (streamIds.length !== 0) {\r\n            return {\r\n                target: methodName,\r\n                arguments: args,\r\n                invocationId: invocationId.toString(),\r\n                streamIds,\r\n                type: MessageType.StreamInvocation,\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                target: methodName,\r\n                arguments: args,\r\n                invocationId: invocationId.toString(),\r\n                type: MessageType.StreamInvocation,\r\n            };\r\n        }\r\n    }\r\n    _createCancelInvocation(id) {\r\n        return {\r\n            invocationId: id,\r\n            type: MessageType.CancelInvocation,\r\n        };\r\n    }\r\n    _createStreamItemMessage(id, item) {\r\n        return {\r\n            invocationId: id,\r\n            item,\r\n            type: MessageType.StreamItem,\r\n        };\r\n    }\r\n    _createCompletionMessage(id, error, result) {\r\n        if (error) {\r\n            return {\r\n                error,\r\n                invocationId: id,\r\n                type: MessageType.Completion,\r\n            };\r\n        }\r\n        return {\r\n            invocationId: id,\r\n            result,\r\n            type: MessageType.Completion,\r\n        };\r\n    }\r\n    _createCloseMessage() {\r\n        return { type: MessageType.Close };\r\n    }\r\n}\r\n//# sourceMappingURL=HubConnection.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { SubjectSubscription } from \"./Utils\";\r\n/** Stream implementation to stream items to the server. */\r\nexport class Subject {\r\n    constructor() {\r\n        this.observers = [];\r\n    }\r\n    next(item) {\r\n        for (const observer of this.observers) {\r\n            observer.next(item);\r\n        }\r\n    }\r\n    error(err) {\r\n        for (const observer of this.observers) {\r\n            if (observer.error) {\r\n                observer.error(err);\r\n            }\r\n        }\r\n    }\r\n    complete() {\r\n        for (const observer of this.observers) {\r\n            if (observer.complete) {\r\n                observer.complete();\r\n            }\r\n        }\r\n    }\r\n    subscribe(observer) {\r\n        this.observers.push(observer);\r\n        return new SubjectSubscription(this, observer);\r\n    }\r\n}\r\n//# sourceMappingURL=Subject.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { MessageType } from \"./IHubProtocol\";\r\nimport { isArrayBuffer } from \"./Utils\";\r\n/** @private */\r\nexport class MessageBuffer {\r\n    constructor(protocol, connection, bufferSize) {\r\n        this._bufferSize = 100000;\r\n        this._messages = [];\r\n        this._totalMessageCount = 0;\r\n        this._waitForSequenceMessage = false;\r\n        // Message IDs start at 1 and always increment by 1\r\n        this._nextReceivingSequenceId = 1;\r\n        this._latestReceivedSequenceId = 0;\r\n        this._bufferedByteCount = 0;\r\n        this._reconnectInProgress = false;\r\n        this._protocol = protocol;\r\n        this._connection = connection;\r\n        this._bufferSize = bufferSize;\r\n    }\r\n    async _send(message) {\r\n        const serializedMessage = this._protocol.writeMessage(message);\r\n        let backpressurePromise = Promise.resolve();\r\n        // Only count invocation messages. Acks, pings, etc. don't need to be resent on reconnect\r\n        if (this._isInvocationMessage(message)) {\r\n            this._totalMessageCount++;\r\n            let backpressurePromiseResolver = () => { };\r\n            let backpressurePromiseRejector = () => { };\r\n            if (isArrayBuffer(serializedMessage)) {\r\n                this._bufferedByteCount += serializedMessage.byteLength;\r\n            }\r\n            else {\r\n                this._bufferedByteCount += serializedMessage.length;\r\n            }\r\n            if (this._bufferedByteCount >= this._bufferSize) {\r\n                backpressurePromise = new Promise((resolve, reject) => {\r\n                    backpressurePromiseResolver = resolve;\r\n                    backpressurePromiseRejector = reject;\r\n                });\r\n            }\r\n            this._messages.push(new BufferedItem(serializedMessage, this._totalMessageCount, backpressurePromiseResolver, backpressurePromiseRejector));\r\n        }\r\n        try {\r\n            // If this is set it means we are reconnecting or resending\r\n            // We don't want to send on a disconnected connection\r\n            // And we don't want to send if resend is running since that would mean sending\r\n            // this message twice\r\n            if (!this._reconnectInProgress) {\r\n                await this._connection.send(serializedMessage);\r\n            }\r\n        }\r\n        catch {\r\n            this._disconnected();\r\n        }\r\n        await backpressurePromise;\r\n    }\r\n    _ack(ackMessage) {\r\n        let newestAckedMessage = -1;\r\n        // Find index of newest message being acked\r\n        for (let index = 0; index < this._messages.length; index++) {\r\n            const element = this._messages[index];\r\n            if (element._id <= ackMessage.sequenceId) {\r\n                newestAckedMessage = index;\r\n                if (isArrayBuffer(element._message)) {\r\n                    this._bufferedByteCount -= element._message.byteLength;\r\n                }\r\n                else {\r\n                    this._bufferedByteCount -= element._message.length;\r\n                }\r\n                // resolve items that have already been sent and acked\r\n                element._resolver();\r\n            }\r\n            else if (this._bufferedByteCount < this._bufferSize) {\r\n                // resolve items that now fall under the buffer limit but haven't been acked\r\n                element._resolver();\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (newestAckedMessage !== -1) {\r\n            // We're removing everything including the message pointed to, so add 1\r\n            this._messages = this._messages.slice(newestAckedMessage + 1);\r\n        }\r\n    }\r\n    _shouldProcessMessage(message) {\r\n        if (this._waitForSequenceMessage) {\r\n            if (message.type !== MessageType.Sequence) {\r\n                return false;\r\n            }\r\n            else {\r\n                this._waitForSequenceMessage = false;\r\n                return true;\r\n            }\r\n        }\r\n        // No special processing for acks, pings, etc.\r\n        if (!this._isInvocationMessage(message)) {\r\n            return true;\r\n        }\r\n        const currentId = this._nextReceivingSequenceId;\r\n        this._nextReceivingSequenceId++;\r\n        if (currentId <= this._latestReceivedSequenceId) {\r\n            if (currentId === this._latestReceivedSequenceId) {\r\n                // Should only hit this if we just reconnected and the server is sending\r\n                // Messages it has buffered, which would mean it hasn't seen an Ack for these messages\r\n                this._ackTimer();\r\n            }\r\n            // Ignore, this is a duplicate message\r\n            return false;\r\n        }\r\n        this._latestReceivedSequenceId = currentId;\r\n        // Only start the timer for sending an Ack message when we have a message to ack. This also conveniently solves\r\n        // timer throttling by not having a recursive timer, and by starting the timer via a network call (recv)\r\n        this._ackTimer();\r\n        return true;\r\n    }\r\n    _resetSequence(message) {\r\n        if (message.sequenceId > this._nextReceivingSequenceId) {\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            this._connection.stop(new Error(\"Sequence ID greater than amount of messages we've received.\"));\r\n            return;\r\n        }\r\n        this._nextReceivingSequenceId = message.sequenceId;\r\n    }\r\n    _disconnected() {\r\n        this._reconnectInProgress = true;\r\n        this._waitForSequenceMessage = true;\r\n    }\r\n    async _resend() {\r\n        const sequenceId = this._messages.length !== 0\r\n            ? this._messages[0]._id\r\n            : this._totalMessageCount + 1;\r\n        await this._connection.send(this._protocol.writeMessage({ type: MessageType.Sequence, sequenceId }));\r\n        // Get a local variable to the _messages, just in case messages are acked while resending\r\n        // Which would slice the _messages array (which creates a new copy)\r\n        const messages = this._messages;\r\n        for (const element of messages) {\r\n            await this._connection.send(element._message);\r\n        }\r\n        this._reconnectInProgress = false;\r\n    }\r\n    _dispose(error) {\r\n        error !== null && error !== void 0 ? error : (error = new Error(\"Unable to reconnect to server.\"));\r\n        // Unblock backpressure if any\r\n        for (const element of this._messages) {\r\n            element._rejector(error);\r\n        }\r\n    }\r\n    _isInvocationMessage(message) {\r\n        // There is no way to check if something implements an interface.\r\n        // So we individually check the messages in a switch statement.\r\n        // To make sure we don't miss any message types we rely on the compiler\r\n        // seeing the function returns a value and it will do the\r\n        // exhaustive check for us on the switch statement, since we don't use 'case default'\r\n        switch (message.type) {\r\n            case MessageType.Invocation:\r\n            case MessageType.StreamItem:\r\n            case MessageType.Completion:\r\n            case MessageType.StreamInvocation:\r\n            case MessageType.CancelInvocation:\r\n                return true;\r\n            case MessageType.Close:\r\n            case MessageType.Sequence:\r\n            case MessageType.Ping:\r\n            case MessageType.Ack:\r\n                return false;\r\n        }\r\n    }\r\n    _ackTimer() {\r\n        if (this._ackTimerHandle === undefined) {\r\n            this._ackTimerHandle = setTimeout(async () => {\r\n                try {\r\n                    if (!this._reconnectInProgress) {\r\n                        await this._connection.send(this._protocol.writeMessage({ type: MessageType.Ack, sequenceId: this._latestReceivedSequenceId }));\r\n                    }\r\n                    // Ignore errors, that means the connection is closed and we don't care about the Ack message anymore.\r\n                }\r\n                catch { }\r\n                clearTimeout(this._ackTimerHandle);\r\n                this._ackTimerHandle = undefined;\r\n                // 1 second delay so we don't spam Ack messages if there are many messages being received at once.\r\n            }, 1000);\r\n        }\r\n    }\r\n}\r\nclass BufferedItem {\r\n    constructor(message, id, resolver, rejector) {\r\n        this._message = message;\r\n        this._id = id;\r\n        this._resolver = resolver;\r\n        this._rejector = rejector;\r\n    }\r\n}\r\n//# sourceMappingURL=MessageBuffer.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n// 0, 2, 10, 30 second delays before reconnect attempts.\r\nconst DEFAULT_RETRY_DELAYS_IN_MILLISECONDS = [0, 2000, 10000, 30000, null];\r\n/** @private */\r\nexport class DefaultReconnectPolicy {\r\n    constructor(retryDelays) {\r\n        this._retryDelays = retryDelays !== undefined ? [...retryDelays, null] : DEFAULT_RETRY_DELAYS_IN_MILLISECONDS;\r\n    }\r\n    nextRetryDelayInMilliseconds(retryContext) {\r\n        return this._retryDelays[retryContext.previousRetryCount];\r\n    }\r\n}\r\n//# sourceMappingURL=DefaultReconnectPolicy.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nexport class HeaderNames {\r\n}\r\nHeaderNames.Authorization = \"Authorization\";\r\nHeaderNames.Cookie = \"Cookie\";\r\n//# sourceMappingURL=HeaderNames.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { HeaderNames } from \"./HeaderNames\";\r\nimport { HttpClient } from \"./HttpClient\";\r\n/** @private */\r\nexport class AccessTokenHttpClient extends HttpClient {\r\n    constructor(innerClient, accessTokenFactory) {\r\n        super();\r\n        this._innerClient = innerClient;\r\n        this._accessTokenFactory = accessTokenFactory;\r\n    }\r\n    async send(request) {\r\n        let allowRetry = true;\r\n        if (this._accessTokenFactory && (!this._accessToken || (request.url && request.url.indexOf(\"/negotiate?\") > 0))) {\r\n            // don't retry if the request is a negotiate or if we just got a potentially new token from the access token factory\r\n            allowRetry = false;\r\n            this._accessToken = await this._accessTokenFactory();\r\n        }\r\n        this._setAuthorizationHeader(request);\r\n        const response = await this._innerClient.send(request);\r\n        if (allowRetry && response.statusCode === 401 && this._accessTokenFactory) {\r\n            this._accessToken = await this._accessTokenFactory();\r\n            this._setAuthorizationHeader(request);\r\n            return await this._innerClient.send(request);\r\n        }\r\n        return response;\r\n    }\r\n    _setAuthorizationHeader(request) {\r\n        if (!request.headers) {\r\n            request.headers = {};\r\n        }\r\n        if (this._accessToken) {\r\n            request.headers[HeaderNames.Authorization] = `Bearer ${this._accessToken}`;\r\n        }\r\n        // don't remove the header if there isn't an access token factory, the user manually added the header in this case\r\n        else if (this._accessTokenFactory) {\r\n            if (request.headers[HeaderNames.Authorization]) {\r\n                delete request.headers[HeaderNames.Authorization];\r\n            }\r\n        }\r\n    }\r\n    getCookieString(url) {\r\n        return this._innerClient.getCookieString(url);\r\n    }\r\n}\r\n//# sourceMappingURL=AccessTokenHttpClient.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n// This will be treated as a bit flag in the future, so we keep it using power-of-two values.\r\n/** Specifies a specific HTTP transport type. */\r\nexport var HttpTransportType;\r\n(function (HttpTransportType) {\r\n    /** Specifies no transport preference. */\r\n    HttpTransportType[HttpTransportType[\"None\"] = 0] = \"None\";\r\n    /** Specifies the WebSockets transport. */\r\n    HttpTransportType[HttpTransportType[\"WebSockets\"] = 1] = \"WebSockets\";\r\n    /** Specifies the Server-Sent Events transport. */\r\n    HttpTransportType[HttpTransportType[\"ServerSentEvents\"] = 2] = \"ServerSentEvents\";\r\n    /** Specifies the Long Polling transport. */\r\n    HttpTransportType[HttpTransportType[\"LongPolling\"] = 4] = \"LongPolling\";\r\n})(HttpTransportType || (HttpTransportType = {}));\r\n/** Specifies the transfer format for a connection. */\r\nexport var TransferFormat;\r\n(function (TransferFormat) {\r\n    /** Specifies that only text data will be transmitted over the connection. */\r\n    TransferFormat[TransferFormat[\"Text\"] = 1] = \"Text\";\r\n    /** Specifies that binary data will be transmitted over the connection. */\r\n    TransferFormat[TransferFormat[\"Binary\"] = 2] = \"Binary\";\r\n})(TransferFormat || (TransferFormat = {}));\r\n//# sourceMappingURL=ITransport.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n// Rough polyfill of https://developer.mozilla.org/en-US/docs/Web/API/AbortController\r\n// We don't actually ever use the API being polyfilled, we always use the polyfill because\r\n// it's a very new API right now.\r\n// Not exported from index.\r\n/** @private */\r\nexport class AbortController {\r\n    constructor() {\r\n        this._isAborted = false;\r\n        this.onabort = null;\r\n    }\r\n    abort() {\r\n        if (!this._isAborted) {\r\n            this._isAborted = true;\r\n            if (this.onabort) {\r\n                this.onabort();\r\n            }\r\n        }\r\n    }\r\n    get signal() {\r\n        return this;\r\n    }\r\n    get aborted() {\r\n        return this._isAborted;\r\n    }\r\n}\r\n//# sourceMappingURL=AbortController.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { AbortController } from \"./AbortController\";\r\nimport { HttpError, TimeoutError } from \"./Errors\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, sendMessage } from \"./Utils\";\r\n// Not exported from 'index', this type is internal.\r\n/** @private */\r\nexport class LongPollingTransport {\r\n    // This is an internal type, not exported from 'index' so this is really just internal.\r\n    get pollAborted() {\r\n        return this._pollAbort.aborted;\r\n    }\r\n    constructor(httpClient, logger, options) {\r\n        this._httpClient = httpClient;\r\n        this._logger = logger;\r\n        this._pollAbort = new AbortController();\r\n        this._options = options;\r\n        this._running = false;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    async connect(url, transferFormat) {\r\n        Arg.isRequired(url, \"url\");\r\n        Arg.isRequired(transferFormat, \"transferFormat\");\r\n        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n        this._url = url;\r\n        this._logger.log(LogLevel.Trace, \"(LongPolling transport) Connecting.\");\r\n        // Allow binary format on Node and Browsers that support binary content (indicated by the presence of responseType property)\r\n        if (transferFormat === TransferFormat.Binary &&\r\n            (typeof XMLHttpRequest !== \"undefined\" && typeof new XMLHttpRequest().responseType !== \"string\")) {\r\n            throw new Error(\"Binary protocols over XmlHttpRequest not implementing advanced features are not supported.\");\r\n        }\r\n        const [name, value] = getUserAgentHeader();\r\n        const headers = { [name]: value, ...this._options.headers };\r\n        const pollOptions = {\r\n            abortSignal: this._pollAbort.signal,\r\n            headers,\r\n            timeout: 100000,\r\n            withCredentials: this._options.withCredentials,\r\n        };\r\n        if (transferFormat === TransferFormat.Binary) {\r\n            pollOptions.responseType = \"arraybuffer\";\r\n        }\r\n        // Make initial long polling request\r\n        // Server uses first long polling request to finish initializing connection and it returns without data\r\n        const pollUrl = `${url}&_=${Date.now()}`;\r\n        this._logger.log(LogLevel.Trace, `(LongPolling transport) polling: ${pollUrl}.`);\r\n        const response = await this._httpClient.get(pollUrl, pollOptions);\r\n        if (response.statusCode !== 200) {\r\n            this._logger.log(LogLevel.Error, `(LongPolling transport) Unexpected response code: ${response.statusCode}.`);\r\n            // Mark running as false so that the poll immediately ends and runs the close logic\r\n            this._closeError = new HttpError(response.statusText || \"\", response.statusCode);\r\n            this._running = false;\r\n        }\r\n        else {\r\n            this._running = true;\r\n        }\r\n        this._receiving = this._poll(this._url, pollOptions);\r\n    }\r\n    async _poll(url, pollOptions) {\r\n        try {\r\n            while (this._running) {\r\n                try {\r\n                    const pollUrl = `${url}&_=${Date.now()}`;\r\n                    this._logger.log(LogLevel.Trace, `(LongPolling transport) polling: ${pollUrl}.`);\r\n                    const response = await this._httpClient.get(pollUrl, pollOptions);\r\n                    if (response.statusCode === 204) {\r\n                        this._logger.log(LogLevel.Information, \"(LongPolling transport) Poll terminated by server.\");\r\n                        this._running = false;\r\n                    }\r\n                    else if (response.statusCode !== 200) {\r\n                        this._logger.log(LogLevel.Error, `(LongPolling transport) Unexpected response code: ${response.statusCode}.`);\r\n                        // Unexpected status code\r\n                        this._closeError = new HttpError(response.statusText || \"\", response.statusCode);\r\n                        this._running = false;\r\n                    }\r\n                    else {\r\n                        // Process the response\r\n                        if (response.content) {\r\n                            this._logger.log(LogLevel.Trace, `(LongPolling transport) data received. ${getDataDetail(response.content, this._options.logMessageContent)}.`);\r\n                            if (this.onreceive) {\r\n                                this.onreceive(response.content);\r\n                            }\r\n                        }\r\n                        else {\r\n                            // This is another way timeout manifest.\r\n                            this._logger.log(LogLevel.Trace, \"(LongPolling transport) Poll timed out, reissuing.\");\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    if (!this._running) {\r\n                        // Log but disregard errors that occur after stopping\r\n                        this._logger.log(LogLevel.Trace, `(LongPolling transport) Poll errored after shutdown: ${e.message}`);\r\n                    }\r\n                    else {\r\n                        if (e instanceof TimeoutError) {\r\n                            // Ignore timeouts and reissue the poll.\r\n                            this._logger.log(LogLevel.Trace, \"(LongPolling transport) Poll timed out, reissuing.\");\r\n                        }\r\n                        else {\r\n                            // Close the connection with the error as the result.\r\n                            this._closeError = e;\r\n                            this._running = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        finally {\r\n            this._logger.log(LogLevel.Trace, \"(LongPolling transport) Polling complete.\");\r\n            // We will reach here with pollAborted==false when the server returned a response causing the transport to stop.\r\n            // If pollAborted==true then client initiated the stop and the stop method will raise the close event after DELETE is sent.\r\n            if (!this.pollAborted) {\r\n                this._raiseOnClose();\r\n            }\r\n        }\r\n    }\r\n    async send(data) {\r\n        if (!this._running) {\r\n            return Promise.reject(new Error(\"Cannot send until the transport is connected\"));\r\n        }\r\n        return sendMessage(this._logger, \"LongPolling\", this._httpClient, this._url, data, this._options);\r\n    }\r\n    async stop() {\r\n        this._logger.log(LogLevel.Trace, \"(LongPolling transport) Stopping polling.\");\r\n        // Tell receiving loop to stop, abort any current request, and then wait for it to finish\r\n        this._running = false;\r\n        this._pollAbort.abort();\r\n        try {\r\n            await this._receiving;\r\n            // Send DELETE to clean up long polling on the server\r\n            this._logger.log(LogLevel.Trace, `(LongPolling transport) sending DELETE request to ${this._url}.`);\r\n            const headers = {};\r\n            const [name, value] = getUserAgentHeader();\r\n            headers[name] = value;\r\n            const deleteOptions = {\r\n                headers: { ...headers, ...this._options.headers },\r\n                timeout: this._options.timeout,\r\n                withCredentials: this._options.withCredentials,\r\n            };\r\n            let error;\r\n            try {\r\n                await this._httpClient.delete(this._url, deleteOptions);\r\n            }\r\n            catch (err) {\r\n                error = err;\r\n            }\r\n            if (error) {\r\n                if (error instanceof HttpError) {\r\n                    if (error.statusCode === 404) {\r\n                        this._logger.log(LogLevel.Trace, \"(LongPolling transport) A 404 response was returned from sending a DELETE request.\");\r\n                    }\r\n                    else {\r\n                        this._logger.log(LogLevel.Trace, `(LongPolling transport) Error sending a DELETE request: ${error}`);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this._logger.log(LogLevel.Trace, \"(LongPolling transport) DELETE request accepted.\");\r\n            }\r\n        }\r\n        finally {\r\n            this._logger.log(LogLevel.Trace, \"(LongPolling transport) Stop finished.\");\r\n            // Raise close event here instead of in polling\r\n            // It needs to happen after the DELETE request is sent\r\n            this._raiseOnClose();\r\n        }\r\n    }\r\n    _raiseOnClose() {\r\n        if (this.onclose) {\r\n            let logMessage = \"(LongPolling transport) Firing onclose event.\";\r\n            if (this._closeError) {\r\n                logMessage += \" Error: \" + this._closeError;\r\n            }\r\n            this._logger.log(LogLevel.Trace, logMessage);\r\n            this.onclose(this._closeError);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=LongPollingTransport.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, Platform, sendMessage } from \"./Utils\";\r\n/** @private */\r\nexport class ServerSentEventsTransport {\r\n    constructor(httpClient, accessToken, logger, options) {\r\n        this._httpClient = httpClient;\r\n        this._accessToken = accessToken;\r\n        this._logger = logger;\r\n        this._options = options;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    async connect(url, transferFormat) {\r\n        Arg.isRequired(url, \"url\");\r\n        Arg.isRequired(transferFormat, \"transferFormat\");\r\n        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n        this._logger.log(LogLevel.Trace, \"(SSE transport) Connecting.\");\r\n        // set url before accessTokenFactory because this._url is only for send and we set the auth header instead of the query string for send\r\n        this._url = url;\r\n        if (this._accessToken) {\r\n            url += (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + `access_token=${encodeURIComponent(this._accessToken)}`;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            let opened = false;\r\n            if (transferFormat !== TransferFormat.Text) {\r\n                reject(new Error(\"The Server-Sent Events transport only supports the 'Text' transfer format\"));\r\n                return;\r\n            }\r\n            let eventSource;\r\n            if (Platform.isBrowser || Platform.isWebWorker) {\r\n                eventSource = new this._options.EventSource(url, { withCredentials: this._options.withCredentials });\r\n            }\r\n            else {\r\n                // Non-browser passes cookies via the dictionary\r\n                const cookies = this._httpClient.getCookieString(url);\r\n                const headers = {};\r\n                headers.Cookie = cookies;\r\n                const [name, value] = getUserAgentHeader();\r\n                headers[name] = value;\r\n                eventSource = new this._options.EventSource(url, { withCredentials: this._options.withCredentials, headers: { ...headers, ...this._options.headers } });\r\n            }\r\n            try {\r\n                eventSource.onmessage = (e) => {\r\n                    if (this.onreceive) {\r\n                        try {\r\n                            this._logger.log(LogLevel.Trace, `(SSE transport) data received. ${getDataDetail(e.data, this._options.logMessageContent)}.`);\r\n                            this.onreceive(e.data);\r\n                        }\r\n                        catch (error) {\r\n                            this._close(error);\r\n                            return;\r\n                        }\r\n                    }\r\n                };\r\n                // @ts-ignore: not using event on purpose\r\n                eventSource.onerror = (e) => {\r\n                    // EventSource doesn't give any useful information about server side closes.\r\n                    if (opened) {\r\n                        this._close();\r\n                    }\r\n                    else {\r\n                        reject(new Error(\"EventSource failed to connect. The connection could not be found on the server,\"\r\n                            + \" either the connection ID is not present on the server, or a proxy is refusing/buffering the connection.\"\r\n                            + \" If you have multiple servers check that sticky sessions are enabled.\"));\r\n                    }\r\n                };\r\n                eventSource.onopen = () => {\r\n                    this._logger.log(LogLevel.Information, `SSE connected to ${this._url}`);\r\n                    this._eventSource = eventSource;\r\n                    opened = true;\r\n                    resolve();\r\n                };\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n                return;\r\n            }\r\n        });\r\n    }\r\n    async send(data) {\r\n        if (!this._eventSource) {\r\n            return Promise.reject(new Error(\"Cannot send until the transport is connected\"));\r\n        }\r\n        return sendMessage(this._logger, \"SSE\", this._httpClient, this._url, data, this._options);\r\n    }\r\n    stop() {\r\n        this._close();\r\n        return Promise.resolve();\r\n    }\r\n    _close(e) {\r\n        if (this._eventSource) {\r\n            this._eventSource.close();\r\n            this._eventSource = undefined;\r\n            if (this.onclose) {\r\n                this.onclose(e);\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=ServerSentEventsTransport.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { HeaderNames } from \"./HeaderNames\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, Platform } from \"./Utils\";\r\n/** @private */\r\nexport class WebSocketTransport {\r\n    constructor(httpClient, accessTokenFactory, logger, logMessageContent, webSocketConstructor, headers) {\r\n        this._logger = logger;\r\n        this._accessTokenFactory = accessTokenFactory;\r\n        this._logMessageContent = logMessageContent;\r\n        this._webSocketConstructor = webSocketConstructor;\r\n        this._httpClient = httpClient;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n        this._headers = headers;\r\n    }\r\n    async connect(url, transferFormat) {\r\n        Arg.isRequired(url, \"url\");\r\n        Arg.isRequired(transferFormat, \"transferFormat\");\r\n        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n        this._logger.log(LogLevel.Trace, \"(WebSockets transport) Connecting.\");\r\n        let token;\r\n        if (this._accessTokenFactory) {\r\n            token = await this._accessTokenFactory();\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            url = url.replace(/^http/, \"ws\");\r\n            let webSocket;\r\n            const cookies = this._httpClient.getCookieString(url);\r\n            let opened = false;\r\n            if (Platform.isNode || Platform.isReactNative) {\r\n                const headers = {};\r\n                const [name, value] = getUserAgentHeader();\r\n                headers[name] = value;\r\n                if (token) {\r\n                    headers[HeaderNames.Authorization] = `Bearer ${token}`;\r\n                }\r\n                if (cookies) {\r\n                    headers[HeaderNames.Cookie] = cookies;\r\n                }\r\n                // Only pass headers when in non-browser environments\r\n                webSocket = new this._webSocketConstructor(url, undefined, {\r\n                    headers: { ...headers, ...this._headers },\r\n                });\r\n            }\r\n            else {\r\n                if (token) {\r\n                    url += (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + `access_token=${encodeURIComponent(token)}`;\r\n                }\r\n            }\r\n            if (!webSocket) {\r\n                // Chrome is not happy with passing 'undefined' as protocol\r\n                webSocket = new this._webSocketConstructor(url);\r\n            }\r\n            if (transferFormat === TransferFormat.Binary) {\r\n                webSocket.binaryType = \"arraybuffer\";\r\n            }\r\n            webSocket.onopen = (_event) => {\r\n                this._logger.log(LogLevel.Information, `WebSocket connected to ${url}.`);\r\n                this._webSocket = webSocket;\r\n                opened = true;\r\n                resolve();\r\n            };\r\n            webSocket.onerror = (event) => {\r\n                let error = null;\r\n                // ErrorEvent is a browser only type we need to check if the type exists before using it\r\n                if (typeof ErrorEvent !== \"undefined\" && event instanceof ErrorEvent) {\r\n                    error = event.error;\r\n                }\r\n                else {\r\n                    error = \"There was an error with the transport\";\r\n                }\r\n                this._logger.log(LogLevel.Information, `(WebSockets transport) ${error}.`);\r\n            };\r\n            webSocket.onmessage = (message) => {\r\n                this._logger.log(LogLevel.Trace, `(WebSockets transport) data received. ${getDataDetail(message.data, this._logMessageContent)}.`);\r\n                if (this.onreceive) {\r\n                    try {\r\n                        this.onreceive(message.data);\r\n                    }\r\n                    catch (error) {\r\n                        this._close(error);\r\n                        return;\r\n                    }\r\n                }\r\n            };\r\n            webSocket.onclose = (event) => {\r\n                // Don't call close handler if connection was never established\r\n                // We'll reject the connect call instead\r\n                if (opened) {\r\n                    this._close(event);\r\n                }\r\n                else {\r\n                    let error = null;\r\n                    // ErrorEvent is a browser only type we need to check if the type exists before using it\r\n                    if (typeof ErrorEvent !== \"undefined\" && event instanceof ErrorEvent) {\r\n                        error = event.error;\r\n                    }\r\n                    else {\r\n                        error = \"WebSocket failed to connect. The connection could not be found on the server,\"\r\n                            + \" either the endpoint may not be a SignalR endpoint,\"\r\n                            + \" the connection ID is not present on the server, or there is a proxy blocking WebSockets.\"\r\n                            + \" If you have multiple servers check that sticky sessions are enabled.\";\r\n                    }\r\n                    reject(new Error(error));\r\n                }\r\n            };\r\n        });\r\n    }\r\n    send(data) {\r\n        if (this._webSocket && this._webSocket.readyState === this._webSocketConstructor.OPEN) {\r\n            this._logger.log(LogLevel.Trace, `(WebSockets transport) sending data. ${getDataDetail(data, this._logMessageContent)}.`);\r\n            this._webSocket.send(data);\r\n            return Promise.resolve();\r\n        }\r\n        return Promise.reject(\"WebSocket is not in the OPEN state\");\r\n    }\r\n    stop() {\r\n        if (this._webSocket) {\r\n            // Manually invoke onclose callback inline so we know the HttpConnection was closed properly before returning\r\n            // This also solves an issue where websocket.onclose could take 18+ seconds to trigger during network disconnects\r\n            this._close(undefined);\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    _close(event) {\r\n        // webSocket will be null if the transport did not start successfully\r\n        if (this._webSocket) {\r\n            // Clear websocket handlers because we are considering the socket closed now\r\n            this._webSocket.onclose = () => { };\r\n            this._webSocket.onmessage = () => { };\r\n            this._webSocket.onerror = () => { };\r\n            this._webSocket.close();\r\n            this._webSocket = undefined;\r\n        }\r\n        this._logger.log(LogLevel.Trace, \"(WebSockets transport) socket closed.\");\r\n        if (this.onclose) {\r\n            if (this._isCloseEvent(event) && (event.wasClean === false || event.code !== 1000)) {\r\n                this.onclose(new Error(`WebSocket closed with status code: ${event.code} (${event.reason || \"no reason given\"}).`));\r\n            }\r\n            else if (event instanceof Error) {\r\n                this.onclose(event);\r\n            }\r\n            else {\r\n                this.onclose();\r\n            }\r\n        }\r\n    }\r\n    _isCloseEvent(event) {\r\n        return event && typeof event.wasClean === \"boolean\" && typeof event.code === \"number\";\r\n    }\r\n}\r\n//# sourceMappingURL=WebSocketTransport.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { AccessTokenHttpClient } from \"./AccessTokenHttpClient\";\r\nimport { DefaultHttpClient } from \"./DefaultHttpClient\";\r\nimport { getEventSource, getWS } from \"./DynamicImports\";\r\nimport { AggregateErrors, DisabledTransportError, FailedToNegotiateWithServerError, FailedToStartTransportError, HttpError, UnsupportedTransportError, AbortError } from \"./Errors\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { HttpTransportType, TransferFormat } from \"./ITransport\";\r\nimport { LongPollingTransport } from \"./LongPollingTransport\";\r\nimport { ServerSentEventsTransport } from \"./ServerSentEventsTransport\";\r\nimport { Arg, createLogger, getUserAgentHeader, Platform } from \"./Utils\";\r\nimport { WebSocketTransport } from \"./WebSocketTransport\";\r\nconst MAX_REDIRECTS = 100;\r\n/** @private */\r\nexport class HttpConnection {\r\n    constructor(url, options = {}) {\r\n        this._stopPromiseResolver = () => { };\r\n        this.features = {};\r\n        this._negotiateVersion = 1;\r\n        Arg.isRequired(url, \"url\");\r\n        this._logger = createLogger(options.logger);\r\n        this.baseUrl = this._resolveUrl(url);\r\n        options = options || {};\r\n        options.logMessageContent = options.logMessageContent === undefined ? false : options.logMessageContent;\r\n        if (typeof options.withCredentials === \"boolean\" || options.withCredentials === undefined) {\r\n            options.withCredentials = options.withCredentials === undefined ? true : options.withCredentials;\r\n        }\r\n        else {\r\n            throw new Error(\"withCredentials option was not a 'boolean' or 'undefined' value\");\r\n        }\r\n        options.timeout = options.timeout === undefined ? 100 * 1000 : options.timeout;\r\n        let webSocketModule = null;\r\n        let eventSourceModule = null;\r\n        if (Platform.isNode && typeof require !== \"undefined\") {\r\n            webSocketModule = getWS();\r\n            eventSourceModule = getEventSource();\r\n        }\r\n        if (!Platform.isNode && typeof WebSocket !== \"undefined\" && !options.WebSocket) {\r\n            options.WebSocket = WebSocket;\r\n        }\r\n        else if (Platform.isNode && !options.WebSocket) {\r\n            if (webSocketModule) {\r\n                options.WebSocket = webSocketModule;\r\n            }\r\n        }\r\n        if (!Platform.isNode && typeof EventSource !== \"undefined\" && !options.EventSource) {\r\n            options.EventSource = EventSource;\r\n        }\r\n        else if (Platform.isNode && !options.EventSource) {\r\n            if (typeof eventSourceModule !== \"undefined\") {\r\n                options.EventSource = eventSourceModule;\r\n            }\r\n        }\r\n        this._httpClient = new AccessTokenHttpClient(options.httpClient || new DefaultHttpClient(this._logger), options.accessTokenFactory);\r\n        this._connectionState = \"Disconnected\" /* ConnectionState.Disconnected */;\r\n        this._connectionStarted = false;\r\n        this._options = options;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    async start(transferFormat) {\r\n        transferFormat = transferFormat || TransferFormat.Binary;\r\n        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n        this._logger.log(LogLevel.Debug, `Starting connection with transfer format '${TransferFormat[transferFormat]}'.`);\r\n        if (this._connectionState !== \"Disconnected\" /* ConnectionState.Disconnected */) {\r\n            return Promise.reject(new Error(\"Cannot start an HttpConnection that is not in the 'Disconnected' state.\"));\r\n        }\r\n        this._connectionState = \"Connecting\" /* ConnectionState.Connecting */;\r\n        this._startInternalPromise = this._startInternal(transferFormat);\r\n        await this._startInternalPromise;\r\n        // The TypeScript compiler thinks that connectionState must be Connecting here. The TypeScript compiler is wrong.\r\n        if (this._connectionState === \"Disconnecting\" /* ConnectionState.Disconnecting */) {\r\n            // stop() was called and transitioned the client into the Disconnecting state.\r\n            const message = \"Failed to start the HttpConnection before stop() was called.\";\r\n            this._logger.log(LogLevel.Error, message);\r\n            // We cannot await stopPromise inside startInternal since stopInternal awaits the startInternalPromise.\r\n            await this._stopPromise;\r\n            return Promise.reject(new AbortError(message));\r\n        }\r\n        else if (this._connectionState !== \"Connected\" /* ConnectionState.Connected */) {\r\n            // stop() was called and transitioned the client into the Disconnecting state.\r\n            const message = \"HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!\";\r\n            this._logger.log(LogLevel.Error, message);\r\n            return Promise.reject(new AbortError(message));\r\n        }\r\n        this._connectionStarted = true;\r\n    }\r\n    send(data) {\r\n        if (this._connectionState !== \"Connected\" /* ConnectionState.Connected */) {\r\n            return Promise.reject(new Error(\"Cannot send data if the connection is not in the 'Connected' State.\"));\r\n        }\r\n        if (!this._sendQueue) {\r\n            this._sendQueue = new TransportSendQueue(this.transport);\r\n        }\r\n        // Transport will not be null if state is connected\r\n        return this._sendQueue.send(data);\r\n    }\r\n    async stop(error) {\r\n        if (this._connectionState === \"Disconnected\" /* ConnectionState.Disconnected */) {\r\n            this._logger.log(LogLevel.Debug, `Call to HttpConnection.stop(${error}) ignored because the connection is already in the disconnected state.`);\r\n            return Promise.resolve();\r\n        }\r\n        if (this._connectionState === \"Disconnecting\" /* ConnectionState.Disconnecting */) {\r\n            this._logger.log(LogLevel.Debug, `Call to HttpConnection.stop(${error}) ignored because the connection is already in the disconnecting state.`);\r\n            return this._stopPromise;\r\n        }\r\n        this._connectionState = \"Disconnecting\" /* ConnectionState.Disconnecting */;\r\n        this._stopPromise = new Promise((resolve) => {\r\n            // Don't complete stop() until stopConnection() completes.\r\n            this._stopPromiseResolver = resolve;\r\n        });\r\n        // stopInternal should never throw so just observe it.\r\n        await this._stopInternal(error);\r\n        await this._stopPromise;\r\n    }\r\n    async _stopInternal(error) {\r\n        // Set error as soon as possible otherwise there is a race between\r\n        // the transport closing and providing an error and the error from a close message\r\n        // We would prefer the close message error.\r\n        this._stopError = error;\r\n        try {\r\n            await this._startInternalPromise;\r\n        }\r\n        catch (e) {\r\n            // This exception is returned to the user as a rejected Promise from the start method.\r\n        }\r\n        // The transport's onclose will trigger stopConnection which will run our onclose event.\r\n        // The transport should always be set if currently connected. If it wasn't set, it's likely because\r\n        // stop was called during start() and start() failed.\r\n        if (this.transport) {\r\n            try {\r\n                await this.transport.stop();\r\n            }\r\n            catch (e) {\r\n                this._logger.log(LogLevel.Error, `HttpConnection.transport.stop() threw error '${e}'.`);\r\n                this._stopConnection();\r\n            }\r\n            this.transport = undefined;\r\n        }\r\n        else {\r\n            this._logger.log(LogLevel.Debug, \"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.\");\r\n        }\r\n    }\r\n    async _startInternal(transferFormat) {\r\n        // Store the original base url and the access token factory since they may change\r\n        // as part of negotiating\r\n        let url = this.baseUrl;\r\n        this._accessTokenFactory = this._options.accessTokenFactory;\r\n        this._httpClient._accessTokenFactory = this._accessTokenFactory;\r\n        try {\r\n            if (this._options.skipNegotiation) {\r\n                if (this._options.transport === HttpTransportType.WebSockets) {\r\n                    // No need to add a connection ID in this case\r\n                    this.transport = this._constructTransport(HttpTransportType.WebSockets);\r\n                    // We should just call connect directly in this case.\r\n                    // No fallback or negotiate in this case.\r\n                    await this._startTransport(url, transferFormat);\r\n                }\r\n                else {\r\n                    throw new Error(\"Negotiation can only be skipped when using the WebSocket transport directly.\");\r\n                }\r\n            }\r\n            else {\r\n                let negotiateResponse = null;\r\n                let redirects = 0;\r\n                do {\r\n                    negotiateResponse = await this._getNegotiationResponse(url);\r\n                    // the user tries to stop the connection when it is being started\r\n                    if (this._connectionState === \"Disconnecting\" /* ConnectionState.Disconnecting */ || this._connectionState === \"Disconnected\" /* ConnectionState.Disconnected */) {\r\n                        throw new AbortError(\"The connection was stopped during negotiation.\");\r\n                    }\r\n                    if (negotiateResponse.error) {\r\n                        throw new Error(negotiateResponse.error);\r\n                    }\r\n                    if (negotiateResponse.ProtocolVersion) {\r\n                        throw new Error(\"Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.\");\r\n                    }\r\n                    if (negotiateResponse.url) {\r\n                        url = negotiateResponse.url;\r\n                    }\r\n                    if (negotiateResponse.accessToken) {\r\n                        // Replace the current access token factory with one that uses\r\n                        // the returned access token\r\n                        const accessToken = negotiateResponse.accessToken;\r\n                        this._accessTokenFactory = () => accessToken;\r\n                        // set the factory to undefined so the AccessTokenHttpClient won't retry with the same token, since we know it won't change until a connection restart\r\n                        this._httpClient._accessToken = accessToken;\r\n                        this._httpClient._accessTokenFactory = undefined;\r\n                    }\r\n                    redirects++;\r\n                } while (negotiateResponse.url && redirects < MAX_REDIRECTS);\r\n                if (redirects === MAX_REDIRECTS && negotiateResponse.url) {\r\n                    throw new Error(\"Negotiate redirection limit exceeded.\");\r\n                }\r\n                await this._createTransport(url, this._options.transport, negotiateResponse, transferFormat);\r\n            }\r\n            if (this.transport instanceof LongPollingTransport) {\r\n                this.features.inherentKeepAlive = true;\r\n            }\r\n            if (this._connectionState === \"Connecting\" /* ConnectionState.Connecting */) {\r\n                // Ensure the connection transitions to the connected state prior to completing this.startInternalPromise.\r\n                // start() will handle the case when stop was called and startInternal exits still in the disconnecting state.\r\n                this._logger.log(LogLevel.Debug, \"The HttpConnection connected successfully.\");\r\n                this._connectionState = \"Connected\" /* ConnectionState.Connected */;\r\n            }\r\n            // stop() is waiting on us via this.startInternalPromise so keep this.transport around so it can clean up.\r\n            // This is the only case startInternal can exit in neither the connected nor disconnected state because stopConnection()\r\n            // will transition to the disconnected state. start() will wait for the transition using the stopPromise.\r\n        }\r\n        catch (e) {\r\n            this._logger.log(LogLevel.Error, \"Failed to start the connection: \" + e);\r\n            this._connectionState = \"Disconnected\" /* ConnectionState.Disconnected */;\r\n            this.transport = undefined;\r\n            // if start fails, any active calls to stop assume that start will complete the stop promise\r\n            this._stopPromiseResolver();\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n    async _getNegotiationResponse(url) {\r\n        const headers = {};\r\n        const [name, value] = getUserAgentHeader();\r\n        headers[name] = value;\r\n        const negotiateUrl = this._resolveNegotiateUrl(url);\r\n        this._logger.log(LogLevel.Debug, `Sending negotiation request: ${negotiateUrl}.`);\r\n        try {\r\n            const response = await this._httpClient.post(negotiateUrl, {\r\n                content: \"\",\r\n                headers: { ...headers, ...this._options.headers },\r\n                timeout: this._options.timeout,\r\n                withCredentials: this._options.withCredentials,\r\n            });\r\n            if (response.statusCode !== 200) {\r\n                return Promise.reject(new Error(`Unexpected status code returned from negotiate '${response.statusCode}'`));\r\n            }\r\n            const negotiateResponse = JSON.parse(response.content);\r\n            if (!negotiateResponse.negotiateVersion || negotiateResponse.negotiateVersion < 1) {\r\n                // Negotiate version 0 doesn't use connectionToken\r\n                // So we set it equal to connectionId so all our logic can use connectionToken without being aware of the negotiate version\r\n                negotiateResponse.connectionToken = negotiateResponse.connectionId;\r\n            }\r\n            if (negotiateResponse.useStatefulReconnect && this._options._useStatefulReconnect !== true) {\r\n                return Promise.reject(new FailedToNegotiateWithServerError(\"Client didn't negotiate Stateful Reconnect but the server did.\"));\r\n            }\r\n            return negotiateResponse;\r\n        }\r\n        catch (e) {\r\n            let errorMessage = \"Failed to complete negotiation with the server: \" + e;\r\n            if (e instanceof HttpError) {\r\n                if (e.statusCode === 404) {\r\n                    errorMessage = errorMessage + \" Either this is not a SignalR endpoint or there is a proxy blocking the connection.\";\r\n                }\r\n            }\r\n            this._logger.log(LogLevel.Error, errorMessage);\r\n            return Promise.reject(new FailedToNegotiateWithServerError(errorMessage));\r\n        }\r\n    }\r\n    _createConnectUrl(url, connectionToken) {\r\n        if (!connectionToken) {\r\n            return url;\r\n        }\r\n        return url + (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + `id=${connectionToken}`;\r\n    }\r\n    async _createTransport(url, requestedTransport, negotiateResponse, requestedTransferFormat) {\r\n        let connectUrl = this._createConnectUrl(url, negotiateResponse.connectionToken);\r\n        if (this._isITransport(requestedTransport)) {\r\n            this._logger.log(LogLevel.Debug, \"Connection was provided an instance of ITransport, using that directly.\");\r\n            this.transport = requestedTransport;\r\n            await this._startTransport(connectUrl, requestedTransferFormat);\r\n            this.connectionId = negotiateResponse.connectionId;\r\n            return;\r\n        }\r\n        const transportExceptions = [];\r\n        const transports = negotiateResponse.availableTransports || [];\r\n        let negotiate = negotiateResponse;\r\n        for (const endpoint of transports) {\r\n            const transportOrError = this._resolveTransportOrError(endpoint, requestedTransport, requestedTransferFormat, (negotiate === null || negotiate === void 0 ? void 0 : negotiate.useStatefulReconnect) === true);\r\n            if (transportOrError instanceof Error) {\r\n                // Store the error and continue, we don't want to cause a re-negotiate in these cases\r\n                transportExceptions.push(`${endpoint.transport} failed:`);\r\n                transportExceptions.push(transportOrError);\r\n            }\r\n            else if (this._isITransport(transportOrError)) {\r\n                this.transport = transportOrError;\r\n                if (!negotiate) {\r\n                    try {\r\n                        negotiate = await this._getNegotiationResponse(url);\r\n                    }\r\n                    catch (ex) {\r\n                        return Promise.reject(ex);\r\n                    }\r\n                    connectUrl = this._createConnectUrl(url, negotiate.connectionToken);\r\n                }\r\n                try {\r\n                    await this._startTransport(connectUrl, requestedTransferFormat);\r\n                    this.connectionId = negotiate.connectionId;\r\n                    return;\r\n                }\r\n                catch (ex) {\r\n                    this._logger.log(LogLevel.Error, `Failed to start the transport '${endpoint.transport}': ${ex}`);\r\n                    negotiate = undefined;\r\n                    transportExceptions.push(new FailedToStartTransportError(`${endpoint.transport} failed: ${ex}`, HttpTransportType[endpoint.transport]));\r\n                    if (this._connectionState !== \"Connecting\" /* ConnectionState.Connecting */) {\r\n                        const message = \"Failed to select transport before stop() was called.\";\r\n                        this._logger.log(LogLevel.Debug, message);\r\n                        return Promise.reject(new AbortError(message));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (transportExceptions.length > 0) {\r\n            return Promise.reject(new AggregateErrors(`Unable to connect to the server with any of the available transports. ${transportExceptions.join(\" \")}`, transportExceptions));\r\n        }\r\n        return Promise.reject(new Error(\"None of the transports supported by the client are supported by the server.\"));\r\n    }\r\n    _constructTransport(transport) {\r\n        switch (transport) {\r\n            case HttpTransportType.WebSockets:\r\n                if (!this._options.WebSocket) {\r\n                    throw new Error(\"'WebSocket' is not supported in your environment.\");\r\n                }\r\n                return new WebSocketTransport(this._httpClient, this._accessTokenFactory, this._logger, this._options.logMessageContent, this._options.WebSocket, this._options.headers || {});\r\n            case HttpTransportType.ServerSentEvents:\r\n                if (!this._options.EventSource) {\r\n                    throw new Error(\"'EventSource' is not supported in your environment.\");\r\n                }\r\n                return new ServerSentEventsTransport(this._httpClient, this._httpClient._accessToken, this._logger, this._options);\r\n            case HttpTransportType.LongPolling:\r\n                return new LongPollingTransport(this._httpClient, this._logger, this._options);\r\n            default:\r\n                throw new Error(`Unknown transport: ${transport}.`);\r\n        }\r\n    }\r\n    _startTransport(url, transferFormat) {\r\n        this.transport.onreceive = this.onreceive;\r\n        if (this.features.reconnect) {\r\n            this.transport.onclose = async (e) => {\r\n                let callStop = false;\r\n                if (this.features.reconnect) {\r\n                    try {\r\n                        this.features.disconnected();\r\n                        await this.transport.connect(url, transferFormat);\r\n                        await this.features.resend();\r\n                    }\r\n                    catch {\r\n                        callStop = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this._stopConnection(e);\r\n                    return;\r\n                }\r\n                if (callStop) {\r\n                    this._stopConnection(e);\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            this.transport.onclose = (e) => this._stopConnection(e);\r\n        }\r\n        return this.transport.connect(url, transferFormat);\r\n    }\r\n    _resolveTransportOrError(endpoint, requestedTransport, requestedTransferFormat, useStatefulReconnect) {\r\n        const transport = HttpTransportType[endpoint.transport];\r\n        if (transport === null || transport === undefined) {\r\n            this._logger.log(LogLevel.Debug, `Skipping transport '${endpoint.transport}' because it is not supported by this client.`);\r\n            return new Error(`Skipping transport '${endpoint.transport}' because it is not supported by this client.`);\r\n        }\r\n        else {\r\n            if (transportMatches(requestedTransport, transport)) {\r\n                const transferFormats = endpoint.transferFormats.map((s) => TransferFormat[s]);\r\n                if (transferFormats.indexOf(requestedTransferFormat) >= 0) {\r\n                    if ((transport === HttpTransportType.WebSockets && !this._options.WebSocket) ||\r\n                        (transport === HttpTransportType.ServerSentEvents && !this._options.EventSource)) {\r\n                        this._logger.log(LogLevel.Debug, `Skipping transport '${HttpTransportType[transport]}' because it is not supported in your environment.'`);\r\n                        return new UnsupportedTransportError(`'${HttpTransportType[transport]}' is not supported in your environment.`, transport);\r\n                    }\r\n                    else {\r\n                        this._logger.log(LogLevel.Debug, `Selecting transport '${HttpTransportType[transport]}'.`);\r\n                        try {\r\n                            this.features.reconnect = transport === HttpTransportType.WebSockets ? useStatefulReconnect : undefined;\r\n                            return this._constructTransport(transport);\r\n                        }\r\n                        catch (ex) {\r\n                            return ex;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this._logger.log(LogLevel.Debug, `Skipping transport '${HttpTransportType[transport]}' because it does not support the requested transfer format '${TransferFormat[requestedTransferFormat]}'.`);\r\n                    return new Error(`'${HttpTransportType[transport]}' does not support ${TransferFormat[requestedTransferFormat]}.`);\r\n                }\r\n            }\r\n            else {\r\n                this._logger.log(LogLevel.Debug, `Skipping transport '${HttpTransportType[transport]}' because it was disabled by the client.`);\r\n                return new DisabledTransportError(`'${HttpTransportType[transport]}' is disabled by the client.`, transport);\r\n            }\r\n        }\r\n    }\r\n    _isITransport(transport) {\r\n        return transport && typeof (transport) === \"object\" && \"connect\" in transport;\r\n    }\r\n    _stopConnection(error) {\r\n        this._logger.log(LogLevel.Debug, `HttpConnection.stopConnection(${error}) called while in state ${this._connectionState}.`);\r\n        this.transport = undefined;\r\n        // If we have a stopError, it takes precedence over the error from the transport\r\n        error = this._stopError || error;\r\n        this._stopError = undefined;\r\n        if (this._connectionState === \"Disconnected\" /* ConnectionState.Disconnected */) {\r\n            this._logger.log(LogLevel.Debug, `Call to HttpConnection.stopConnection(${error}) was ignored because the connection is already in the disconnected state.`);\r\n            return;\r\n        }\r\n        if (this._connectionState === \"Connecting\" /* ConnectionState.Connecting */) {\r\n            this._logger.log(LogLevel.Warning, `Call to HttpConnection.stopConnection(${error}) was ignored because the connection is still in the connecting state.`);\r\n            throw new Error(`HttpConnection.stopConnection(${error}) was called while the connection is still in the connecting state.`);\r\n        }\r\n        if (this._connectionState === \"Disconnecting\" /* ConnectionState.Disconnecting */) {\r\n            // A call to stop() induced this call to stopConnection and needs to be completed.\r\n            // Any stop() awaiters will be scheduled to continue after the onclose callback fires.\r\n            this._stopPromiseResolver();\r\n        }\r\n        if (error) {\r\n            this._logger.log(LogLevel.Error, `Connection disconnected with error '${error}'.`);\r\n        }\r\n        else {\r\n            this._logger.log(LogLevel.Information, \"Connection disconnected.\");\r\n        }\r\n        if (this._sendQueue) {\r\n            this._sendQueue.stop().catch((e) => {\r\n                this._logger.log(LogLevel.Error, `TransportSendQueue.stop() threw error '${e}'.`);\r\n            });\r\n            this._sendQueue = undefined;\r\n        }\r\n        this.connectionId = undefined;\r\n        this._connectionState = \"Disconnected\" /* ConnectionState.Disconnected */;\r\n        if (this._connectionStarted) {\r\n            this._connectionStarted = false;\r\n            try {\r\n                if (this.onclose) {\r\n                    this.onclose(error);\r\n                }\r\n            }\r\n            catch (e) {\r\n                this._logger.log(LogLevel.Error, `HttpConnection.onclose(${error}) threw error '${e}'.`);\r\n            }\r\n        }\r\n    }\r\n    _resolveUrl(url) {\r\n        // startsWith is not supported in IE\r\n        if (url.lastIndexOf(\"https://\", 0) === 0 || url.lastIndexOf(\"http://\", 0) === 0) {\r\n            return url;\r\n        }\r\n        if (!Platform.isBrowser) {\r\n            throw new Error(`Cannot resolve '${url}'.`);\r\n        }\r\n        // Setting the url to the href propery of an anchor tag handles normalization\r\n        // for us. There are 3 main cases.\r\n        // 1. Relative path normalization e.g \"b\" -> \"http://localhost:5000/a/b\"\r\n        // 2. Absolute path normalization e.g \"/a/b\" -> \"http://localhost:5000/a/b\"\r\n        // 3. Networkpath reference normalization e.g \"//localhost:5000/a/b\" -> \"http://localhost:5000/a/b\"\r\n        const aTag = window.document.createElement(\"a\");\r\n        aTag.href = url;\r\n        this._logger.log(LogLevel.Information, `Normalizing '${url}' to '${aTag.href}'.`);\r\n        return aTag.href;\r\n    }\r\n    _resolveNegotiateUrl(url) {\r\n        const negotiateUrl = new URL(url);\r\n        if (negotiateUrl.pathname.endsWith('/')) {\r\n            negotiateUrl.pathname += \"negotiate\";\r\n        }\r\n        else {\r\n            negotiateUrl.pathname += \"/negotiate\";\r\n        }\r\n        const searchParams = new URLSearchParams(negotiateUrl.searchParams);\r\n        if (!searchParams.has(\"negotiateVersion\")) {\r\n            searchParams.append(\"negotiateVersion\", this._negotiateVersion.toString());\r\n        }\r\n        if (searchParams.has(\"useStatefulReconnect\")) {\r\n            if (searchParams.get(\"useStatefulReconnect\") === \"true\") {\r\n                this._options._useStatefulReconnect = true;\r\n            }\r\n        }\r\n        else if (this._options._useStatefulReconnect === true) {\r\n            searchParams.append(\"useStatefulReconnect\", \"true\");\r\n        }\r\n        negotiateUrl.search = searchParams.toString();\r\n        return negotiateUrl.toString();\r\n    }\r\n}\r\nfunction transportMatches(requestedTransport, actualTransport) {\r\n    return !requestedTransport || ((actualTransport & requestedTransport) !== 0);\r\n}\r\n/** @private */\r\nexport class TransportSendQueue {\r\n    constructor(_transport) {\r\n        this._transport = _transport;\r\n        this._buffer = [];\r\n        this._executing = true;\r\n        this._sendBufferedData = new PromiseSource();\r\n        this._transportResult = new PromiseSource();\r\n        this._sendLoopPromise = this._sendLoop();\r\n    }\r\n    send(data) {\r\n        this._bufferData(data);\r\n        if (!this._transportResult) {\r\n            this._transportResult = new PromiseSource();\r\n        }\r\n        return this._transportResult.promise;\r\n    }\r\n    stop() {\r\n        this._executing = false;\r\n        this._sendBufferedData.resolve();\r\n        return this._sendLoopPromise;\r\n    }\r\n    _bufferData(data) {\r\n        if (this._buffer.length && typeof (this._buffer[0]) !== typeof (data)) {\r\n            throw new Error(`Expected data to be of type ${typeof (this._buffer)} but was of type ${typeof (data)}`);\r\n        }\r\n        this._buffer.push(data);\r\n        this._sendBufferedData.resolve();\r\n    }\r\n    async _sendLoop() {\r\n        while (true) {\r\n            await this._sendBufferedData.promise;\r\n            if (!this._executing) {\r\n                if (this._transportResult) {\r\n                    this._transportResult.reject(\"Connection stopped.\");\r\n                }\r\n                break;\r\n            }\r\n            this._sendBufferedData = new PromiseSource();\r\n            const transportResult = this._transportResult;\r\n            this._transportResult = undefined;\r\n            const data = typeof (this._buffer[0]) === \"string\" ?\r\n                this._buffer.join(\"\") :\r\n                TransportSendQueue._concatBuffers(this._buffer);\r\n            this._buffer.length = 0;\r\n            try {\r\n                await this._transport.send(data);\r\n                transportResult.resolve();\r\n            }\r\n            catch (error) {\r\n                transportResult.reject(error);\r\n            }\r\n        }\r\n    }\r\n    static _concatBuffers(arrayBuffers) {\r\n        const totalLength = arrayBuffers.map((b) => b.byteLength).reduce((a, b) => a + b);\r\n        const result = new Uint8Array(totalLength);\r\n        let offset = 0;\r\n        for (const item of arrayBuffers) {\r\n            result.set(new Uint8Array(item), offset);\r\n            offset += item.byteLength;\r\n        }\r\n        return result.buffer;\r\n    }\r\n}\r\nclass PromiseSource {\r\n    constructor() {\r\n        this.promise = new Promise((resolve, reject) => [this._resolver, this._rejecter] = [resolve, reject]);\r\n    }\r\n    resolve() {\r\n        this._resolver();\r\n    }\r\n    reject(reason) {\r\n        this._rejecter(reason);\r\n    }\r\n}\r\n//# sourceMappingURL=HttpConnection.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { MessageType } from \"./IHubProtocol\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { NullLogger } from \"./Loggers\";\r\nimport { TextMessageFormat } from \"./TextMessageFormat\";\r\nconst JSON_HUB_PROTOCOL_NAME = \"json\";\r\n/** Implements the JSON Hub Protocol. */\r\nexport class JsonHubProtocol {\r\n    constructor() {\r\n        /** @inheritDoc */\r\n        this.name = JSON_HUB_PROTOCOL_NAME;\r\n        /** @inheritDoc */\r\n        this.version = 2;\r\n        /** @inheritDoc */\r\n        this.transferFormat = TransferFormat.Text;\r\n    }\r\n    /** Creates an array of {@link @microsoft/signalr.HubMessage} objects from the specified serialized representation.\r\n     *\r\n     * @param {string} input A string containing the serialized representation.\r\n     * @param {ILogger} logger A logger that will be used to log messages that occur during parsing.\r\n     */\r\n    parseMessages(input, logger) {\r\n        // The interface does allow \"ArrayBuffer\" to be passed in, but this implementation does not. So let's throw a useful error.\r\n        if (typeof input !== \"string\") {\r\n            throw new Error(\"Invalid input for JSON hub protocol. Expected a string.\");\r\n        }\r\n        if (!input) {\r\n            return [];\r\n        }\r\n        if (logger === null) {\r\n            logger = NullLogger.instance;\r\n        }\r\n        // Parse the messages\r\n        const messages = TextMessageFormat.parse(input);\r\n        const hubMessages = [];\r\n        for (const message of messages) {\r\n            const parsedMessage = JSON.parse(message);\r\n            if (typeof parsedMessage.type !== \"number\") {\r\n                throw new Error(\"Invalid payload.\");\r\n            }\r\n            switch (parsedMessage.type) {\r\n                case MessageType.Invocation:\r\n                    this._isInvocationMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.StreamItem:\r\n                    this._isStreamItemMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Completion:\r\n                    this._isCompletionMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Ping:\r\n                    // Single value, no need to validate\r\n                    break;\r\n                case MessageType.Close:\r\n                    // All optional values, no need to validate\r\n                    break;\r\n                case MessageType.Ack:\r\n                    this._isAckMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Sequence:\r\n                    this._isSequenceMessage(parsedMessage);\r\n                    break;\r\n                default:\r\n                    // Future protocol changes can add message types, old clients can ignore them\r\n                    logger.log(LogLevel.Information, \"Unknown message type '\" + parsedMessage.type + \"' ignored.\");\r\n                    continue;\r\n            }\r\n            hubMessages.push(parsedMessage);\r\n        }\r\n        return hubMessages;\r\n    }\r\n    /** Writes the specified {@link @microsoft/signalr.HubMessage} to a string and returns it.\r\n     *\r\n     * @param {HubMessage} message The message to write.\r\n     * @returns {string} A string containing the serialized representation of the message.\r\n     */\r\n    writeMessage(message) {\r\n        return TextMessageFormat.write(JSON.stringify(message));\r\n    }\r\n    _isInvocationMessage(message) {\r\n        this._assertNotEmptyString(message.target, \"Invalid payload for Invocation message.\");\r\n        if (message.invocationId !== undefined) {\r\n            this._assertNotEmptyString(message.invocationId, \"Invalid payload for Invocation message.\");\r\n        }\r\n    }\r\n    _isStreamItemMessage(message) {\r\n        this._assertNotEmptyString(message.invocationId, \"Invalid payload for StreamItem message.\");\r\n        if (message.item === undefined) {\r\n            throw new Error(\"Invalid payload for StreamItem message.\");\r\n        }\r\n    }\r\n    _isCompletionMessage(message) {\r\n        if (message.result && message.error) {\r\n            throw new Error(\"Invalid payload for Completion message.\");\r\n        }\r\n        if (!message.result && message.error) {\r\n            this._assertNotEmptyString(message.error, \"Invalid payload for Completion message.\");\r\n        }\r\n        this._assertNotEmptyString(message.invocationId, \"Invalid payload for Completion message.\");\r\n    }\r\n    _isAckMessage(message) {\r\n        if (typeof message.sequenceId !== 'number') {\r\n            throw new Error(\"Invalid SequenceId for Ack message.\");\r\n        }\r\n    }\r\n    _isSequenceMessage(message) {\r\n        if (typeof message.sequenceId !== 'number') {\r\n            throw new Error(\"Invalid SequenceId for Sequence message.\");\r\n        }\r\n    }\r\n    _assertNotEmptyString(value, errorMessage) {\r\n        if (typeof value !== \"string\" || value === \"\") {\r\n            throw new Error(errorMessage);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=JsonHubProtocol.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { DefaultReconnectPolicy } from \"./DefaultReconnectPolicy\";\r\nimport { HttpConnection } from \"./HttpConnection\";\r\nimport { HubConnection } from \"./HubConnection\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { JsonHubProtocol } from \"./JsonHubProtocol\";\r\nimport { NullLogger } from \"./Loggers\";\r\nimport { Arg, ConsoleLogger } from \"./Utils\";\r\nconst LogLevelNameMapping = {\r\n    trace: LogLevel.Trace,\r\n    debug: LogLevel.Debug,\r\n    info: LogLevel.Information,\r\n    information: LogLevel.Information,\r\n    warn: LogLevel.Warning,\r\n    warning: LogLevel.Warning,\r\n    error: LogLevel.Error,\r\n    critical: LogLevel.Critical,\r\n    none: LogLevel.None,\r\n};\r\nfunction parseLogLevel(name) {\r\n    // Case-insensitive matching via lower-casing\r\n    // Yes, I know case-folding is a complicated problem in Unicode, but we only support\r\n    // the ASCII strings defined in LogLevelNameMapping anyway, so it's fine -anurse.\r\n    const mapping = LogLevelNameMapping[name.toLowerCase()];\r\n    if (typeof mapping !== \"undefined\") {\r\n        return mapping;\r\n    }\r\n    else {\r\n        throw new Error(`Unknown log level: ${name}`);\r\n    }\r\n}\r\n/** A builder for configuring {@link @microsoft/signalr.HubConnection} instances. */\r\nexport class HubConnectionBuilder {\r\n    configureLogging(logging) {\r\n        Arg.isRequired(logging, \"logging\");\r\n        if (isLogger(logging)) {\r\n            this.logger = logging;\r\n        }\r\n        else if (typeof logging === \"string\") {\r\n            const logLevel = parseLogLevel(logging);\r\n            this.logger = new ConsoleLogger(logLevel);\r\n        }\r\n        else {\r\n            this.logger = new ConsoleLogger(logging);\r\n        }\r\n        return this;\r\n    }\r\n    withUrl(url, transportTypeOrOptions) {\r\n        Arg.isRequired(url, \"url\");\r\n        Arg.isNotEmpty(url, \"url\");\r\n        this.url = url;\r\n        // Flow-typing knows where it's at. Since HttpTransportType is a number and IHttpConnectionOptions is guaranteed\r\n        // to be an object, we know (as does TypeScript) this comparison is all we need to figure out which overload was called.\r\n        if (typeof transportTypeOrOptions === \"object\") {\r\n            this.httpConnectionOptions = { ...this.httpConnectionOptions, ...transportTypeOrOptions };\r\n        }\r\n        else {\r\n            this.httpConnectionOptions = {\r\n                ...this.httpConnectionOptions,\r\n                transport: transportTypeOrOptions,\r\n            };\r\n        }\r\n        return this;\r\n    }\r\n    /** Configures the {@link @microsoft/signalr.HubConnection} to use the specified Hub Protocol.\r\n     *\r\n     * @param {IHubProtocol} protocol The {@link @microsoft/signalr.IHubProtocol} implementation to use.\r\n     */\r\n    withHubProtocol(protocol) {\r\n        Arg.isRequired(protocol, \"protocol\");\r\n        this.protocol = protocol;\r\n        return this;\r\n    }\r\n    withAutomaticReconnect(retryDelaysOrReconnectPolicy) {\r\n        if (this.reconnectPolicy) {\r\n            throw new Error(\"A reconnectPolicy has already been set.\");\r\n        }\r\n        if (!retryDelaysOrReconnectPolicy) {\r\n            this.reconnectPolicy = new DefaultReconnectPolicy();\r\n        }\r\n        else if (Array.isArray(retryDelaysOrReconnectPolicy)) {\r\n            this.reconnectPolicy = new DefaultReconnectPolicy(retryDelaysOrReconnectPolicy);\r\n        }\r\n        else {\r\n            this.reconnectPolicy = retryDelaysOrReconnectPolicy;\r\n        }\r\n        return this;\r\n    }\r\n    /** Configures {@link @microsoft/signalr.HubConnection.serverTimeoutInMilliseconds} for the {@link @microsoft/signalr.HubConnection}.\r\n     *\r\n     * @returns The {@link @microsoft/signalr.HubConnectionBuilder} instance, for chaining.\r\n     */\r\n    withServerTimeout(milliseconds) {\r\n        Arg.isRequired(milliseconds, \"milliseconds\");\r\n        this._serverTimeoutInMilliseconds = milliseconds;\r\n        return this;\r\n    }\r\n    /** Configures {@link @microsoft/signalr.HubConnection.keepAliveIntervalInMilliseconds} for the {@link @microsoft/signalr.HubConnection}.\r\n     *\r\n     * @returns The {@link @microsoft/signalr.HubConnectionBuilder} instance, for chaining.\r\n     */\r\n    withKeepAliveInterval(milliseconds) {\r\n        Arg.isRequired(milliseconds, \"milliseconds\");\r\n        this._keepAliveIntervalInMilliseconds = milliseconds;\r\n        return this;\r\n    }\r\n    /** Enables and configures options for the Stateful Reconnect feature.\r\n     *\r\n     * @returns The {@link @microsoft/signalr.HubConnectionBuilder} instance, for chaining.\r\n     */\r\n    withStatefulReconnect(options) {\r\n        if (this.httpConnectionOptions === undefined) {\r\n            this.httpConnectionOptions = {};\r\n        }\r\n        this.httpConnectionOptions._useStatefulReconnect = true;\r\n        this._statefulReconnectBufferSize = options === null || options === void 0 ? void 0 : options.bufferSize;\r\n        return this;\r\n    }\r\n    /** Creates a {@link @microsoft/signalr.HubConnection} from the configuration options specified in this builder.\r\n     *\r\n     * @returns {HubConnection} The configured {@link @microsoft/signalr.HubConnection}.\r\n     */\r\n    build() {\r\n        // If httpConnectionOptions has a logger, use it. Otherwise, override it with the one\r\n        // provided to configureLogger\r\n        const httpConnectionOptions = this.httpConnectionOptions || {};\r\n        // If it's 'null', the user **explicitly** asked for null, don't mess with it.\r\n        if (httpConnectionOptions.logger === undefined) {\r\n            // If our logger is undefined or null, that's OK, the HttpConnection constructor will handle it.\r\n            httpConnectionOptions.logger = this.logger;\r\n        }\r\n        // Now create the connection\r\n        if (!this.url) {\r\n            throw new Error(\"The 'HubConnectionBuilder.withUrl' method must be called before building the connection.\");\r\n        }\r\n        const connection = new HttpConnection(this.url, httpConnectionOptions);\r\n        return HubConnection.create(connection, this.logger || NullLogger.instance, this.protocol || new JsonHubProtocol(), this.reconnectPolicy, this._serverTimeoutInMilliseconds, this._keepAliveIntervalInMilliseconds, this._statefulReconnectBufferSize);\r\n    }\r\n}\r\nfunction isLogger(logger) {\r\n    return logger.log !== undefined;\r\n}\r\n//# sourceMappingURL=HubConnectionBuilder.js.map",null,"// Integer Utility\nexport var UINT32_MAX = 4294967295;\n// DataView extension to handle int64 / uint64,\n// where the actual range is 53-bits integer (a.k.a. safe integer)\nexport function setUint64(view, offset, value) {\n    var high = value / 4294967296;\n    var low = value; // high bits are truncated by DataView\n    view.setUint32(offset, high);\n    view.setUint32(offset + 4, low);\n}\nexport function setInt64(view, offset, value) {\n    var high = Math.floor(value / 4294967296);\n    var low = value; // high bits are truncated by DataView\n    view.setUint32(offset, high);\n    view.setUint32(offset + 4, low);\n}\nexport function getInt64(view, offset) {\n    var high = view.getInt32(offset);\n    var low = view.getUint32(offset + 4);\n    return high * 4294967296 + low;\n}\nexport function getUint64(view, offset) {\n    var high = view.getUint32(offset);\n    var low = view.getUint32(offset + 4);\n    return high * 4294967296 + low;\n}\n//# sourceMappingURL=int.mjs.map","var _a, _b, _c;\n/* eslint-disable @typescript-eslint/no-unnecessary-condition */\nimport { UINT32_MAX } from \"./int.mjs\";\nvar TEXT_ENCODING_AVAILABLE = (typeof process === \"undefined\" || ((_a = process === null || process === void 0 ? void 0 : process.env) === null || _a === void 0 ? void 0 : _a[\"TEXT_ENCODING\"]) !== \"never\") &&\n    typeof TextEncoder !== \"undefined\" &&\n    typeof TextDecoder !== \"undefined\";\nexport function utf8Count(str) {\n    var strLength = str.length;\n    var byteLength = 0;\n    var pos = 0;\n    while (pos < strLength) {\n        var value = str.charCodeAt(pos++);\n        if ((value & 0xffffff80) === 0) {\n            // 1-byte\n            byteLength++;\n            continue;\n        }\n        else if ((value & 0xfffff800) === 0) {\n            // 2-bytes\n            byteLength += 2;\n        }\n        else {\n            // handle surrogate pair\n            if (value >= 0xd800 && value <= 0xdbff) {\n                // high surrogate\n                if (pos < strLength) {\n                    var extra = str.charCodeAt(pos);\n                    if ((extra & 0xfc00) === 0xdc00) {\n                        ++pos;\n                        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n                    }\n                }\n            }\n            if ((value & 0xffff0000) === 0) {\n                // 3-byte\n                byteLength += 3;\n            }\n            else {\n                // 4-byte\n                byteLength += 4;\n            }\n        }\n    }\n    return byteLength;\n}\nexport function utf8EncodeJs(str, output, outputOffset) {\n    var strLength = str.length;\n    var offset = outputOffset;\n    var pos = 0;\n    while (pos < strLength) {\n        var value = str.charCodeAt(pos++);\n        if ((value & 0xffffff80) === 0) {\n            // 1-byte\n            output[offset++] = value;\n            continue;\n        }\n        else if ((value & 0xfffff800) === 0) {\n            // 2-bytes\n            output[offset++] = ((value >> 6) & 0x1f) | 0xc0;\n        }\n        else {\n            // handle surrogate pair\n            if (value >= 0xd800 && value <= 0xdbff) {\n                // high surrogate\n                if (pos < strLength) {\n                    var extra = str.charCodeAt(pos);\n                    if ((extra & 0xfc00) === 0xdc00) {\n                        ++pos;\n                        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n                    }\n                }\n            }\n            if ((value & 0xffff0000) === 0) {\n                // 3-byte\n                output[offset++] = ((value >> 12) & 0x0f) | 0xe0;\n                output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n            }\n            else {\n                // 4-byte\n                output[offset++] = ((value >> 18) & 0x07) | 0xf0;\n                output[offset++] = ((value >> 12) & 0x3f) | 0x80;\n                output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n            }\n        }\n        output[offset++] = (value & 0x3f) | 0x80;\n    }\n}\nvar sharedTextEncoder = TEXT_ENCODING_AVAILABLE ? new TextEncoder() : undefined;\nexport var TEXT_ENCODER_THRESHOLD = !TEXT_ENCODING_AVAILABLE\n    ? UINT32_MAX\n    : typeof process !== \"undefined\" && ((_b = process === null || process === void 0 ? void 0 : process.env) === null || _b === void 0 ? void 0 : _b[\"TEXT_ENCODING\"]) !== \"force\"\n        ? 200\n        : 0;\nfunction utf8EncodeTEencode(str, output, outputOffset) {\n    output.set(sharedTextEncoder.encode(str), outputOffset);\n}\nfunction utf8EncodeTEencodeInto(str, output, outputOffset) {\n    sharedTextEncoder.encodeInto(str, output.subarray(outputOffset));\n}\nexport var utf8EncodeTE = (sharedTextEncoder === null || sharedTextEncoder === void 0 ? void 0 : sharedTextEncoder.encodeInto) ? utf8EncodeTEencodeInto : utf8EncodeTEencode;\nvar CHUNK_SIZE = 4096;\nexport function utf8DecodeJs(bytes, inputOffset, byteLength) {\n    var offset = inputOffset;\n    var end = offset + byteLength;\n    var units = [];\n    var result = \"\";\n    while (offset < end) {\n        var byte1 = bytes[offset++];\n        if ((byte1 & 0x80) === 0) {\n            // 1 byte\n            units.push(byte1);\n        }\n        else if ((byte1 & 0xe0) === 0xc0) {\n            // 2 bytes\n            var byte2 = bytes[offset++] & 0x3f;\n            units.push(((byte1 & 0x1f) << 6) | byte2);\n        }\n        else if ((byte1 & 0xf0) === 0xe0) {\n            // 3 bytes\n            var byte2 = bytes[offset++] & 0x3f;\n            var byte3 = bytes[offset++] & 0x3f;\n            units.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3);\n        }\n        else if ((byte1 & 0xf8) === 0xf0) {\n            // 4 bytes\n            var byte2 = bytes[offset++] & 0x3f;\n            var byte3 = bytes[offset++] & 0x3f;\n            var byte4 = bytes[offset++] & 0x3f;\n            var unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4;\n            if (unit > 0xffff) {\n                unit -= 0x10000;\n                units.push(((unit >>> 10) & 0x3ff) | 0xd800);\n                unit = 0xdc00 | (unit & 0x3ff);\n            }\n            units.push(unit);\n        }\n        else {\n            units.push(byte1);\n        }\n        if (units.length >= CHUNK_SIZE) {\n            result += String.fromCharCode.apply(String, units);\n            units.length = 0;\n        }\n    }\n    if (units.length > 0) {\n        result += String.fromCharCode.apply(String, units);\n    }\n    return result;\n}\nvar sharedTextDecoder = TEXT_ENCODING_AVAILABLE ? new TextDecoder() : null;\nexport var TEXT_DECODER_THRESHOLD = !TEXT_ENCODING_AVAILABLE\n    ? UINT32_MAX\n    : typeof process !== \"undefined\" && ((_c = process === null || process === void 0 ? void 0 : process.env) === null || _c === void 0 ? void 0 : _c[\"TEXT_DECODER\"]) !== \"force\"\n        ? 200\n        : 0;\nexport function utf8DecodeTD(bytes, inputOffset, byteLength) {\n    var stringBytes = bytes.subarray(inputOffset, inputOffset + byteLength);\n    return sharedTextDecoder.decode(stringBytes);\n}\n//# sourceMappingURL=utf8.mjs.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar DecodeError = /** @class */ (function (_super) {\n    __extends(DecodeError, _super);\n    function DecodeError(message) {\n        var _this = _super.call(this, message) || this;\n        // fix the prototype chain in a cross-platform way\n        var proto = Object.create(DecodeError.prototype);\n        Object.setPrototypeOf(_this, proto);\n        Object.defineProperty(_this, \"name\", {\n            configurable: true,\n            enumerable: false,\n            value: DecodeError.name,\n        });\n        return _this;\n    }\n    return DecodeError;\n}(Error));\nexport { DecodeError };\n//# sourceMappingURL=DecodeError.mjs.map","/**\n * ExtData is used to handle Extension Types that are not registered to ExtensionCodec.\n */\nvar ExtData = /** @class */ (function () {\n    function ExtData(type, data) {\n        this.type = type;\n        this.data = data;\n    }\n    return ExtData;\n}());\nexport { ExtData };\n//# sourceMappingURL=ExtData.mjs.map","// https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type\nimport { DecodeError } from \"./DecodeError.mjs\";\nimport { getInt64, setInt64 } from \"./utils/int.mjs\";\nexport var EXT_TIMESTAMP = -1;\nvar TIMESTAMP32_MAX_SEC = 0x100000000 - 1; // 32-bit unsigned int\nvar TIMESTAMP64_MAX_SEC = 0x400000000 - 1; // 34-bit unsigned int\nexport function encodeTimeSpecToTimestamp(_a) {\n    var sec = _a.sec, nsec = _a.nsec;\n    if (sec >= 0 && nsec >= 0 && sec <= TIMESTAMP64_MAX_SEC) {\n        // Here sec >= 0 && nsec >= 0\n        if (nsec === 0 && sec <= TIMESTAMP32_MAX_SEC) {\n            // timestamp 32 = { sec32 (unsigned) }\n            var rv = new Uint8Array(4);\n            var view = new DataView(rv.buffer);\n            view.setUint32(0, sec);\n            return rv;\n        }\n        else {\n            // timestamp 64 = { nsec30 (unsigned), sec34 (unsigned) }\n            var secHigh = sec / 0x100000000;\n            var secLow = sec & 0xffffffff;\n            var rv = new Uint8Array(8);\n            var view = new DataView(rv.buffer);\n            // nsec30 | secHigh2\n            view.setUint32(0, (nsec << 2) | (secHigh & 0x3));\n            // secLow32\n            view.setUint32(4, secLow);\n            return rv;\n        }\n    }\n    else {\n        // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n        var rv = new Uint8Array(12);\n        var view = new DataView(rv.buffer);\n        view.setUint32(0, nsec);\n        setInt64(view, 4, sec);\n        return rv;\n    }\n}\nexport function encodeDateToTimeSpec(date) {\n    var msec = date.getTime();\n    var sec = Math.floor(msec / 1e3);\n    var nsec = (msec - sec * 1e3) * 1e6;\n    // Normalizes { sec, nsec } to ensure nsec is unsigned.\n    var nsecInSec = Math.floor(nsec / 1e9);\n    return {\n        sec: sec + nsecInSec,\n        nsec: nsec - nsecInSec * 1e9,\n    };\n}\nexport function encodeTimestampExtension(object) {\n    if (object instanceof Date) {\n        var timeSpec = encodeDateToTimeSpec(object);\n        return encodeTimeSpecToTimestamp(timeSpec);\n    }\n    else {\n        return null;\n    }\n}\nexport function decodeTimestampToTimeSpec(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    // data may be 32, 64, or 96 bits\n    switch (data.byteLength) {\n        case 4: {\n            // timestamp 32 = { sec32 }\n            var sec = view.getUint32(0);\n            var nsec = 0;\n            return { sec: sec, nsec: nsec };\n        }\n        case 8: {\n            // timestamp 64 = { nsec30, sec34 }\n            var nsec30AndSecHigh2 = view.getUint32(0);\n            var secLow32 = view.getUint32(4);\n            var sec = (nsec30AndSecHigh2 & 0x3) * 0x100000000 + secLow32;\n            var nsec = nsec30AndSecHigh2 >>> 2;\n            return { sec: sec, nsec: nsec };\n        }\n        case 12: {\n            // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n            var sec = getInt64(view, 4);\n            var nsec = view.getUint32(0);\n            return { sec: sec, nsec: nsec };\n        }\n        default:\n            throw new DecodeError(\"Unrecognized data size for timestamp (expected 4, 8, or 12): \".concat(data.length));\n    }\n}\nexport function decodeTimestampExtension(data) {\n    var timeSpec = decodeTimestampToTimeSpec(data);\n    return new Date(timeSpec.sec * 1e3 + timeSpec.nsec / 1e6);\n}\nexport var timestampExtension = {\n    type: EXT_TIMESTAMP,\n    encode: encodeTimestampExtension,\n    decode: decodeTimestampExtension,\n};\n//# sourceMappingURL=timestamp.mjs.map","// ExtensionCodec to handle MessagePack extensions\nimport { ExtData } from \"./ExtData.mjs\";\nimport { timestampExtension } from \"./timestamp.mjs\";\nvar ExtensionCodec = /** @class */ (function () {\n    function ExtensionCodec() {\n        // built-in extensions\n        this.builtInEncoders = [];\n        this.builtInDecoders = [];\n        // custom extensions\n        this.encoders = [];\n        this.decoders = [];\n        this.register(timestampExtension);\n    }\n    ExtensionCodec.prototype.register = function (_a) {\n        var type = _a.type, encode = _a.encode, decode = _a.decode;\n        if (type >= 0) {\n            // custom extensions\n            this.encoders[type] = encode;\n            this.decoders[type] = decode;\n        }\n        else {\n            // built-in extensions\n            var index = 1 + type;\n            this.builtInEncoders[index] = encode;\n            this.builtInDecoders[index] = decode;\n        }\n    };\n    ExtensionCodec.prototype.tryToEncode = function (object, context) {\n        // built-in extensions\n        for (var i = 0; i < this.builtInEncoders.length; i++) {\n            var encodeExt = this.builtInEncoders[i];\n            if (encodeExt != null) {\n                var data = encodeExt(object, context);\n                if (data != null) {\n                    var type = -1 - i;\n                    return new ExtData(type, data);\n                }\n            }\n        }\n        // custom extensions\n        for (var i = 0; i < this.encoders.length; i++) {\n            var encodeExt = this.encoders[i];\n            if (encodeExt != null) {\n                var data = encodeExt(object, context);\n                if (data != null) {\n                    var type = i;\n                    return new ExtData(type, data);\n                }\n            }\n        }\n        if (object instanceof ExtData) {\n            // to keep ExtData as is\n            return object;\n        }\n        return null;\n    };\n    ExtensionCodec.prototype.decode = function (data, type, context) {\n        var decodeExt = type < 0 ? this.builtInDecoders[-1 - type] : this.decoders[type];\n        if (decodeExt) {\n            return decodeExt(data, type, context);\n        }\n        else {\n            // decode() does not fail, returns ExtData instead.\n            return new ExtData(type, data);\n        }\n    };\n    ExtensionCodec.defaultCodec = new ExtensionCodec();\n    return ExtensionCodec;\n}());\nexport { ExtensionCodec };\n//# sourceMappingURL=ExtensionCodec.mjs.map","export function ensureUint8Array(buffer) {\n    if (buffer instanceof Uint8Array) {\n        return buffer;\n    }\n    else if (ArrayBuffer.isView(buffer)) {\n        return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n    }\n    else if (buffer instanceof ArrayBuffer) {\n        return new Uint8Array(buffer);\n    }\n    else {\n        // ArrayLike<number>\n        return Uint8Array.from(buffer);\n    }\n}\nexport function createDataView(buffer) {\n    if (buffer instanceof ArrayBuffer) {\n        return new DataView(buffer);\n    }\n    var bufferView = ensureUint8Array(buffer);\n    return new DataView(bufferView.buffer, bufferView.byteOffset, bufferView.byteLength);\n}\n//# sourceMappingURL=typedArrays.mjs.map","import { utf8EncodeJs, utf8Count, TEXT_ENCODER_THRESHOLD, utf8EncodeTE } from \"./utils/utf8.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { setInt64, setUint64 } from \"./utils/int.mjs\";\nimport { ensureUint8Array } from \"./utils/typedArrays.mjs\";\nexport var DEFAULT_MAX_DEPTH = 100;\nexport var DEFAULT_INITIAL_BUFFER_SIZE = 2048;\nvar Encoder = /** @class */ (function () {\n    function Encoder(extensionCodec, context, maxDepth, initialBufferSize, sortKeys, forceFloat32, ignoreUndefined, forceIntegerToFloat) {\n        if (extensionCodec === void 0) { extensionCodec = ExtensionCodec.defaultCodec; }\n        if (context === void 0) { context = undefined; }\n        if (maxDepth === void 0) { maxDepth = DEFAULT_MAX_DEPTH; }\n        if (initialBufferSize === void 0) { initialBufferSize = DEFAULT_INITIAL_BUFFER_SIZE; }\n        if (sortKeys === void 0) { sortKeys = false; }\n        if (forceFloat32 === void 0) { forceFloat32 = false; }\n        if (ignoreUndefined === void 0) { ignoreUndefined = false; }\n        if (forceIntegerToFloat === void 0) { forceIntegerToFloat = false; }\n        this.extensionCodec = extensionCodec;\n        this.context = context;\n        this.maxDepth = maxDepth;\n        this.initialBufferSize = initialBufferSize;\n        this.sortKeys = sortKeys;\n        this.forceFloat32 = forceFloat32;\n        this.ignoreUndefined = ignoreUndefined;\n        this.forceIntegerToFloat = forceIntegerToFloat;\n        this.pos = 0;\n        this.view = new DataView(new ArrayBuffer(this.initialBufferSize));\n        this.bytes = new Uint8Array(this.view.buffer);\n    }\n    Encoder.prototype.reinitializeState = function () {\n        this.pos = 0;\n    };\n    /**\n     * This is almost equivalent to {@link Encoder#encode}, but it returns an reference of the encoder's internal buffer and thus much faster than {@link Encoder#encode}.\n     *\n     * @returns Encodes the object and returns a shared reference the encoder's internal buffer.\n     */\n    Encoder.prototype.encodeSharedRef = function (object) {\n        this.reinitializeState();\n        this.doEncode(object, 1);\n        return this.bytes.subarray(0, this.pos);\n    };\n    /**\n     * @returns Encodes the object and returns a copy of the encoder's internal buffer.\n     */\n    Encoder.prototype.encode = function (object) {\n        this.reinitializeState();\n        this.doEncode(object, 1);\n        return this.bytes.slice(0, this.pos);\n    };\n    Encoder.prototype.doEncode = function (object, depth) {\n        if (depth > this.maxDepth) {\n            throw new Error(\"Too deep objects in depth \".concat(depth));\n        }\n        if (object == null) {\n            this.encodeNil();\n        }\n        else if (typeof object === \"boolean\") {\n            this.encodeBoolean(object);\n        }\n        else if (typeof object === \"number\") {\n            this.encodeNumber(object);\n        }\n        else if (typeof object === \"string\") {\n            this.encodeString(object);\n        }\n        else {\n            this.encodeObject(object, depth);\n        }\n    };\n    Encoder.prototype.ensureBufferSizeToWrite = function (sizeToWrite) {\n        var requiredSize = this.pos + sizeToWrite;\n        if (this.view.byteLength < requiredSize) {\n            this.resizeBuffer(requiredSize * 2);\n        }\n    };\n    Encoder.prototype.resizeBuffer = function (newSize) {\n        var newBuffer = new ArrayBuffer(newSize);\n        var newBytes = new Uint8Array(newBuffer);\n        var newView = new DataView(newBuffer);\n        newBytes.set(this.bytes);\n        this.view = newView;\n        this.bytes = newBytes;\n    };\n    Encoder.prototype.encodeNil = function () {\n        this.writeU8(0xc0);\n    };\n    Encoder.prototype.encodeBoolean = function (object) {\n        if (object === false) {\n            this.writeU8(0xc2);\n        }\n        else {\n            this.writeU8(0xc3);\n        }\n    };\n    Encoder.prototype.encodeNumber = function (object) {\n        if (Number.isSafeInteger(object) && !this.forceIntegerToFloat) {\n            if (object >= 0) {\n                if (object < 0x80) {\n                    // positive fixint\n                    this.writeU8(object);\n                }\n                else if (object < 0x100) {\n                    // uint 8\n                    this.writeU8(0xcc);\n                    this.writeU8(object);\n                }\n                else if (object < 0x10000) {\n                    // uint 16\n                    this.writeU8(0xcd);\n                    this.writeU16(object);\n                }\n                else if (object < 0x100000000) {\n                    // uint 32\n                    this.writeU8(0xce);\n                    this.writeU32(object);\n                }\n                else {\n                    // uint 64\n                    this.writeU8(0xcf);\n                    this.writeU64(object);\n                }\n            }\n            else {\n                if (object >= -0x20) {\n                    // negative fixint\n                    this.writeU8(0xe0 | (object + 0x20));\n                }\n                else if (object >= -0x80) {\n                    // int 8\n                    this.writeU8(0xd0);\n                    this.writeI8(object);\n                }\n                else if (object >= -0x8000) {\n                    // int 16\n                    this.writeU8(0xd1);\n                    this.writeI16(object);\n                }\n                else if (object >= -0x80000000) {\n                    // int 32\n                    this.writeU8(0xd2);\n                    this.writeI32(object);\n                }\n                else {\n                    // int 64\n                    this.writeU8(0xd3);\n                    this.writeI64(object);\n                }\n            }\n        }\n        else {\n            // non-integer numbers\n            if (this.forceFloat32) {\n                // float 32\n                this.writeU8(0xca);\n                this.writeF32(object);\n            }\n            else {\n                // float 64\n                this.writeU8(0xcb);\n                this.writeF64(object);\n            }\n        }\n    };\n    Encoder.prototype.writeStringHeader = function (byteLength) {\n        if (byteLength < 32) {\n            // fixstr\n            this.writeU8(0xa0 + byteLength);\n        }\n        else if (byteLength < 0x100) {\n            // str 8\n            this.writeU8(0xd9);\n            this.writeU8(byteLength);\n        }\n        else if (byteLength < 0x10000) {\n            // str 16\n            this.writeU8(0xda);\n            this.writeU16(byteLength);\n        }\n        else if (byteLength < 0x100000000) {\n            // str 32\n            this.writeU8(0xdb);\n            this.writeU32(byteLength);\n        }\n        else {\n            throw new Error(\"Too long string: \".concat(byteLength, \" bytes in UTF-8\"));\n        }\n    };\n    Encoder.prototype.encodeString = function (object) {\n        var maxHeaderSize = 1 + 4;\n        var strLength = object.length;\n        if (strLength > TEXT_ENCODER_THRESHOLD) {\n            var byteLength = utf8Count(object);\n            this.ensureBufferSizeToWrite(maxHeaderSize + byteLength);\n            this.writeStringHeader(byteLength);\n            utf8EncodeTE(object, this.bytes, this.pos);\n            this.pos += byteLength;\n        }\n        else {\n            var byteLength = utf8Count(object);\n            this.ensureBufferSizeToWrite(maxHeaderSize + byteLength);\n            this.writeStringHeader(byteLength);\n            utf8EncodeJs(object, this.bytes, this.pos);\n            this.pos += byteLength;\n        }\n    };\n    Encoder.prototype.encodeObject = function (object, depth) {\n        // try to encode objects with custom codec first of non-primitives\n        var ext = this.extensionCodec.tryToEncode(object, this.context);\n        if (ext != null) {\n            this.encodeExtension(ext);\n        }\n        else if (Array.isArray(object)) {\n            this.encodeArray(object, depth);\n        }\n        else if (ArrayBuffer.isView(object)) {\n            this.encodeBinary(object);\n        }\n        else if (typeof object === \"object\") {\n            this.encodeMap(object, depth);\n        }\n        else {\n            // symbol, function and other special object come here unless extensionCodec handles them.\n            throw new Error(\"Unrecognized object: \".concat(Object.prototype.toString.apply(object)));\n        }\n    };\n    Encoder.prototype.encodeBinary = function (object) {\n        var size = object.byteLength;\n        if (size < 0x100) {\n            // bin 8\n            this.writeU8(0xc4);\n            this.writeU8(size);\n        }\n        else if (size < 0x10000) {\n            // bin 16\n            this.writeU8(0xc5);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // bin 32\n            this.writeU8(0xc6);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(\"Too large binary: \".concat(size));\n        }\n        var bytes = ensureUint8Array(object);\n        this.writeU8a(bytes);\n    };\n    Encoder.prototype.encodeArray = function (object, depth) {\n        var size = object.length;\n        if (size < 16) {\n            // fixarray\n            this.writeU8(0x90 + size);\n        }\n        else if (size < 0x10000) {\n            // array 16\n            this.writeU8(0xdc);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // array 32\n            this.writeU8(0xdd);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(\"Too large array: \".concat(size));\n        }\n        for (var _i = 0, object_1 = object; _i < object_1.length; _i++) {\n            var item = object_1[_i];\n            this.doEncode(item, depth + 1);\n        }\n    };\n    Encoder.prototype.countWithoutUndefined = function (object, keys) {\n        var count = 0;\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            if (object[key] !== undefined) {\n                count++;\n            }\n        }\n        return count;\n    };\n    Encoder.prototype.encodeMap = function (object, depth) {\n        var keys = Object.keys(object);\n        if (this.sortKeys) {\n            keys.sort();\n        }\n        var size = this.ignoreUndefined ? this.countWithoutUndefined(object, keys) : keys.length;\n        if (size < 16) {\n            // fixmap\n            this.writeU8(0x80 + size);\n        }\n        else if (size < 0x10000) {\n            // map 16\n            this.writeU8(0xde);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // map 32\n            this.writeU8(0xdf);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(\"Too large map object: \".concat(size));\n        }\n        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n            var key = keys_2[_i];\n            var value = object[key];\n            if (!(this.ignoreUndefined && value === undefined)) {\n                this.encodeString(key);\n                this.doEncode(value, depth + 1);\n            }\n        }\n    };\n    Encoder.prototype.encodeExtension = function (ext) {\n        var size = ext.data.length;\n        if (size === 1) {\n            // fixext 1\n            this.writeU8(0xd4);\n        }\n        else if (size === 2) {\n            // fixext 2\n            this.writeU8(0xd5);\n        }\n        else if (size === 4) {\n            // fixext 4\n            this.writeU8(0xd6);\n        }\n        else if (size === 8) {\n            // fixext 8\n            this.writeU8(0xd7);\n        }\n        else if (size === 16) {\n            // fixext 16\n            this.writeU8(0xd8);\n        }\n        else if (size < 0x100) {\n            // ext 8\n            this.writeU8(0xc7);\n            this.writeU8(size);\n        }\n        else if (size < 0x10000) {\n            // ext 16\n            this.writeU8(0xc8);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // ext 32\n            this.writeU8(0xc9);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(\"Too large extension object: \".concat(size));\n        }\n        this.writeI8(ext.type);\n        this.writeU8a(ext.data);\n    };\n    Encoder.prototype.writeU8 = function (value) {\n        this.ensureBufferSizeToWrite(1);\n        this.view.setUint8(this.pos, value);\n        this.pos++;\n    };\n    Encoder.prototype.writeU8a = function (values) {\n        var size = values.length;\n        this.ensureBufferSizeToWrite(size);\n        this.bytes.set(values, this.pos);\n        this.pos += size;\n    };\n    Encoder.prototype.writeI8 = function (value) {\n        this.ensureBufferSizeToWrite(1);\n        this.view.setInt8(this.pos, value);\n        this.pos++;\n    };\n    Encoder.prototype.writeU16 = function (value) {\n        this.ensureBufferSizeToWrite(2);\n        this.view.setUint16(this.pos, value);\n        this.pos += 2;\n    };\n    Encoder.prototype.writeI16 = function (value) {\n        this.ensureBufferSizeToWrite(2);\n        this.view.setInt16(this.pos, value);\n        this.pos += 2;\n    };\n    Encoder.prototype.writeU32 = function (value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setUint32(this.pos, value);\n        this.pos += 4;\n    };\n    Encoder.prototype.writeI32 = function (value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setInt32(this.pos, value);\n        this.pos += 4;\n    };\n    Encoder.prototype.writeF32 = function (value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setFloat32(this.pos, value);\n        this.pos += 4;\n    };\n    Encoder.prototype.writeF64 = function (value) {\n        this.ensureBufferSizeToWrite(8);\n        this.view.setFloat64(this.pos, value);\n        this.pos += 8;\n    };\n    Encoder.prototype.writeU64 = function (value) {\n        this.ensureBufferSizeToWrite(8);\n        setUint64(this.view, this.pos, value);\n        this.pos += 8;\n    };\n    Encoder.prototype.writeI64 = function (value) {\n        this.ensureBufferSizeToWrite(8);\n        setInt64(this.view, this.pos, value);\n        this.pos += 8;\n    };\n    return Encoder;\n}());\nexport { Encoder };\n//# sourceMappingURL=Encoder.mjs.map","export function prettyByte(byte) {\n    return \"\".concat(byte < 0 ? \"-\" : \"\", \"0x\").concat(Math.abs(byte).toString(16).padStart(2, \"0\"));\n}\n//# sourceMappingURL=prettyByte.mjs.map","import { utf8DecodeJs } from \"./utils/utf8.mjs\";\nvar DEFAULT_MAX_KEY_LENGTH = 16;\nvar DEFAULT_MAX_LENGTH_PER_KEY = 16;\nvar CachedKeyDecoder = /** @class */ (function () {\n    function CachedKeyDecoder(maxKeyLength, maxLengthPerKey) {\n        if (maxKeyLength === void 0) { maxKeyLength = DEFAULT_MAX_KEY_LENGTH; }\n        if (maxLengthPerKey === void 0) { maxLengthPerKey = DEFAULT_MAX_LENGTH_PER_KEY; }\n        this.maxKeyLength = maxKeyLength;\n        this.maxLengthPerKey = maxLengthPerKey;\n        this.hit = 0;\n        this.miss = 0;\n        // avoid `new Array(N)`, which makes a sparse array,\n        // because a sparse array is typically slower than a non-sparse array.\n        this.caches = [];\n        for (var i = 0; i < this.maxKeyLength; i++) {\n            this.caches.push([]);\n        }\n    }\n    CachedKeyDecoder.prototype.canBeCached = function (byteLength) {\n        return byteLength > 0 && byteLength <= this.maxKeyLength;\n    };\n    CachedKeyDecoder.prototype.find = function (bytes, inputOffset, byteLength) {\n        var records = this.caches[byteLength - 1];\n        FIND_CHUNK: for (var _i = 0, records_1 = records; _i < records_1.length; _i++) {\n            var record = records_1[_i];\n            var recordBytes = record.bytes;\n            for (var j = 0; j < byteLength; j++) {\n                if (recordBytes[j] !== bytes[inputOffset + j]) {\n                    continue FIND_CHUNK;\n                }\n            }\n            return record.str;\n        }\n        return null;\n    };\n    CachedKeyDecoder.prototype.store = function (bytes, value) {\n        var records = this.caches[bytes.length - 1];\n        var record = { bytes: bytes, str: value };\n        if (records.length >= this.maxLengthPerKey) {\n            // `records` are full!\n            // Set `record` to an arbitrary position.\n            records[(Math.random() * records.length) | 0] = record;\n        }\n        else {\n            records.push(record);\n        }\n    };\n    CachedKeyDecoder.prototype.decode = function (bytes, inputOffset, byteLength) {\n        var cachedValue = this.find(bytes, inputOffset, byteLength);\n        if (cachedValue != null) {\n            this.hit++;\n            return cachedValue;\n        }\n        this.miss++;\n        var str = utf8DecodeJs(bytes, inputOffset, byteLength);\n        // Ensure to copy a slice of bytes because the byte may be NodeJS Buffer and Buffer#slice() returns a reference to its internal ArrayBuffer.\n        var slicedCopyOfBytes = Uint8Array.prototype.slice.call(bytes, inputOffset, inputOffset + byteLength);\n        this.store(slicedCopyOfBytes, str);\n        return str;\n    };\n    return CachedKeyDecoder;\n}());\nexport { CachedKeyDecoder };\n//# sourceMappingURL=CachedKeyDecoder.mjs.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nimport { prettyByte } from \"./utils/prettyByte.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { getInt64, getUint64, UINT32_MAX } from \"./utils/int.mjs\";\nimport { utf8DecodeJs, TEXT_DECODER_THRESHOLD, utf8DecodeTD } from \"./utils/utf8.mjs\";\nimport { createDataView, ensureUint8Array } from \"./utils/typedArrays.mjs\";\nimport { CachedKeyDecoder } from \"./CachedKeyDecoder.mjs\";\nimport { DecodeError } from \"./DecodeError.mjs\";\nvar isValidMapKeyType = function (key) {\n    var keyType = typeof key;\n    return keyType === \"string\" || keyType === \"number\";\n};\nvar HEAD_BYTE_REQUIRED = -1;\nvar EMPTY_VIEW = new DataView(new ArrayBuffer(0));\nvar EMPTY_BYTES = new Uint8Array(EMPTY_VIEW.buffer);\n// IE11: Hack to support IE11.\n// IE11: Drop this hack and just use RangeError when IE11 is obsolete.\nexport var DataViewIndexOutOfBoundsError = (function () {\n    try {\n        // IE11: The spec says it should throw RangeError,\n        // IE11: but in IE11 it throws TypeError.\n        EMPTY_VIEW.getInt8(0);\n    }\n    catch (e) {\n        return e.constructor;\n    }\n    throw new Error(\"never reached\");\n})();\nvar MORE_DATA = new DataViewIndexOutOfBoundsError(\"Insufficient data\");\nvar sharedCachedKeyDecoder = new CachedKeyDecoder();\nvar Decoder = /** @class */ (function () {\n    function Decoder(extensionCodec, context, maxStrLength, maxBinLength, maxArrayLength, maxMapLength, maxExtLength, keyDecoder) {\n        if (extensionCodec === void 0) { extensionCodec = ExtensionCodec.defaultCodec; }\n        if (context === void 0) { context = undefined; }\n        if (maxStrLength === void 0) { maxStrLength = UINT32_MAX; }\n        if (maxBinLength === void 0) { maxBinLength = UINT32_MAX; }\n        if (maxArrayLength === void 0) { maxArrayLength = UINT32_MAX; }\n        if (maxMapLength === void 0) { maxMapLength = UINT32_MAX; }\n        if (maxExtLength === void 0) { maxExtLength = UINT32_MAX; }\n        if (keyDecoder === void 0) { keyDecoder = sharedCachedKeyDecoder; }\n        this.extensionCodec = extensionCodec;\n        this.context = context;\n        this.maxStrLength = maxStrLength;\n        this.maxBinLength = maxBinLength;\n        this.maxArrayLength = maxArrayLength;\n        this.maxMapLength = maxMapLength;\n        this.maxExtLength = maxExtLength;\n        this.keyDecoder = keyDecoder;\n        this.totalPos = 0;\n        this.pos = 0;\n        this.view = EMPTY_VIEW;\n        this.bytes = EMPTY_BYTES;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack = [];\n    }\n    Decoder.prototype.reinitializeState = function () {\n        this.totalPos = 0;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack.length = 0;\n        // view, bytes, and pos will be re-initialized in setBuffer()\n    };\n    Decoder.prototype.setBuffer = function (buffer) {\n        this.bytes = ensureUint8Array(buffer);\n        this.view = createDataView(this.bytes);\n        this.pos = 0;\n    };\n    Decoder.prototype.appendBuffer = function (buffer) {\n        if (this.headByte === HEAD_BYTE_REQUIRED && !this.hasRemaining(1)) {\n            this.setBuffer(buffer);\n        }\n        else {\n            var remainingData = this.bytes.subarray(this.pos);\n            var newData = ensureUint8Array(buffer);\n            // concat remainingData + newData\n            var newBuffer = new Uint8Array(remainingData.length + newData.length);\n            newBuffer.set(remainingData);\n            newBuffer.set(newData, remainingData.length);\n            this.setBuffer(newBuffer);\n        }\n    };\n    Decoder.prototype.hasRemaining = function (size) {\n        return this.view.byteLength - this.pos >= size;\n    };\n    Decoder.prototype.createExtraByteError = function (posToShow) {\n        var _a = this, view = _a.view, pos = _a.pos;\n        return new RangeError(\"Extra \".concat(view.byteLength - pos, \" of \").concat(view.byteLength, \" byte(s) found at buffer[\").concat(posToShow, \"]\"));\n    };\n    /**\n     * @throws {@link DecodeError}\n     * @throws {@link RangeError}\n     */\n    Decoder.prototype.decode = function (buffer) {\n        this.reinitializeState();\n        this.setBuffer(buffer);\n        var object = this.doDecodeSync();\n        if (this.hasRemaining(1)) {\n            throw this.createExtraByteError(this.pos);\n        }\n        return object;\n    };\n    Decoder.prototype.decodeMulti = function (buffer) {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    this.reinitializeState();\n                    this.setBuffer(buffer);\n                    _a.label = 1;\n                case 1:\n                    if (!this.hasRemaining(1)) return [3 /*break*/, 3];\n                    return [4 /*yield*/, this.doDecodeSync()];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 1];\n                case 3: return [2 /*return*/];\n            }\n        });\n    };\n    Decoder.prototype.decodeAsync = function (stream) {\n        var stream_1, stream_1_1;\n        var e_1, _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var decoded, object, buffer, e_1_1, _b, headByte, pos, totalPos;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        decoded = false;\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 6, 7, 12]);\n                        stream_1 = __asyncValues(stream);\n                        _c.label = 2;\n                    case 2: return [4 /*yield*/, stream_1.next()];\n                    case 3:\n                        if (!(stream_1_1 = _c.sent(), !stream_1_1.done)) return [3 /*break*/, 5];\n                        buffer = stream_1_1.value;\n                        if (decoded) {\n                            throw this.createExtraByteError(this.totalPos);\n                        }\n                        this.appendBuffer(buffer);\n                        try {\n                            object = this.doDecodeSync();\n                            decoded = true;\n                        }\n                        catch (e) {\n                            if (!(e instanceof DataViewIndexOutOfBoundsError)) {\n                                throw e; // rethrow\n                            }\n                            // fallthrough\n                        }\n                        this.totalPos += this.pos;\n                        _c.label = 4;\n                    case 4: return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 12];\n                    case 6:\n                        e_1_1 = _c.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 12];\n                    case 7:\n                        _c.trys.push([7, , 10, 11]);\n                        if (!(stream_1_1 && !stream_1_1.done && (_a = stream_1.return))) return [3 /*break*/, 9];\n                        return [4 /*yield*/, _a.call(stream_1)];\n                    case 8:\n                        _c.sent();\n                        _c.label = 9;\n                    case 9: return [3 /*break*/, 11];\n                    case 10:\n                        if (e_1) throw e_1.error;\n                        return [7 /*endfinally*/];\n                    case 11: return [7 /*endfinally*/];\n                    case 12:\n                        if (decoded) {\n                            if (this.hasRemaining(1)) {\n                                throw this.createExtraByteError(this.totalPos);\n                            }\n                            return [2 /*return*/, object];\n                        }\n                        _b = this, headByte = _b.headByte, pos = _b.pos, totalPos = _b.totalPos;\n                        throw new RangeError(\"Insufficient data in parsing \".concat(prettyByte(headByte), \" at \").concat(totalPos, \" (\").concat(pos, \" in the current buffer)\"));\n                }\n            });\n        });\n    };\n    Decoder.prototype.decodeArrayStream = function (stream) {\n        return this.decodeMultiAsync(stream, true);\n    };\n    Decoder.prototype.decodeStream = function (stream) {\n        return this.decodeMultiAsync(stream, false);\n    };\n    Decoder.prototype.decodeMultiAsync = function (stream, isArray) {\n        return __asyncGenerator(this, arguments, function decodeMultiAsync_1() {\n            var isArrayHeaderRequired, arrayItemsLeft, stream_2, stream_2_1, buffer, e_2, e_3_1;\n            var e_3, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        isArrayHeaderRequired = isArray;\n                        arrayItemsLeft = -1;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 13, 14, 19]);\n                        stream_2 = __asyncValues(stream);\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, __await(stream_2.next())];\n                    case 3:\n                        if (!(stream_2_1 = _b.sent(), !stream_2_1.done)) return [3 /*break*/, 12];\n                        buffer = stream_2_1.value;\n                        if (isArray && arrayItemsLeft === 0) {\n                            throw this.createExtraByteError(this.totalPos);\n                        }\n                        this.appendBuffer(buffer);\n                        if (isArrayHeaderRequired) {\n                            arrayItemsLeft = this.readArraySize();\n                            isArrayHeaderRequired = false;\n                            this.complete();\n                        }\n                        _b.label = 4;\n                    case 4:\n                        _b.trys.push([4, 9, , 10]);\n                        _b.label = 5;\n                    case 5:\n                        if (!true) return [3 /*break*/, 8];\n                        return [4 /*yield*/, __await(this.doDecodeSync())];\n                    case 6: return [4 /*yield*/, _b.sent()];\n                    case 7:\n                        _b.sent();\n                        if (--arrayItemsLeft === 0) {\n                            return [3 /*break*/, 8];\n                        }\n                        return [3 /*break*/, 5];\n                    case 8: return [3 /*break*/, 10];\n                    case 9:\n                        e_2 = _b.sent();\n                        if (!(e_2 instanceof DataViewIndexOutOfBoundsError)) {\n                            throw e_2; // rethrow\n                        }\n                        return [3 /*break*/, 10];\n                    case 10:\n                        this.totalPos += this.pos;\n                        _b.label = 11;\n                    case 11: return [3 /*break*/, 2];\n                    case 12: return [3 /*break*/, 19];\n                    case 13:\n                        e_3_1 = _b.sent();\n                        e_3 = { error: e_3_1 };\n                        return [3 /*break*/, 19];\n                    case 14:\n                        _b.trys.push([14, , 17, 18]);\n                        if (!(stream_2_1 && !stream_2_1.done && (_a = stream_2.return))) return [3 /*break*/, 16];\n                        return [4 /*yield*/, __await(_a.call(stream_2))];\n                    case 15:\n                        _b.sent();\n                        _b.label = 16;\n                    case 16: return [3 /*break*/, 18];\n                    case 17:\n                        if (e_3) throw e_3.error;\n                        return [7 /*endfinally*/];\n                    case 18: return [7 /*endfinally*/];\n                    case 19: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Decoder.prototype.doDecodeSync = function () {\n        DECODE: while (true) {\n            var headByte = this.readHeadByte();\n            var object = void 0;\n            if (headByte >= 0xe0) {\n                // negative fixint (111x xxxx) 0xe0 - 0xff\n                object = headByte - 0x100;\n            }\n            else if (headByte < 0xc0) {\n                if (headByte < 0x80) {\n                    // positive fixint (0xxx xxxx) 0x00 - 0x7f\n                    object = headByte;\n                }\n                else if (headByte < 0x90) {\n                    // fixmap (1000 xxxx) 0x80 - 0x8f\n                    var size = headByte - 0x80;\n                    if (size !== 0) {\n                        this.pushMapState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = {};\n                    }\n                }\n                else if (headByte < 0xa0) {\n                    // fixarray (1001 xxxx) 0x90 - 0x9f\n                    var size = headByte - 0x90;\n                    if (size !== 0) {\n                        this.pushArrayState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = [];\n                    }\n                }\n                else {\n                    // fixstr (101x xxxx) 0xa0 - 0xbf\n                    var byteLength = headByte - 0xa0;\n                    object = this.decodeUtf8String(byteLength, 0);\n                }\n            }\n            else if (headByte === 0xc0) {\n                // nil\n                object = null;\n            }\n            else if (headByte === 0xc2) {\n                // false\n                object = false;\n            }\n            else if (headByte === 0xc3) {\n                // true\n                object = true;\n            }\n            else if (headByte === 0xca) {\n                // float 32\n                object = this.readF32();\n            }\n            else if (headByte === 0xcb) {\n                // float 64\n                object = this.readF64();\n            }\n            else if (headByte === 0xcc) {\n                // uint 8\n                object = this.readU8();\n            }\n            else if (headByte === 0xcd) {\n                // uint 16\n                object = this.readU16();\n            }\n            else if (headByte === 0xce) {\n                // uint 32\n                object = this.readU32();\n            }\n            else if (headByte === 0xcf) {\n                // uint 64\n                object = this.readU64();\n            }\n            else if (headByte === 0xd0) {\n                // int 8\n                object = this.readI8();\n            }\n            else if (headByte === 0xd1) {\n                // int 16\n                object = this.readI16();\n            }\n            else if (headByte === 0xd2) {\n                // int 32\n                object = this.readI32();\n            }\n            else if (headByte === 0xd3) {\n                // int 64\n                object = this.readI64();\n            }\n            else if (headByte === 0xd9) {\n                // str 8\n                var byteLength = this.lookU8();\n                object = this.decodeUtf8String(byteLength, 1);\n            }\n            else if (headByte === 0xda) {\n                // str 16\n                var byteLength = this.lookU16();\n                object = this.decodeUtf8String(byteLength, 2);\n            }\n            else if (headByte === 0xdb) {\n                // str 32\n                var byteLength = this.lookU32();\n                object = this.decodeUtf8String(byteLength, 4);\n            }\n            else if (headByte === 0xdc) {\n                // array 16\n                var size = this.readU16();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xdd) {\n                // array 32\n                var size = this.readU32();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xde) {\n                // map 16\n                var size = this.readU16();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xdf) {\n                // map 32\n                var size = this.readU32();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xc4) {\n                // bin 8\n                var size = this.lookU8();\n                object = this.decodeBinary(size, 1);\n            }\n            else if (headByte === 0xc5) {\n                // bin 16\n                var size = this.lookU16();\n                object = this.decodeBinary(size, 2);\n            }\n            else if (headByte === 0xc6) {\n                // bin 32\n                var size = this.lookU32();\n                object = this.decodeBinary(size, 4);\n            }\n            else if (headByte === 0xd4) {\n                // fixext 1\n                object = this.decodeExtension(1, 0);\n            }\n            else if (headByte === 0xd5) {\n                // fixext 2\n                object = this.decodeExtension(2, 0);\n            }\n            else if (headByte === 0xd6) {\n                // fixext 4\n                object = this.decodeExtension(4, 0);\n            }\n            else if (headByte === 0xd7) {\n                // fixext 8\n                object = this.decodeExtension(8, 0);\n            }\n            else if (headByte === 0xd8) {\n                // fixext 16\n                object = this.decodeExtension(16, 0);\n            }\n            else if (headByte === 0xc7) {\n                // ext 8\n                var size = this.lookU8();\n                object = this.decodeExtension(size, 1);\n            }\n            else if (headByte === 0xc8) {\n                // ext 16\n                var size = this.lookU16();\n                object = this.decodeExtension(size, 2);\n            }\n            else if (headByte === 0xc9) {\n                // ext 32\n                var size = this.lookU32();\n                object = this.decodeExtension(size, 4);\n            }\n            else {\n                throw new DecodeError(\"Unrecognized type byte: \".concat(prettyByte(headByte)));\n            }\n            this.complete();\n            var stack = this.stack;\n            while (stack.length > 0) {\n                // arrays and maps\n                var state = stack[stack.length - 1];\n                if (state.type === 0 /* State.ARRAY */) {\n                    state.array[state.position] = object;\n                    state.position++;\n                    if (state.position === state.size) {\n                        stack.pop();\n                        object = state.array;\n                    }\n                    else {\n                        continue DECODE;\n                    }\n                }\n                else if (state.type === 1 /* State.MAP_KEY */) {\n                    if (!isValidMapKeyType(object)) {\n                        throw new DecodeError(\"The type of key must be string or number but \" + typeof object);\n                    }\n                    if (object === \"__proto__\") {\n                        throw new DecodeError(\"The key __proto__ is not allowed\");\n                    }\n                    state.key = object;\n                    state.type = 2 /* State.MAP_VALUE */;\n                    continue DECODE;\n                }\n                else {\n                    // it must be `state.type === State.MAP_VALUE` here\n                    state.map[state.key] = object;\n                    state.readCount++;\n                    if (state.readCount === state.size) {\n                        stack.pop();\n                        object = state.map;\n                    }\n                    else {\n                        state.key = null;\n                        state.type = 1 /* State.MAP_KEY */;\n                        continue DECODE;\n                    }\n                }\n            }\n            return object;\n        }\n    };\n    Decoder.prototype.readHeadByte = function () {\n        if (this.headByte === HEAD_BYTE_REQUIRED) {\n            this.headByte = this.readU8();\n            // console.log(\"headByte\", prettyByte(this.headByte));\n        }\n        return this.headByte;\n    };\n    Decoder.prototype.complete = function () {\n        this.headByte = HEAD_BYTE_REQUIRED;\n    };\n    Decoder.prototype.readArraySize = function () {\n        var headByte = this.readHeadByte();\n        switch (headByte) {\n            case 0xdc:\n                return this.readU16();\n            case 0xdd:\n                return this.readU32();\n            default: {\n                if (headByte < 0xa0) {\n                    return headByte - 0x90;\n                }\n                else {\n                    throw new DecodeError(\"Unrecognized array type byte: \".concat(prettyByte(headByte)));\n                }\n            }\n        }\n    };\n    Decoder.prototype.pushMapState = function (size) {\n        if (size > this.maxMapLength) {\n            throw new DecodeError(\"Max length exceeded: map length (\".concat(size, \") > maxMapLengthLength (\").concat(this.maxMapLength, \")\"));\n        }\n        this.stack.push({\n            type: 1 /* State.MAP_KEY */,\n            size: size,\n            key: null,\n            readCount: 0,\n            map: {},\n        });\n    };\n    Decoder.prototype.pushArrayState = function (size) {\n        if (size > this.maxArrayLength) {\n            throw new DecodeError(\"Max length exceeded: array length (\".concat(size, \") > maxArrayLength (\").concat(this.maxArrayLength, \")\"));\n        }\n        this.stack.push({\n            type: 0 /* State.ARRAY */,\n            size: size,\n            array: new Array(size),\n            position: 0,\n        });\n    };\n    Decoder.prototype.decodeUtf8String = function (byteLength, headerOffset) {\n        var _a;\n        if (byteLength > this.maxStrLength) {\n            throw new DecodeError(\"Max length exceeded: UTF-8 byte length (\".concat(byteLength, \") > maxStrLength (\").concat(this.maxStrLength, \")\"));\n        }\n        if (this.bytes.byteLength < this.pos + headerOffset + byteLength) {\n            throw MORE_DATA;\n        }\n        var offset = this.pos + headerOffset;\n        var object;\n        if (this.stateIsMapKey() && ((_a = this.keyDecoder) === null || _a === void 0 ? void 0 : _a.canBeCached(byteLength))) {\n            object = this.keyDecoder.decode(this.bytes, offset, byteLength);\n        }\n        else if (byteLength > TEXT_DECODER_THRESHOLD) {\n            object = utf8DecodeTD(this.bytes, offset, byteLength);\n        }\n        else {\n            object = utf8DecodeJs(this.bytes, offset, byteLength);\n        }\n        this.pos += headerOffset + byteLength;\n        return object;\n    };\n    Decoder.prototype.stateIsMapKey = function () {\n        if (this.stack.length > 0) {\n            var state = this.stack[this.stack.length - 1];\n            return state.type === 1 /* State.MAP_KEY */;\n        }\n        return false;\n    };\n    Decoder.prototype.decodeBinary = function (byteLength, headOffset) {\n        if (byteLength > this.maxBinLength) {\n            throw new DecodeError(\"Max length exceeded: bin length (\".concat(byteLength, \") > maxBinLength (\").concat(this.maxBinLength, \")\"));\n        }\n        if (!this.hasRemaining(byteLength + headOffset)) {\n            throw MORE_DATA;\n        }\n        var offset = this.pos + headOffset;\n        var object = this.bytes.subarray(offset, offset + byteLength);\n        this.pos += headOffset + byteLength;\n        return object;\n    };\n    Decoder.prototype.decodeExtension = function (size, headOffset) {\n        if (size > this.maxExtLength) {\n            throw new DecodeError(\"Max length exceeded: ext length (\".concat(size, \") > maxExtLength (\").concat(this.maxExtLength, \")\"));\n        }\n        var extType = this.view.getInt8(this.pos + headOffset);\n        var data = this.decodeBinary(size, headOffset + 1 /* extType */);\n        return this.extensionCodec.decode(data, extType, this.context);\n    };\n    Decoder.prototype.lookU8 = function () {\n        return this.view.getUint8(this.pos);\n    };\n    Decoder.prototype.lookU16 = function () {\n        return this.view.getUint16(this.pos);\n    };\n    Decoder.prototype.lookU32 = function () {\n        return this.view.getUint32(this.pos);\n    };\n    Decoder.prototype.readU8 = function () {\n        var value = this.view.getUint8(this.pos);\n        this.pos++;\n        return value;\n    };\n    Decoder.prototype.readI8 = function () {\n        var value = this.view.getInt8(this.pos);\n        this.pos++;\n        return value;\n    };\n    Decoder.prototype.readU16 = function () {\n        var value = this.view.getUint16(this.pos);\n        this.pos += 2;\n        return value;\n    };\n    Decoder.prototype.readI16 = function () {\n        var value = this.view.getInt16(this.pos);\n        this.pos += 2;\n        return value;\n    };\n    Decoder.prototype.readU32 = function () {\n        var value = this.view.getUint32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readI32 = function () {\n        var value = this.view.getInt32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readU64 = function () {\n        var value = getUint64(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    };\n    Decoder.prototype.readI64 = function () {\n        var value = getInt64(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    };\n    Decoder.prototype.readF32 = function () {\n        var value = this.view.getFloat32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readF64 = function () {\n        var value = this.view.getFloat64(this.pos);\n        this.pos += 8;\n        return value;\n    };\n    return Decoder;\n}());\nexport { Decoder };\n//# sourceMappingURL=Decoder.mjs.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n// Not exported from index.\r\n/** @private */\r\nexport class BinaryMessageFormat {\r\n    // The length prefix of binary messages is encoded as VarInt. Read the comment in\r\n    // the BinaryMessageParser.TryParseMessage for details.\r\n    static write(output) {\r\n        let size = output.byteLength || output.length;\r\n        const lenBuffer = [];\r\n        do {\r\n            let sizePart = size & 0x7f;\r\n            size = size >> 7;\r\n            if (size > 0) {\r\n                sizePart |= 0x80;\r\n            }\r\n            lenBuffer.push(sizePart);\r\n        } while (size > 0);\r\n        size = output.byteLength || output.length;\r\n        const buffer = new Uint8Array(lenBuffer.length + size);\r\n        buffer.set(lenBuffer, 0);\r\n        buffer.set(output, lenBuffer.length);\r\n        return buffer.buffer;\r\n    }\r\n    static parse(input) {\r\n        const result = [];\r\n        const uint8Array = new Uint8Array(input);\r\n        const maxLengthPrefixSize = 5;\r\n        const numBitsToShift = [0, 7, 14, 21, 28];\r\n        for (let offset = 0; offset < input.byteLength;) {\r\n            let numBytes = 0;\r\n            let size = 0;\r\n            let byteRead;\r\n            do {\r\n                byteRead = uint8Array[offset + numBytes];\r\n                size = size | ((byteRead & 0x7f) << (numBitsToShift[numBytes]));\r\n                numBytes++;\r\n            } while (numBytes < Math.min(maxLengthPrefixSize, input.byteLength - offset) && (byteRead & 0x80) !== 0);\r\n            if ((byteRead & 0x80) !== 0 && numBytes < maxLengthPrefixSize) {\r\n                throw new Error(\"Cannot read message size.\");\r\n            }\r\n            if (numBytes === maxLengthPrefixSize && byteRead > 7) {\r\n                throw new Error(\"Messages bigger than 2GB are not supported.\");\r\n            }\r\n            if (uint8Array.byteLength >= (offset + numBytes + size)) {\r\n                // IE does not support .slice() so use subarray\r\n                result.push(uint8Array.slice\r\n                    ? uint8Array.slice(offset + numBytes, offset + numBytes + size)\r\n                    : uint8Array.subarray(offset + numBytes, offset + numBytes + size));\r\n            }\r\n            else {\r\n                throw new Error(\"Incomplete message.\");\r\n            }\r\n            offset = offset + numBytes + size;\r\n        }\r\n        return result;\r\n    }\r\n}\r\n//# sourceMappingURL=BinaryMessageFormat.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\nimport { Encoder, Decoder } from \"@msgpack/msgpack\";\r\nimport { LogLevel, MessageType, NullLogger, TransferFormat, } from \"@microsoft/signalr\";\r\nimport { BinaryMessageFormat } from \"./BinaryMessageFormat\";\r\nimport { isArrayBuffer } from \"./Utils\";\r\n// TypeDoc's @inheritDoc and @link don't work across modules :(\r\n// constant encoding of the ping message\r\n// see: https://github.com/aspnet/SignalR/blob/dev/specs/HubProtocol.md#ping-message-encoding-1\r\n// Don't use Uint8Array.from as IE does not support it\r\nconst SERIALIZED_PING_MESSAGE = new Uint8Array([0x91, MessageType.Ping]);\r\n/** Implements the MessagePack Hub Protocol */\r\nexport class MessagePackHubProtocol {\r\n    /**\r\n     *\r\n     * @param messagePackOptions MessagePack options passed to @msgpack/msgpack\r\n     */\r\n    constructor(messagePackOptions) {\r\n        /** The name of the protocol. This is used by SignalR to resolve the protocol between the client and server. */\r\n        this.name = \"messagepack\";\r\n        /** The version of the protocol. */\r\n        this.version = 2;\r\n        /** The TransferFormat of the protocol. */\r\n        this.transferFormat = TransferFormat.Binary;\r\n        this._errorResult = 1;\r\n        this._voidResult = 2;\r\n        this._nonVoidResult = 3;\r\n        messagePackOptions = messagePackOptions || {};\r\n        this._encoder = new Encoder(messagePackOptions.extensionCodec, messagePackOptions.context, messagePackOptions.maxDepth, messagePackOptions.initialBufferSize, messagePackOptions.sortKeys, messagePackOptions.forceFloat32, messagePackOptions.ignoreUndefined, messagePackOptions.forceIntegerToFloat);\r\n        this._decoder = new Decoder(messagePackOptions.extensionCodec, messagePackOptions.context, messagePackOptions.maxStrLength, messagePackOptions.maxBinLength, messagePackOptions.maxArrayLength, messagePackOptions.maxMapLength, messagePackOptions.maxExtLength);\r\n    }\r\n    /** Creates an array of HubMessage objects from the specified serialized representation.\r\n     *\r\n     * @param {ArrayBuffer} input An ArrayBuffer containing the serialized representation.\r\n     * @param {ILogger} logger A logger that will be used to log messages that occur during parsing.\r\n     */\r\n    parseMessages(input, logger) {\r\n        // The interface does allow \"string\" to be passed in, but this implementation does not. So let's throw a useful error.\r\n        if (!(isArrayBuffer(input))) {\r\n            throw new Error(\"Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.\");\r\n        }\r\n        if (logger === null) {\r\n            logger = NullLogger.instance;\r\n        }\r\n        const messages = BinaryMessageFormat.parse(input);\r\n        const hubMessages = [];\r\n        for (const message of messages) {\r\n            const parsedMessage = this._parseMessage(message, logger);\r\n            // Can be null for an unknown message. Unknown message is logged in parseMessage\r\n            if (parsedMessage) {\r\n                hubMessages.push(parsedMessage);\r\n            }\r\n        }\r\n        return hubMessages;\r\n    }\r\n    /** Writes the specified HubMessage to an ArrayBuffer and returns it.\r\n     *\r\n     * @param {HubMessage} message The message to write.\r\n     * @returns {ArrayBuffer} An ArrayBuffer containing the serialized representation of the message.\r\n     */\r\n    writeMessage(message) {\r\n        switch (message.type) {\r\n            case MessageType.Invocation:\r\n                return this._writeInvocation(message);\r\n            case MessageType.StreamInvocation:\r\n                return this._writeStreamInvocation(message);\r\n            case MessageType.StreamItem:\r\n                return this._writeStreamItem(message);\r\n            case MessageType.Completion:\r\n                return this._writeCompletion(message);\r\n            case MessageType.Ping:\r\n                return BinaryMessageFormat.write(SERIALIZED_PING_MESSAGE);\r\n            case MessageType.CancelInvocation:\r\n                return this._writeCancelInvocation(message);\r\n            case MessageType.Close:\r\n                return this._writeClose();\r\n            case MessageType.Ack:\r\n                return this._writeAck(message);\r\n            case MessageType.Sequence:\r\n                return this._writeSequence(message);\r\n            default:\r\n                throw new Error(\"Invalid message type.\");\r\n        }\r\n    }\r\n    _parseMessage(input, logger) {\r\n        if (input.length === 0) {\r\n            throw new Error(\"Invalid payload.\");\r\n        }\r\n        const properties = this._decoder.decode(input);\r\n        if (properties.length === 0 || !(properties instanceof Array)) {\r\n            throw new Error(\"Invalid payload.\");\r\n        }\r\n        const messageType = properties[0];\r\n        switch (messageType) {\r\n            case MessageType.Invocation:\r\n                return this._createInvocationMessage(this._readHeaders(properties), properties);\r\n            case MessageType.StreamItem:\r\n                return this._createStreamItemMessage(this._readHeaders(properties), properties);\r\n            case MessageType.Completion:\r\n                return this._createCompletionMessage(this._readHeaders(properties), properties);\r\n            case MessageType.Ping:\r\n                return this._createPingMessage(properties);\r\n            case MessageType.Close:\r\n                return this._createCloseMessage(properties);\r\n            case MessageType.Ack:\r\n                return this._createAckMessage(properties);\r\n            case MessageType.Sequence:\r\n                return this._createSequenceMessage(properties);\r\n            default:\r\n                // Future protocol changes can add message types, old clients can ignore them\r\n                logger.log(LogLevel.Information, \"Unknown message type '\" + messageType + \"' ignored.\");\r\n                return null;\r\n        }\r\n    }\r\n    _createCloseMessage(properties) {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 2) {\r\n            throw new Error(\"Invalid payload for Close message.\");\r\n        }\r\n        return {\r\n            // Close messages have no headers.\r\n            allowReconnect: properties.length >= 3 ? properties[2] : undefined,\r\n            error: properties[1],\r\n            type: MessageType.Close,\r\n        };\r\n    }\r\n    _createPingMessage(properties) {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 1) {\r\n            throw new Error(\"Invalid payload for Ping message.\");\r\n        }\r\n        return {\r\n            // Ping messages have no headers.\r\n            type: MessageType.Ping,\r\n        };\r\n    }\r\n    _createInvocationMessage(headers, properties) {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 5) {\r\n            throw new Error(\"Invalid payload for Invocation message.\");\r\n        }\r\n        const invocationId = properties[2];\r\n        if (invocationId) {\r\n            return {\r\n                arguments: properties[4],\r\n                headers,\r\n                invocationId,\r\n                streamIds: [],\r\n                target: properties[3],\r\n                type: MessageType.Invocation,\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                arguments: properties[4],\r\n                headers,\r\n                streamIds: [],\r\n                target: properties[3],\r\n                type: MessageType.Invocation,\r\n            };\r\n        }\r\n    }\r\n    _createStreamItemMessage(headers, properties) {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 4) {\r\n            throw new Error(\"Invalid payload for StreamItem message.\");\r\n        }\r\n        return {\r\n            headers,\r\n            invocationId: properties[2],\r\n            item: properties[3],\r\n            type: MessageType.StreamItem,\r\n        };\r\n    }\r\n    _createCompletionMessage(headers, properties) {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 4) {\r\n            throw new Error(\"Invalid payload for Completion message.\");\r\n        }\r\n        const resultKind = properties[3];\r\n        if (resultKind !== this._voidResult && properties.length < 5) {\r\n            throw new Error(\"Invalid payload for Completion message.\");\r\n        }\r\n        let error;\r\n        let result;\r\n        switch (resultKind) {\r\n            case this._errorResult:\r\n                error = properties[4];\r\n                break;\r\n            case this._nonVoidResult:\r\n                result = properties[4];\r\n                break;\r\n        }\r\n        const completionMessage = {\r\n            error,\r\n            headers,\r\n            invocationId: properties[2],\r\n            result,\r\n            type: MessageType.Completion,\r\n        };\r\n        return completionMessage;\r\n    }\r\n    _createAckMessage(properties) {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 1) {\r\n            throw new Error(\"Invalid payload for Ack message.\");\r\n        }\r\n        return {\r\n            sequenceId: properties[1],\r\n            type: MessageType.Ack,\r\n        };\r\n    }\r\n    _createSequenceMessage(properties) {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 1) {\r\n            throw new Error(\"Invalid payload for Sequence message.\");\r\n        }\r\n        return {\r\n            sequenceId: properties[1],\r\n            type: MessageType.Sequence,\r\n        };\r\n    }\r\n    _writeInvocation(invocationMessage) {\r\n        let payload;\r\n        if (invocationMessage.streamIds) {\r\n            payload = this._encoder.encode([MessageType.Invocation, invocationMessage.headers || {}, invocationMessage.invocationId || null,\r\n                invocationMessage.target, invocationMessage.arguments, invocationMessage.streamIds]);\r\n        }\r\n        else {\r\n            payload = this._encoder.encode([MessageType.Invocation, invocationMessage.headers || {}, invocationMessage.invocationId || null,\r\n                invocationMessage.target, invocationMessage.arguments]);\r\n        }\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n    _writeStreamInvocation(streamInvocationMessage) {\r\n        let payload;\r\n        if (streamInvocationMessage.streamIds) {\r\n            payload = this._encoder.encode([MessageType.StreamInvocation, streamInvocationMessage.headers || {}, streamInvocationMessage.invocationId,\r\n                streamInvocationMessage.target, streamInvocationMessage.arguments, streamInvocationMessage.streamIds]);\r\n        }\r\n        else {\r\n            payload = this._encoder.encode([MessageType.StreamInvocation, streamInvocationMessage.headers || {}, streamInvocationMessage.invocationId,\r\n                streamInvocationMessage.target, streamInvocationMessage.arguments]);\r\n        }\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n    _writeStreamItem(streamItemMessage) {\r\n        const payload = this._encoder.encode([MessageType.StreamItem, streamItemMessage.headers || {}, streamItemMessage.invocationId,\r\n            streamItemMessage.item]);\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n    _writeCompletion(completionMessage) {\r\n        const resultKind = completionMessage.error ? this._errorResult :\r\n            (completionMessage.result !== undefined) ? this._nonVoidResult : this._voidResult;\r\n        let payload;\r\n        switch (resultKind) {\r\n            case this._errorResult:\r\n                payload = this._encoder.encode([MessageType.Completion, completionMessage.headers || {}, completionMessage.invocationId, resultKind, completionMessage.error]);\r\n                break;\r\n            case this._voidResult:\r\n                payload = this._encoder.encode([MessageType.Completion, completionMessage.headers || {}, completionMessage.invocationId, resultKind]);\r\n                break;\r\n            case this._nonVoidResult:\r\n                payload = this._encoder.encode([MessageType.Completion, completionMessage.headers || {}, completionMessage.invocationId, resultKind, completionMessage.result]);\r\n                break;\r\n        }\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n    _writeCancelInvocation(cancelInvocationMessage) {\r\n        const payload = this._encoder.encode([MessageType.CancelInvocation, cancelInvocationMessage.headers || {}, cancelInvocationMessage.invocationId]);\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n    _writeClose() {\r\n        const payload = this._encoder.encode([MessageType.Close, null]);\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n    _writeAck(ackMessage) {\r\n        const payload = this._encoder.encode([MessageType.Ack, ackMessage.sequenceId]);\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n    _writeSequence(sequenceMessage) {\r\n        const payload = this._encoder.encode([MessageType.Sequence, sequenceMessage.sequenceId]);\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n    _readHeaders(properties) {\r\n        const headers = properties[1];\r\n        if (typeof headers !== \"object\") {\r\n            throw new Error(\"Invalid headers.\");\r\n        }\r\n        return headers;\r\n    }\r\n}\r\n//# sourceMappingURL=MessagePackHubProtocol.js.map","// Licensed to the .NET Foundation under one or more agreements.\r\n// The .NET Foundation licenses this file to you under the MIT license.\r\n// Copied from signalr/Utils.ts\r\n/** @private */\r\nexport function isArrayBuffer(val) {\r\n    return val && typeof ArrayBuffer !== \"undefined\" &&\r\n        (val instanceof ArrayBuffer ||\r\n            // Sometimes we get an ArrayBuffer that doesn't satisfy instanceof\r\n            (val.constructor && val.constructor.name === \"ArrayBuffer\"));\r\n}\r\n//# sourceMappingURL=Utils.js.map",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["DotNet","EditType","FrameType","jsonRevivers","jsObjectIdKey","dotNetObjectRefKey","byteArrayRefKey","dotNetStreamRefKey","jsStreamReferenceLengthKey","defaultCallDispatcher","currentCallDispatcher","JSObject","constructor","_jsObject","this","_cachedFunctions","Map","findFunction","identifier","cachedFunction","get","lastSegmentValue","result","split","forEach","segment","Error","Function","bind","set","getWrappedObject","cachedJSObjectsById","window","url","startsWith","URL","substr","document","baseURI","toString","import","JSCallResultType","nextJsObjectId","attachReviver","reviver","push","createJSObjectReference","jsObject","createJSStreamReference","streamReference","length","ArrayBuffer","Uint8Array","Blob","size","buffer","undefined","byteLength","jsObjectReference","error","parseJsonWithRevivers","callDispatcher","json","JSON","parse","key","initialValue","reduce","latestValue","getDefaultCallDispatcher","attachDispatcher","dotNetCallDispatcher","CallDispatcher","invokeMethod","assemblyName","methodIdentifier","args","invokeDotNetStaticMethod","invokeMethodAsync","invokeDotNetStaticMethodAsync","disposeJSObjectReference","id","disposeJSObjectReferenceById","_dotNetCallDispatcher","_byteArraysToBeRevived","_pendingDotNetToJSStreams","_pendingAsyncCalls","_nextAsyncCallId","getDotNetCallDispatcher","invokeJSFromDotNet","argsJson","resultType","targetInstanceId","createJSCallResult","findJSFunction","jsFunction","stringifyArgs","beginInvokeJSFromDotNet","asyncHandle","promise","Promise","resolve","then","endInvokeJSFromDotNet","stringify","formatError","endInvokeDotNetFromJS","asyncCallId","success","resultJsonOrExceptionMessage","resultOrError","completePendingCall","parseInt","invokeDotNetMethod","invokeDotNetMethodAsync","dotNetObjectId","invokeDotNetFromJS","resultJson","resultPromise","reject","beginInvokeDotNetFromJS","ex","receiveByteArray","data","processByteArray","delete","supplyDotNetStream","streamId","stream","has","pendingStream","PendingStream","getDotNetStreamPromise","streamPromise","hasOwnProperty","asyncCall","message","stack","targetInstance","DotNetObject","_id","_callDispatcher","dispose","catch","console","serializeAsArg","value","index","byteArray","DotNetStream","_streamPromise","arrayBuffer","Response","returnValue","Default","JSObjectReference","JSStreamReference","JSVoidResult","nextByteArrayIndex","argReplacer","sendByteArray","jsonValue","EventFieldInfo","componentId","fieldValue","fromEvent","event","elem","target","Element","fieldData","HTMLInputElement","type","toLowerCase","checked","HTMLSelectElement","HTMLTextAreaElement","getFormFieldData","eventTypeRegistry","browserEventNamesToAliases","eventNameAliasRegisteredCallbacks","getEventTypeOptions","eventName","getBrowserEventName","possibleAliasEventName","eventOptions","browserEventName","registerBuiltInEventType","eventNames","options","parseTouch","touchList","touches","i","touch","clientX","clientY","screenX","screenY","pageX","pageY","parseMouseEvent","detail","offsetX","offsetY","movementX","movementY","button","buttons","ctrlKey","shiftKey","altKey","metaKey","createEventArgs","element","timeBasedInputs","indexOf","getAttribute","isTimeBasedInput","normalizedValue","normalizeTimeBasedValue","isMultipleSelectInput","selectElement","Array","from","filter","option","selected","map","targetIsCheckbox","tagName","isCheckbox","e","parseDragEvent","dataTransfer","dropEffect","effectAllowed","files","f","name","items","kind","types","parseKeyboardEvent","code","location","repeat","parseErrorEvent","filename","lineno","colno","parseProgressEvent","lengthComputable","loaded","total","parseTouchEvent","targetTouches","changedTouches","parsePointerEvent","pointerId","width","height","pressure","tiltX","tiltY","pointerType","isPrimary","parseWheelEvent","deltaX","deltaY","deltaZ","deltaMode","pendingRootComponentContainers","manager","jsComponentParametersByIdentifier","nextPendingDynamicRootComponentIdentifier","RootComponentsFunctions","add","toElement","componentIdentifier","initialParameters","containerIdentifier","getRequiredManager","component","DynamicRootComponent","setParameters","EventCallbackWrapper","invoke","arg","_callback","setCallback","callback","_selfJSObjectReference","getJSObjectReference","parameters","_jsEventCallbackWrappers","_componentId","parameter","mappedParameters","entries","Object","parameterCount","callbackWrapper","jsEventCallbackWrapper","values","interopMethodsByRenderer","rendererAttachedListeners","rendererByIdResolverMap","attachWebRendererInterop","rendererId","interopMethods","jsComponentParameters","jsComponentInitializers","keys","managerInstance","initializerIdentifier","componentIdentifiers","initializerFunc","enableJSRootComponents","getInteropMethods","_b","_a","call","browserRendererId","listener","invokeRendererAttachedListeners","dispatchEvent","eventDescriptor","eventArgs","dispatchEventMiddleware","eventHandlerId","continuation","nonBubblingEvents","toLookup","alwaysPreventDefaultEvents","submit","disableableEventNames","EventDelegator","afterClickCallbacks","eventDelegatorId","nextEventDelegatorId","eventsCollectionKey","eventInfoStore","EventInfoStore","onGlobalEvent","setListener","renderingComponentId","infoForElement","getEventHandlerInfosForElement","existingHandler","getHandler","update","newInfo","setHandler","removeListener","info","remove","elementEventInfos","removeHandler","notifyAfterClick","addGlobalListener","setStopPropagation","stopPropagation","setPreventDefault","preventDefault","evt","dispatchGlobalEventToAllElements","eventNameAliases","alias","browserEvent","path","composedPath","candidateEventTarget","shift","eventArgsIsPopulated","eventIsNonBubbling","prototype","stopPropagationWasRequested","candidateElement","handlerInfos","handlerInfo","rawBrowserEventName","HTMLButtonElement","disabled","eventOptionsIfRegistered","eventFieldInfo","createIfNeeded","EventHandlerInfosForElement","globalListener","infosByEventHandlerId","countByEventName","handleEventNameAliasAdded","useCapture","addEventListener","oldEventHandlerId","newEventHandlerId","removeEventListener","aliasEventName","countByAliasEventName","handlers","preventDefaultFlags","stopPropagationFlags","handler","setValue","logicalChildrenPropname","Symbol","logicalParentPropname","logicalRootDescriptorPropname","toLogicalElement","allowExistingContents","childrenArray","childNodes","child","childLogicalElement","emptyLogicalElement","getLogicalChildrenArray","removeLogicalChild","createAndInsertLogicalContainer","parent","childIndex","containerElement","createComment","insertLogicalChild","childAsLogicalElement","nodeToInsert","Comment","existingGranchildren","lastNodeToInsert","findLastDomNodeInRange","range","Range","setStartBefore","setEndAfter","extractContents","existingLogicalParent","getLogicalParent","existingSiblingArray","existingChildIndex","splice","newSiblings","nextSibling","parentNode","insertBefore","appendDomNode","childToRemove","grandchildrenArray","domNodeToRemove","removeChild","getLogicalChild","isSvgElement","closestElement","getClosestDomElement","namespaceURI","getLogicalNextSibling","siblings","permuteLogicalChildren","permutationList","listEntry","moveRangeStart","fromSiblingIndex","moveRangeEnd","marker","moveToBeforeMarker","insertBeforeNode","toSiblingIndex","parentDomNode","elementToMove","moveEndNode","nextToMove","nextNext","logicalElement","DocumentFragment","appendChild","parentLogicalNextSibling","previousSibling","logicalParent","lastChild","getCaptureIdAttributeName","referenceCaptureId","elementRefKey","selector","querySelector","getElementByCaptureId","deferredValuePropname","isMultipleSelectElement","setSingleSelectElementValue","setDeferredElementValue","setMultipleSelectElementValue","trySetSelectValueFromOptionElement","optionElement","selectElem","parentElement","findClosestAncestorSelectElement","isBlazorSelectElement","_blazorDeferredValue","sharedTemplateElemForParsing","createElement","sharedSvgElemForParsing","createElementNS","elementsToClearOnRootComponentRender","Set","interactiveRootComponentPropname","preserveContentOnDisposalPropname","BrowserRenderer","rootComponentIds","childComponentLocations","eventDelegator","hasInteractiveRouter","callbackIfIntercepted","eventHasSpecialKey","defaultPrevented","anchorTarget","candidate","HTMLAnchorElement","SVGAElement","findAnchorTarget","targetAttributeValue","hasAttribute","canProcessAnchor","absoluteHref","toAbsoluteUri","isWithinBaseUriSpace","performInternalNavigation","handleClickForNavigationInterception","getRootComponentCount","attachRootComponentToLogicalElement","appendContent","isInteractiveRootComponentElement","markAsInteractiveRootComponentElement","attachComponentToElement","updateComponent","batch","edits","referenceFrames","textContent","ownerDocument","getRootNode","activeElementBefore","activeElement","applyEdits","HTMLElement","focus","disposeComponent","disposeEventHandler","currentDepth","childIndexAtCurrentDepth","arrayBuilderSegmentReader","editReader","frameReader","editsValues","editsOffset","offset","maxEditIndexExcl","count","editIndex","edit","diffReader","editsEntry","editType","prependFrame","frameIndex","newTreeIndex","frame","referenceFramesEntry","siblingIndex","insertFrame","removeFrame","setAttribute","applyAttribute","removeAttribute","attributeName","removedAttributeName","setOrRemoveAttributeOrProperty","updateText","textNode","Text","updateMarkup","insertMarkup","stepIn","stepOut","permutationListEntry","moveToSiblingIndex","permutationListEnd","frames","frameType","insertElement","text","insertText","attribute","insertComponent","region","insertFrameRange","subtreeLength","elementReferenceCapture","elementReferenceCaptureId","markup","namedEvent","elementName","newDomElementRaw","newElement","inserted","descendantsEndIndexExcl","descendantIndex","descendantFrame","HTMLOptionElement","childComponentId","textFrame","createTextNode","markupFrame","markupContainer","parsedMarkup","markupContent","innerHTML","content","querySelectorAll","oldScriptElem","newScriptElem","getAttributeNames","attribName","replaceChild","logicalSiblingIndex","firstChild","toDomElement","attributeFrame","attributeEventHandlerId","stripOnPrefix","attributeValue","startIndex","endIndexExcl","origChildIndex","countDescendantFrames","valueOrNullToRemove","endsWith","substring","normalizeInputValue","tryApplyValueProperty","tryApplyCheckedProperty","tryApplySpecialProperty","applyInternalAttribute","internalAttributeNamePrefix","internalAttributeName","eventStopPropagationAttributeNamePrefix","eventPreventDefaultAttributeNamePrefix","isInteractive","browserRenderers","interactiveRouterRendererId","programmaticEnhancedNavigationHandler","enhancedNavigationListener","testAnchor","shouldResetScrollAfterNextBatch","href","baseUriWithoutTrailingSlash","baseUri","lastIndexOf","nextChar","charAt","hasProgrammaticEnhancedNavigationHandler","performProgrammaticEnhancedNavigation","absoluteInternalHref","replace","relativeUri","getInteractiveRouterRendererId","hasRegisteredNavigationEventListeners","currentHistoryIndex","currentLocationChangingCallId","navigationCallbacks","popStateCallback","async","state","ignorePendingNavigation","callbacks","getInteractiveRouterNavigationCallbacks","hasLocationChangingEventListeners","_index","userState","_c","delta","uri","navigateHistoryWithoutPopStateCallback","notifyLocationChanging","notifyLocationChanged","resolveCurrentNavigation","internalFunctions","listenForNavigationEvents","locationChangedCallback","locationChangingCallback","locationChanged","locationChanging","onPopState","history","internalDestinationHref","interceptedLink","enableNavigationInterception","setHasLocationChangingListeners","hasListeners","endLocationChanging","callId","shouldContinueNavigation","navigateTo","navigateToCore","refresh","forceReload","reload","getBaseURI","getLocationHref","scrollToElement","getElementById","scrollIntoView","skipLocationChangingCallback","absoluteUri","forceLoad","shouldUseClientSideRouting","replaceHistoryEntry","historyEntryState","temporaryUri","replaceState","performExternalNavigation","hashIndex","hash","isSamePageWithHash","saveToBrowserHistory","performScrollToElementOnTheSamePage","pushState","oldPopStateCallback","go","intercepted","all","domFunctions","preventScroll","SVGElement","focusBySelector","tabIndex","Virtualize","dotNetHelper","spacerBefore","spacerAfter","rootMargin","scrollContainer","findClosestScrollContainer","documentElement","style","overflowAnchor","rangeBetweenSpacers","createRange","isValidTableElement","display","intersectionObserver","IntersectionObserver","entry","isIntersecting","setStartAfter","setEndBefore","spacerSeparation","getBoundingClientRect","containerSize","rootBounds","intersectionRect","top","boundingClientRect","offsetHeight","bottom","root","observe","mutationObserverBefore","createSpacerMutationObserver","mutationObserverAfter","observersByDotNetObjectId","getObserversMapEntry","spacer","observerOptions","attributes","mutationObserver","MutationObserver","mutations","observer","disconnect","unobserve","HTMLTableElement","HTMLTableSectionElement","observers","dispatcherObserversByDotNetIdPropname","body","getComputedStyle","overflowY","dotNetHelperDispatcher","dotNetHelperId","PageTitle","getAndRemoveExistingTitle","titleElements","head","getElementsByTagName","existingTitle","currentTitleElement","InputFile","init","_blazorInputFileNextFileId","_blazorFilesById","fileList","file","lastModified","Date","toISOString","contentType","readPromise","blob","toImageFile","fileId","format","maxWidth","maxHeight","originalFile","getFileById","loadedImage","originalFileImage","Image","onload","revokeObjectURL","src","onerror","createObjectURL","resizedImageBlob","desiredWidthRatio","Math","min","desiredHeightRatio","chosenSizeRatio","canvas","round","getContext","drawImage","toBlob","readFileData","registeredLocks","onBeforeUnload","getNextChunk","position","nextChunkSize","chunkBlob","slice","getChunkFromBlob","byteOffset","getChunkFromArrayBufferView","Blazor","forceLoadOrOptions","replaceIfUsingOldOverload","registerCustomEventType","aliasGroup","rootComponents","runtime","_internal","navigationManager","navigationManagerInternalFunctions","domWrapper","NavigationLock","enableNavigationPrompt","disableNavigationPrompt","getJSDataStreamChunk","LogLevel","resolveOptions","userOptions","defaultOptions","reconnectionOptions","configureSignalR","_","logLevel","Warning","initializers","circuitHandlers","maxRetries","retryIntervalMilliseconds","dialogId","minimumLogLevel","minLevel","log","msg","Critical","warn","Information","blazorServerStateCommentRegularExpression","discoverServerPersistedState","node","discoverBlazorComment","comment","captureName","nodeType","Node","COMMENT_NODE","parsedState","exec","groups","hasChildNodes","nodes","resolveComponentComments","childNodeIterator","ComponentCommentIterator","next","currentElement","componentComment","getComponentComment","childResults","j","childResult","blazorCommentRegularExpression","RegExp","commentNodeIterator","candidateStart","payload","start","end","definition","Document","assertNotDirectlyOnDocument","parseCommentPayload","candidateEnd","iterator","prerenderId","validateEndComponentPayload","getComponentEndComment","validateWebAssemblyComponentPayload","uniqueId","nextUniqueDescriptorId","validateServerComponentPayload","createServerComponentComment","createAutoComponentComment","descriptor","sequence","Number","isInteger","assembly","typeName","parameterDefinitions","atob","parameterValues","prerenderEndId","currentIndex","HttpError","errorMessage","statusCode","trueProto","super","__proto__","TimeoutError","AbortError","UnsupportedTransportError","transport","errorType","DisabledTransportError","FailedToStartTransportError","FailedToNegotiateWithServerError","AggregateErrors","innerErrors","HttpResponse","statusText","HttpClient","send","method","post","getCookieString","NullLogger","_logLevel","_message","instance","VERSION","Arg","isRequired","val","isNotEmpty","match","isIn","Platform","isBrowser","isWebWorker","self","isReactNative","isNode","process","release","getDataDetail","includeContent","isArrayBuffer","view","str","num","formatArrayBuffer","sendMessage","logger","transportName","httpClient","headers","getUserAgentHeader","Trace","logMessageContent","responseType","response","timeout","withCredentials","SubjectSubscription","subject","_subject","_observer","cancelCallback","ConsoleLogger","_minLevel","out","constructUserAgent","version","os","runtimeVersion","userAgent","majorAndMinor","getErrorString","FetchHttpClient","_logger","fetchObj","_fetchType","_jar","obj","fetch","require","CookieJar","globalThis","global","getGlobalThis","_abortControllerType","AbortController","abortObj","configureAbortController","request","abortSignal","aborted","abortController","onabort","abort","timeoutId","msTimeout","setTimeout","cache","credentials","mode","redirect","signal","clearTimeout","ok","deserializeContent","status","XhrHttpClient","xhr","XMLHttpRequest","open","setRequestHeader","header","responseText","ontimeout","DefaultHttpClient","_httpClient","TextMessageFormat","write","output","RecordSeparator","input","messages","pop","RecordSeparatorCode","String","fromCharCode","HandshakeProtocol","writeHandshakeRequest","handshakeRequest","parseHandshakeResponse","messageData","remainingData","binaryData","separatorIndex","responseLength","apply","textData","MessageType","HubConnectionState","Subject","item","err","complete","subscribe","MessageBuffer","protocol","connection","bufferSize","_bufferSize","_messages","_totalMessageCount","_waitForSequenceMessage","_nextReceivingSequenceId","_latestReceivedSequenceId","_bufferedByteCount","_reconnectInProgress","_protocol","_connection","_send","serializedMessage","writeMessage","backpressurePromise","_isInvocationMessage","backpressurePromiseResolver","backpressurePromiseRejector","BufferedItem","_disconnected","_ack","ackMessage","newestAckedMessage","sequenceId","_resolver","_shouldProcessMessage","Sequence","currentId","_ackTimer","_resetSequence","stop","_resend","_dispose","_rejector","Invocation","StreamItem","Completion","StreamInvocation","CancelInvocation","Close","Ping","Ack","_ackTimerHandle","resolver","rejector","HubConnection","create","reconnectPolicy","serverTimeoutInMilliseconds","keepAliveIntervalInMilliseconds","statefulReconnectBufferSize","_nextKeepAlive","_freezeEventListener","_statefulReconnectBufferSize","_reconnectPolicy","_handshakeProtocol","onreceive","_processIncomingData","onclose","_connectionClosed","_callbacks","_methods","_closedCallbacks","_reconnectingCallbacks","_reconnectedCallbacks","_invocationId","_receivedHandshakeResponse","_connectionState","Disconnected","_connectionStarted","_cachedPingMessage","connectionId","baseUrl","Reconnecting","_startPromise","_startWithStateTransitions","Connecting","Debug","_startInternal","Connected","_stopDuringStartError","handshakePromise","_handshakeResolver","_handshakeRejecter","transferFormat","features","reconnect","_sendMessage","_cleanupTimeout","_resetTimeoutPeriod","_resetKeepAliveInterval","_messageBuffer","disconnected","resend","inherentKeepAlive","_cleanupPingTimer","startPromise","_stopPromise","_stopInternal","Disconnecting","_reconnectDelayHandle","_completeClose","_sendCloseMessage","_sendWithProtocol","_createCloseMessage","methodName","streams","streamIds","_replaceStreamingParams","invocationDescriptor","_createStreamInvocation","promiseQueue","cancelInvocation","_createCancelInvocation","invocationId","invocationEvent","_launchStreams","sendPromise","_createInvocation","on","newMethod","off","removeIdx","onreconnecting","onreconnected","_processHandshakeResponse","parseMessages","_invokeClientMethod","allowReconnect","responseMessage","getTime","_timeoutHandle","serverTimeout","_pingServerHandle","nextPing","invocationMessage","methods","_createCompletionMessage","methodsCopy","expectsResponse","res","exception","completionMessage","m","prevRes","arguments","_cancelCallbacksWithError","_reconnect","c","reconnectStartTime","now","previousReconnectAttempts","retryError","nextRetryDelay","_getNextRetryDelay","previousRetryCount","elapsedMilliseconds","retryReason","nextRetryDelayInMilliseconds","nonblocking","_createStreamItemMessage","argument","_isObservable","DEFAULT_RETRY_DELAYS_IN_MILLISECONDS","DefaultReconnectPolicy","retryDelays","_retryDelays","retryContext","HeaderNames","Authorization","Cookie","AccessTokenHttpClient","innerClient","accessTokenFactory","_innerClient","_accessTokenFactory","allowRetry","_accessToken","_setAuthorizationHeader","HttpTransportType","TransferFormat","AbortController$1","_isAborted","LongPollingTransport","pollAborted","_pollAbort","_options","_running","connect","_url","Binary","pollOptions","pollUrl","_closeError","_receiving","_poll","_raiseOnClose","deleteOptions","logMessage","ServerSentEventsTransport","accessToken","encodeURIComponent","eventSource","opened","EventSource","cookies","onmessage","_close","onopen","_eventSource","close","WebSocketTransport","webSocketConstructor","_logMessageContent","_webSocketConstructor","_headers","token","webSocket","binaryType","_event","_webSocket","ErrorEvent","readyState","OPEN","_isCloseEvent","wasClean","reason","HttpConnection","_stopPromiseResolver","_negotiateVersion","createLogger","_resolveUrl","WebSocket","_startInternalPromise","_sendQueue","TransportSendQueue","_stopError","_stopConnection","skipNegotiation","WebSockets","_constructTransport","_startTransport","negotiateResponse","redirects","_getNegotiationResponse","ProtocolVersion","_createTransport","negotiateUrl","_resolveNegotiateUrl","negotiateVersion","connectionToken","useStatefulReconnect","_useStatefulReconnect","_createConnectUrl","requestedTransport","requestedTransferFormat","connectUrl","_isITransport","transportExceptions","transports","availableTransports","negotiate","endpoint","transportOrError","_resolveTransportOrError","join","ServerSentEvents","LongPolling","callStop","actualTransport","transportMatches","transferFormats","s","aTag","pathname","searchParams","URLSearchParams","append","search","_transport","_buffer","_executing","_sendBufferedData","PromiseSource","_transportResult","_sendLoopPromise","_sendLoop","_bufferData","transportResult","_concatBuffers","arrayBuffers","totalLength","b","a","_rejecter","JsonHubProtocol","hubMessages","parsedMessage","_isStreamItemMessage","_isCompletionMessage","_isAckMessage","_isSequenceMessage","_assertNotEmptyString","LogLevelNameMapping","trace","debug","information","warning","critical","none","None","HubConnectionBuilder","configureLogging","logging","isLogger","mapping","parseLogLevel","withUrl","transportTypeOrOptions","httpConnectionOptions","withHubProtocol","withAutomaticReconnect","retryDelaysOrReconnectPolicy","isArray","withServerTimeout","milliseconds","_serverTimeoutInMilliseconds","withKeepAliveInterval","_keepAliveIntervalInMilliseconds","withStatefulReconnect","build","WebRendererId","UINT32_MAX","setInt64","high","floor","low","setUint32","getInt64","getInt32","getUint32","TEXT_ENCODING_AVAILABLE","env","TextEncoder","TextDecoder","utf8Count","strLength","pos","charCodeAt","extra","sharedTextEncoder","TEXT_ENCODER_THRESHOLD","utf8EncodeTE","encodeInto","outputOffset","subarray","encode","utf8DecodeJs","bytes","inputOffset","units","byte1","byte2","byte3","unit","extendStatics","sharedTextDecoder","TEXT_DECODER_THRESHOLD","ExtData","__extends","d","setPrototypeOf","p","TypeError","__","DecodeError","_super","_this","proto","defineProperty","configurable","enumerable","timestampExtension","object","msec","sec","nsec","nsecInSec","rv","DataView","secHigh","secLow","encodeTimeSpecToTimestamp","decode","timeSpec","nsec30AndSecHigh2","concat","decodeTimestampToTimeSpec","ExtensionCodec","builtInEncoders","builtInDecoders","encoders","decoders","register","tryToEncode","context","encodeExt","decodeExt","defaultCodec","ensureUint8Array","isView","Encoder","extensionCodec","maxDepth","initialBufferSize","sortKeys","forceFloat32","ignoreUndefined","forceIntegerToFloat","reinitializeState","encodeSharedRef","doEncode","depth","encodeNil","encodeBoolean","encodeNumber","encodeString","encodeObject","ensureBufferSizeToWrite","sizeToWrite","requiredSize","resizeBuffer","newSize","newBuffer","newBytes","newView","writeU8","isSafeInteger","writeU16","writeU32","writeU64","writeI8","writeI16","writeI32","writeI64","writeF32","writeF64","writeStringHeader","utf8EncodeJs","ext","encodeExtension","encodeArray","encodeBinary","encodeMap","writeU8a","_i","object_1","countWithoutUndefined","keys_1","sort","keys_2","setUint8","setInt8","setUint16","setInt16","setInt32","setFloat32","setFloat64","setUint64","prettyByte","byte","abs","padStart","CachedKeyDecoder","maxKeyLength","maxLengthPerKey","hit","miss","caches","canBeCached","find","FIND_CHUNK","records_1","record","recordBytes","store","records","random","cachedValue","slicedCopyOfBytes","__generator","thisArg","y","t","g","label","sent","trys","ops","verb","throw","return","n","v","op","done","step","__asyncValues","o","asyncIterator","__values","settle","__await","EMPTY_VIEW","EMPTY_BYTES","DataViewIndexOutOfBoundsError","getInt8","MORE_DATA","sharedCachedKeyDecoder","Decoder","maxStrLength","maxBinLength","maxArrayLength","maxMapLength","maxExtLength","keyDecoder","totalPos","headByte","setBuffer","bufferView","createDataView","appendBuffer","hasRemaining","newData","createExtraByteError","posToShow","RangeError","doDecodeSync","decodeMulti","decodeAsync","stream_1","stream_1_1","e_1","P","generator","decoded","e_1_1","fulfilled","rejected","decodeArrayStream","decodeMultiAsync","decodeStream","_arguments","isArrayHeaderRequired","arrayItemsLeft","stream_2","stream_2_1","e_2","e_3_1","e_3","readArraySize","q","resume","r","fulfill","__asyncGenerator","DECODE","readHeadByte","pushMapState","pushArrayState","decodeUtf8String","readF32","readF64","readU8","readU16","readU32","readU64","readI8","readI16","readI32","readI64","lookU8","lookU16","lookU32","decodeBinary","decodeExtension","array","keyType","readCount","headerOffset","stateIsMapKey","stringBytes","utf8DecodeTD","headOffset","extType","getUint8","getUint16","getInt16","getFloat32","getFloat64","BinaryMessageFormat","lenBuffer","sizePart","uint8Array","numBitsToShift","byteRead","numBytes","SERIALIZED_PING_MESSAGE","MessagePackHubProtocol","messagePackOptions","_errorResult","_voidResult","_nonVoidResult","_encoder","_decoder","_parseMessage","_writeInvocation","_writeStreamInvocation","_writeStreamItem","_writeCompletion","_writeCancelInvocation","_writeClose","_writeAck","_writeSequence","properties","messageType","_createInvocationMessage","_readHeaders","_createPingMessage","_createAckMessage","_createSequenceMessage","resultKind","streamInvocationMessage","streamItemMessage","cancelInvocationMessage","sequenceMessage","nativeDecoder","decodeUtf8","len","substrings","codepoint","uint64HighPartShift","pow","maxSafeNumberHighPart","readInt32LE","readUint32LE","readUint64LE","highPart","OutOfProcessRenderBatch","batchData","stringReader","OutOfProcessStringReader","arrayRangeReader","OutOfProcessArrayRangeReader","OutOfProcessArrayBuilderSegmentReader","OutOfProcessRenderTreeDiffReader","OutOfProcessRenderTreeEditReader","OutOfProcessRenderTreeFrameReader","updatedComponents","disposedComponentIds","disposedEventHandlerIds","updatedComponentsEntry","tableEntryPos","disposedComponentIdsEntry","entryPos","disposedEventHandlerIdsEntry","batchDataUint8","diff","stringIndex","readString","stringTableStartIndex","stringTableEntryPos","numUtf8Bytes","readLEB128","charsStart","utf8Data","arrayRange","_arrayBuilderSegment","arrayBuilderSegment","RenderQueue","nextBatchId","processBatch","receivedBatchId","completeBatch","fatalError","browserRenderer","updatedComponentsRange","updatedComponentsValues","updatedComponentsLength","referenceFramesValues","disposedComponentIdsRange","disposedComponentIdsValues","disposedComponentIdsLength","disposedEventHandlerIdsRange","disposedEventHandlerIdsValues","disposedEventHandlerIdsLength","scrollTo","renderBatch","Server","getLastBatchid","batchId","initializersPromise","appState","circuit","serverStartPromise","hasFailed","showErrorNotification","errorUi","onclick","dismiss","CircuitManager","componentManager","_firstUpdate","_renderingFailed","_disposed","_circuitId","_applicationState","_componentManager","_renderQueue","_dispatcher","isDisposedOrDisposing","startCore","updateRootComponents","operations","startConnection","componentsJson","initialComponents","descriptorToMarker","navigationManagerFunctions","onCircuitOpened","hubProtocol","connectionBuilder","resolveElement","readableStream","ReadableStream","controller","chunk","enqueue","onAfterRenderBatch","onAfterUpdateRootComponents","_interopMethodsForReconnection","detachWebRendererInterop","reconnectionHandler","onConnectionDown","unhandledError","some","onConnectionUp","throwIfDispatchingWhenDisposed","succeeded","sendLocationChanged","sendLocationChanging","sendJsDataStream","chunkSize","numChunksUntilNextAck","lastAckTime","valueOf","chunkId","nextChunkData","timeNow","msSinceAck","max","sendJSDataStream","sequenceOrIdentifier","jsAddedComponentContainer","container","getAndRemovePendingRootComponentContainer","parsedSequence","isNaN","existingDescriptor","parentLogicalElement","children","startLogicalElement","rootCommentChildren","startNextChildIndex","lastMovedChild","childToMove","toLogicalRootCommentElement","resolveRootComponent","getRootComponentManager","getDisconnectFormData","FormData","circuitId","didRenderingFail","_disposePromise","sendDisconnectBeacon","navigator","sendBeacon","disposeCore","formData","onCircuitClosed","DefaultReconnectDisplay","modal","cssText","link","reloadParagraph","loader","getLoader","after","show","failed","contains","visibility","currentAttempt","hide","errorDescription","errorInstructions","replaceChildren","animate","transform","duration","iterations","Infinity","UserSpecifiedDisplay","dialog","maxRetriesElement","MaxRetriesId","innerText","removeClasses","classList","ShowClassName","currentAttemptElement","CurrentAttemptId","HideClassName","FailedClassName","RejectedClassName","DefaultReconnectionHandler","overrideDisplay","reconnectCallback","_currentReconnectionProcess","_reconnectionDisplay","_reconnectCallback","_error","ReconnectionProcess","isDisposed","reconnectDisplay","attemptPeriodicReconnection","delayDuration","MaximumFirstRetryInterval","delay","durationMilliseconds","JSInitializer","singleRuntime","afterstartedCallbacks","webRendererId","afterStartedCallbacks","importInitializersAsync","initializerFiles","initializerArguments","jsInitializer","adjustedPath","base","adjustPath","initializer","beforeStart","afterStarted","beforeWebAssemblyStart","afterWebAssemblyStarted","beforeServerStart","afterServerStarted","finalBeforeStart","WebAssembly","finalAfterStarted","runClassicInitializers","initializerModule","beforeWebStart","afterWebStarted","hasOnlyClassicInitializers","runLegacyInitializers","enableClassicInitializers","ensureInitializers","webAssembly","runMultiRuntimeInitializers","importAndInvokeInitializer","invokeAfterStartedCallbacks","blazor","attached","getRendererAttachedPromise","startServer","components","startServerCore","jsInitializersResponse","fetchAndInvokeInitializers","defaultReconnectionHandler","forceCloseConnection","cleanup","capture","once","InitialRootComponentsList","ssrComponentId","JSEventRegistry","_eventListeners","listenersForEventType","ev","started","boot","configuredOptions","initializersReady","setOptions","setCircuitOptions","serverComponents","discoverServerComponents","currentScript"],"mappings":"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","x_google_ignoreList":[52,53,54,55,56,57,58,59,60,61,62]}