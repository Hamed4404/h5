<Project>

  <PropertyGroup>
    <!-- Used to silence the warning caused by the workaround for https://github.com/dotnet/runtime/issues/81382 -->
    <SuppressGenerateILCompilerExplicitPackageReferenceWarning>true</SuppressGenerateILCompilerExplicitPackageReferenceWarning>
  </PropertyGroup>

  <!-- needed to reference a specific version of NetCoreApp. Workaround https://github.com/dotnet/runtime/issues/81382 -->
  <ItemGroup>
    <FrameworkReference Update="Microsoft.NETCore.App"
                        RuntimeFrameworkVersion="$(MicrosoftNETCoreAppRuntimeVersion)" />

    <PackageReference Include="Microsoft.DotNet.ILCompiler"
                      Version="$(MicrosoftNETCoreAppRuntimeVersion)" />

    <!-- Workaround when there is no vNext SDK available; copy known packs info from 8.0. -->
    <KnownILLinkPack Include="@(KnownILLinkPack->WithMetadataValue('TargetFramework', 'net8.0'))"
                     TargetFramework="$(TargetFramework)"
                     Condition="'@(KnownILLinkPack->Count())' != '0' AND
                                 !(@(KnownILLinkPack->AnyHaveMetadataValue('TargetFramework', '$(TargetFramework)')))" />
    <KnownILCompilerPack Include="@(KnownILCompilerPack->WithMetadataValue('TargetFramework', 'net8.0'))"
                     TargetFramework="$(TargetFramework)"
                     Condition="'@(KnownILCompilerPack->Count())' != '0' AND
                                 !(@(KnownILCompilerPack->AnyHaveMetadataValue('TargetFramework', '$(TargetFramework)')))" />

  </ItemGroup>

  <!--
  Reference the Microsoft.AspNetCore.App shared framework assemblies with ProjectReference.
  This allows for easy dev workflow. Just need to update the product code, and re-run the tests.
  -->
  <ItemGroup>
    <ProjectReference Include="$(RepoRoot)src\DefaultBuilder\src\Microsoft.AspNetCore.csproj" />
    <ProjectReference Include="$(RepoRoot)src\DataProtection\Extensions\src\Microsoft.AspNetCore.DataProtection.Extensions.csproj" />
  </ItemGroup>

</Project>
