<Project>
  <ItemDefinitionGroup>
    <HelixAvailableTargetQueue>
      <EnableByDefault>true</EnableByDefault>
      <Arch>x64</Arch>
    </HelixAvailableTargetQueue>
  </ItemDefinitionGroup>

  <!-- this file is shared between Helix.proj and .csproj files -->
  <ItemGroup Condition="'$(IsWindowsOnlyTest)' != 'true'">
    <HelixAvailablePlatform Include="Windows" />
    <HelixAvailablePlatform Include="OSX" />
    <HelixAvailablePlatform Include="Linux" />

    <HelixAvailableArch Include="x64" />
    <HelixAvailableArch Include="arm64" />
    
    <!-- x64 queues -->
    <HelixAvailableTargetQueue Include="Windows.10.Amd64.ClientRS4.VS2017.Open" Platform="Windows" Condition="'$(TargetArchitecture)' == 'x64'"/>
    <HelixAvailableTargetQueue Include="Windows.81.Amd64.Open" Platform="Windows" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="Windows.7.Amd64.Open" Platform="Windows" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="Windows.10.Amd64.EnterpriseRS3.ASPNET.Open" Platform="Windows" EnableByDefault="false" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="OSX.1013.Amd64.Open" Platform="OSX" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="Ubuntu.1604.Amd64.Open" Platform="Linux" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="Ubuntu.1804.Amd64.Open" Platform="Linux" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="Centos.7.Amd64.Open" Platform="Linux" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="Debian.8.Amd64.Open" Platform="Linux" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="Debian.9.Amd64.Open" Platform="Linux" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="Redhat.7.Amd64.Open" Platform="Linux" Condition="'$(TargetArchitecture)' == 'x64'" />
    <HelixAvailableTargetQueue Include="(Fedora.28.Amd64.Open)Ubuntu.1604.Amd64.Open@mcr.microsoft.com/dotnet-buildtools/prereqs:fedora-28-helix-09ca40b-20190508143249" Platform="Linux" Condition="'$(TargetArchitecture)' == 'x64'" />
    
    <!-- arm64 queues -->
    <HelixAvailableTargetQueue Include="(Debian.9.Arm64.Open)Ubuntu.1604.Arm64.Docker.Open@mcr.microsoft.com/dotnet-buildtools/prereqs:debian-9-helix-arm64v8-0a0ebdd-20190312215438" Platform="Linux" Arch="arm64" Condition="'$(TargetArchitecture)' == 'arm64'" />
    
    <!-- Need to resolve permission issues on this docker queue
    <HelixAvailableTargetQueue Include="(Alpine.38.Arm64)Ubuntu.1604.Arm64.Docker@mcr.microsoft.com/dotnet-buildtools/prereqs:alpine-3.8-helix-arm64v8-46e69dd-20190327215724" Platform="Linux" Arch="arm64" Condition="'$(TargetArchitecture)' == 'arm'" />
    <HelixAvailableTargetQueue Include="(Ubuntu-1804.Arm64.Open)Ubuntu.1604.Arm64.Docker.Open@mcr.microsoft.com/dotnet-buildtools/prereqs:ubuntu-18.04-helix-arm64v8-6f28fa9-20190606004102" Platform="Linux" Arch="arm64" Condition="'$(TargetArchitecture)' == 'arm64'" />
    -->
  </ItemGroup>

  <ItemGroup Condition="'$(IsWindowsOnlyTest)' == 'true'">
    <HelixAvailablePlatform Include="Windows" />

    <HelixAvailableTargetQueue Include="Windows.10.Amd64.EnterpriseRS3.ASPNET.Open" Platform="Windows" />
    <HelixAvailableTargetQueue Include="Windows.81.Amd64.Open" Platform="Windows" />
    <HelixAvailableTargetQueue Include="Windows.7.Amd64.Open" Platform="Windows" />

    <HelixContent Include="$(RepoRoot)src\Servers\IIS\tools\update_schema.ps1" />
    <HelixContent Include="$(RepoRoot)src\Servers\IIS\tools\UpdateIISExpressCertificate.ps1" />
    <HelixContent Include="$(RepoRoot)src\Servers\IIS\tools\TestCert.pfx" />
    <HelixContent Include="$(RepoRoot)src\Servers\IIS\AspNetCoreModuleV2\AspNetCore\aspnetcore_schema_v2.xml" />

    <HelixPreCommand Include="call RunPowershell.cmd update_schema.ps1 || exit /b 1" />
    <HelixPreCommand Include="call RunPowershell.cmd UpdateIISExpressCertificate.ps1 || exit /b 1" />
  </ItemGroup>
</Project>
