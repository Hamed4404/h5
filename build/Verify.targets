<Project>
  <!-- Runs NuGetPackageVerifier on signed packages -->
  <Target Name="VerifySignedPackages">
    <ItemGroup>
      <ExcludedRules Include="PowerShellScriptIsSignedRule" Condition="'$(SignType)' != 'real'" />
      <ExcludedRules Include="AuthenticodeSigningRule" Condition="'$(SignType)' != 'real'" />
    </ItemGroup>

    <VerifyPackages
      ArtifactDirectory="$(PackagesOutputPath)"
      RuleFile="$(RepositoryRoot)NuGetPackageVerifier-Signed.json"
      ExcludedRules="@(ExcludedRules)" />
  </Target>

  <!-- Ensures binaries in the aspnetcore shared framework are correctly authenticode signed -->
  <Target Name="VerifySignedSharedFxBinaries" Condition="'$(SignType)' == 'real'">
    <ItemGroup>
      <SignedSharedFxBinaries Include="$(UnsignedSharedFxPath)**\*.dll" Exclude="$(UnsignedSharedFxPath)*.*"/>
    </ItemGroup>
    <RepoTasks.VerifySignedSharedFxBinaries Binaries="@(SignedSharedFxBinaries)" />
  </Target>

</Project>
